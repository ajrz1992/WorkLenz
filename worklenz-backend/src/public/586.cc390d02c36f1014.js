"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[586],{71586:(ln,Y,s)=>{s.r(Y),s.d(Y,{AdminCenterModule:()=>Ne});var z=s(96814),J=s(35420),p=s(15861),u=s(69649),Z=s(86408),x=s(27782),n=s(65879),j=s(26857),G=s(69862);let f=(()=>{var o;class a extends j.P{constructor(e){super(),this.http=e,this.root=`${this.API_BASE_URL}/admin-center`}getOrganizationName(){return this._get(this.http,`${this.root}/organization`)}getOrganizationAdmins(){return this._get(this.http,`${this.root}/organization/admins`)}updateOrganizationName(e){return this._put(this.http,`${this.root}/organization`,e)}updateOwnerContactNumber(e){return this._put(this.http,`${this.root}/organization/owner/contact-number`,e)}getOrganizationUsers(e,t,r,c,d){const _=encodeURIComponent(d||"");return this._get(this.http,`${this.root}/organization/users${(0,u.UK)({index:e,size:t,field:r,order:c,search:_})}`)}getOrganizationTeams(e,t,r,c,d){const _=encodeURIComponent(d||"");return this._get(this.http,`${this.root}/organization/teams${(0,u.UK)({index:e,size:t,field:r,order:c,search:_})}`)}getOrganizationTeam(e){return this._get(this.http,`${this.root}/organization/team/${e}`)}updateTeam(e,t){return this._put(this.http,`${this.root}/organization/team/${e}`,t)}getBillingAccountInfo(){return this._get(this.http,`${this.root}/billing/info`)}upgradePlan(e){return this._get(this.http,`${this.root}/billing/upgrade-plan${(0,u.UK)({plan:e})}`)}changePlan(e){return this._get(this.http,`${this.root}/billing/change-plan${(0,u.UK)({plan:e})}`)}getPlans(){return this._get(this.http,`${this.root}/billing/plans`)}getBillingConfiguration(){return this._get(this.http,`${this.root}/billing/configuration`)}updateBillingConfiguration(e){return this._put(this.http,`${this.root}/billing/configuration`,e)}getTransactions(){return this._get(this.http,`${this.root}/billing/transactions`)}getCharges(){return this._get(this.http,`${this.root}/billing/charges`)}purchaseStorage(){return this._get(this.http,`${this.root}/billing/purchase-storage`)}getStorageInfo(){return this._get(this.http,`${this.root}/billing/storage`)}getStoragePurchases(){return this._get(this.http,`${this.root}/billing/modifiers`)}cancelSubscription(){return this._get(this.http,`${this.root}/billing/cancel-plan`)}pauseSubscription(){return this._get(this.http,`${this.root}/billing/pause-plan`)}resumeSubscription(){return this._get(this.http,`${this.root}/billing/resume-plan`)}getBillingAccountStorage(){return this._get(this.http,`${this.root}/billing/account-storage`)}getCountries(){return this._get(this.http,`${this.root}/billing/countries`)}switchToFreePlan(e){return this._get(this.http,`${this.root}/billing/switch-to-free-plan/${e}`)}redeemCode(e){return this._post(this.http,`${this.root}/billing/redeem`,e)}deleteTeam(e){return this._delete(this.http,`${this.root}/organization/team/${e}`)}removeTeamMember(e,t){return this._put(this.http,`${this.root}/organization/team-member/${e}`,{teamId:t})}getFreePlanLimits(){return this._get(this.http,`${this.root}/billing/free-plan`)}getOrganizationProjects(e,t,r,c,d){const _=encodeURIComponent(d||"");return this._get(this.http,`${this.root}/organization/projects${(0,u.UK)({index:e,size:t,field:r,order:c,search:_})}`)}}return(o=a).\u0275fac=function(e){return new(e||o)(n.LFG(G.eN))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();var m=s(26254),b=s(62595),v=s(82962),A=s(8083),g=s(13740),U=s(92574),T=s(20824),S=s(70855),O=s(24139),w=s(96109),l=s(60095);const cn=["numberInput"];function pn(o,a){1&o&&n._UZ(0,"span",16),2&o&&n.Q6J("nzTooltipTitle","Email Address")}function un(o,a){if(1&o&&(n.TgZ(0,"span",5),n._uU(1),n.qZA()),2&o){const i=n.oxw();n.xp6(1),n.Oqu(i.organizationDetails.email)}}function _n(o,a){1&o&&n._UZ(0,"span",17),2&o&&n.Q6J("nzTooltipTitle","Contact Number")}function gn(o,a){if(1&o&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&o){const i=n.oxw(3);n.xp6(1),n.Oqu(i.organizationDetails.contact_number)}}function dn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"span",24),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(3);return n.KtG(t.focusNumberInput())}),n._uU(1,"Add Contact Number"),n.qZA()}}function mn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"div",25)(1,"input",26,27),n.NdJ("ngModelChange",function(t){n.CHM(i);const r=n.oxw(3);return n.KtG(r.organizationDetails.contact_number=t)})("input",function(t){n.CHM(i);const r=n.oxw(3);return n.KtG(r.sanitizeContactNumber(t))})("blur",function(){n.CHM(i);const t=n.oxw(3);return n.KtG(t.updateOwnerContactNumber())})("keydown.enter",function(){n.CHM(i);const t=n.oxw(3);return n.KtG(t.updateOwnerContactNumber())}),n.qZA()()}if(2&o){const i=n.oxw(3);n.xp6(1),n.Q6J("ngModel",i.organizationDetails.contact_number)}}function zn(o,a){if(1&o&&(n.TgZ(0,"div",19),n.YNc(1,gn,2,1,"span",20),n.YNc(2,dn,2,0,"span",21),n.YNc(3,mn,3,1,"div",22),n.qZA()),2&o){const i=n.oxw(2);n.xp6(1),n.Q6J("ngIf",i.organizationDetails.contact_number&&!i.isNumberEditing),n.xp6(1),n.Q6J("ngIf",!i.organizationDetails.contact_number&&!i.isNumberEditing),n.xp6(1),n.Q6J("ngIf",i.isNumberEditing)}}function fn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"span",30),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(4);return n.KtG(t.focusNumberInput())}),n.qZA()}}function hn(o,a){if(1&o&&(n.ynx(0),n.YNc(1,fn,1,0,"span",29),n.BQk()),2&o){const i=n.oxw(3);n.xp6(1),n.Q6J("ngIf",!i.isNumberEditing)}}function Tn(o,a){if(1&o&&(n.ynx(0),n.YNc(1,hn,2,1,"ng-container",28),n.BQk()),2&o){const i=n.oxw(2);n.xp6(1),n.Q6J("ngIf",i.organizationDetails.contact_number)}}function bn(o,a){1&o&&(n.TgZ(0,"span")(1,"nz-space",6),n.YNc(2,zn,4,3,"div",18),n.YNc(3,Tn,2,1,"ng-container",12),n.qZA()())}function Cn(o,a){1&o&&(n.TgZ(0,"span",34),n._uU(1,"(Owner)"),n.qZA())}function Zn(o,a){if(1&o&&(n.TgZ(0,"tr")(1,"td",31),n._uU(2),n.YNc(3,Cn,2,0,"span",32),n.qZA(),n.TgZ(4,"td",33),n._uU(5),n.qZA()()),2&o){const i=a.$implicit;n.xp6(2),n.hij("",i.name," "),n.xp6(1),n.Q6J("ngIf",i.is_owner),n.xp6(2),n.Oqu(i.email)}}const xn=function(){return{rows:3}},vn=function(){return{rows:5}};let yn=(()=>{var o;class a{constructor(e,t){this.api=e,this.ngZone=t,this.loadingName=!1,this.loadingAdmins=!1,this.isNumberEditing=!1,this.organizationDetails={},this.organizationAdmins=[],Z.s.track(x.df)}ngOnInit(){this.getOrganizationName(),this.getOrganizationAdmins()}getOrganizationName(){var e=this;return(0,p.Z)(function*(){try{e.loadingName=!0;const t=yield e.api.getOrganizationName();t.done&&(e.loadingName=!1,e.organizationDetails=t.body)}catch(t){e.loadingName=!1,(0,u.tu)(t)}})()}getOrganizationAdmins(){var e=this;return(0,p.Z)(function*(){try{e.loadingAdmins=!0;const t=yield e.api.getOrganizationAdmins();t.done&&(e.loadingAdmins=!1,e.organizationAdmins=t.body)}catch(t){e.loadingAdmins=!1,(0,u.tu)(t)}})()}updateOrganizationName(){var e=this;return(0,p.Z)(function*(){try{e.loadingName=!0,(yield e.api.updateOrganizationName({name:e.organizationDetails.name})).done&&(e.loadingName=!1)}catch(t){e.loadingName=!1,(0,u.tu)(t)}e.getOrganizationName()})()}updateOwnerContactNumber(){var e=this;return(0,p.Z)(function*(){try{e.loadingName=!0,e.isNumberEditing=!1,(yield e.api.updateOwnerContactNumber({contact_number:e.organizationDetails.contact_number||""})).done&&(e.loadingName=!1,e.getOrganizationName())}catch(t){e.loadingName=!1,(0,u.tu)(t)}})()}focusNumberInput(){this.isNumberEditing=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.numberInput?.nativeElement.focus(),this.numberInput?.nativeElement.select()},100)})}sanitizeContactNumber(e){const r=e.target.value.replace(/[^0-9()+ -]/g,"");this.organizationDetails.contact_number=r}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(n.R0b))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-overview"]],viewQuery:function(e,t){if(1&e&&n.Gf(cn,5),2&e){let r;n.iGM(r=n.CRH())&&(t.numberInput=r.first)}},decls:35,vars:14,consts:[[1,"px-0",3,"nzGhost"],[1,"card-content"],["nz-typography","","nzEditable","",3,"nzContent","nzContentChange"],[1,"mt-4"],[3,"nzLoading","nzActive","nzParagraph"],["nz-typography",""],[1,"align-items-center"],["nz-icon","","nzType","mail","nzTheme","outline","nz-tooltip","",3,"nzTooltipTitle",4,"nzSpaceItem"],["nz-typography","",4,"nzSpaceItem"],[1,"mt-2"],[1,"align-items-center",2,"margin-left","-4px"],["nz-icon","","nzType","phone","nzTheme","outline","nz-tooltip","",3,"nzTooltipTitle",4,"nzSpaceItem"],[4,"nzSpaceItem"],[3,"nzNoResult","nzData","nzPaginationType"],["adminsTable",""],[4,"ngFor","ngForOf"],["nz-icon","","nzType","mail","nzTheme","outline","nz-tooltip","",3,"nzTooltipTitle"],["nz-icon","","nzType","phone","nzTheme","outline","nz-tooltip","",3,"nzTooltipTitle"],["class","position-relative","style","min-height: 32px",4,"nzSpaceItem"],[1,"position-relative",2,"min-height","32px"],["nz-typography","","style","line-height: 32px",4,"ngIf"],["nz-typography","","class","text-btn",3,"click",4,"ngIf"],["class","number-input",4,"ngIf"],["nz-typography","",2,"line-height","32px"],["nz-typography","",1,"text-btn",3,"click"],[1,"number-input"],["nz-input","","type","tel","placeholder","Add Contact Number","maxlength","20",3,"ngModel","ngModelChange","input","blur","keydown.enter"],["numberInput",""],[4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline","class","edit-btn",3,"click",4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline",1,"edit-btn",3,"click"],[1,"left-td"],["nz-typography","","nzType","secondary",4,"ngIf"],[1,"b-65"],["nz-typography","","nzType","secondary"]],template:function(e,t){if(1&e&&(n.TgZ(0,"nz-page-header",0)(1,"nz-page-header-title"),n._uU(2,"Overview"),n.qZA()(),n.TgZ(3,"nz-card")(4,"h4"),n._uU(5,"Organization Name"),n.qZA(),n.TgZ(6,"div",1)(7,"p",2),n.NdJ("nzContentChange",function(c){return t.organizationDetails.name=c})("nzContentChange",function(){return t.updateOrganizationName()}),n.qZA()()(),n._UZ(8,"div",3),n.TgZ(9,"nz-card")(10,"h4"),n._uU(11,"Organization Owner"),n.qZA(),n.TgZ(12,"div",1)(13,"nz-skeleton",4)(14,"p",5),n._uU(15),n.qZA(),n.TgZ(16,"div")(17,"nz-space",6),n.YNc(18,pn,1,1,"span",7),n.YNc(19,un,2,1,"span",8),n.qZA()(),n.TgZ(20,"div",9)(21,"nz-space",10),n.YNc(22,_n,1,1,"span",11),n._uU(23,"\xa0 "),n.YNc(24,bn,4,0,"span",12),n.qZA()()()()(),n._UZ(25,"div",3),n.TgZ(26,"nz-card")(27,"h4"),n._uU(28,"Organization Admins"),n.qZA(),n.TgZ(29,"div",1)(30,"nz-skeleton",4)(31,"nz-table",13,14)(33,"tbody"),n.YNc(34,Zn,6,3,"tr",15),n.qZA()()()()()),2&e){const r=n.MAs(32);n.Q6J("nzGhost",!1),n.xp6(7),n.Q6J("nzContent",t.organizationDetails.name),n.xp6(6),n.Q6J("nzLoading",t.loadingName)("nzActive",!0)("nzParagraph",n.DdM(12,xn)),n.xp6(2),n.Oqu(t.organizationDetails.owner_name),n.xp6(15),n.Q6J("nzLoading",t.loadingAdmins)("nzActive",!0)("nzParagraph",n.DdM(13,vn)),n.xp6(1),n.Q6J("nzData",t.organizationAdmins)("nzPaginationType","small"),n.xp6(3),n.Q6J("ngForOf",r.data)}},dependencies:[z.sg,z.O5,m.$O,m.u9,b.Ls,v.bd,A.ZU,g.N8,g.Uo,g.p0,g.$Z,U.NU,U.$1,T.Zp,S.w,O.ng,w.SY,l.Fj,l.JJ,l.nD,l.On],styles:[".card-content[_ngcontent-%COMP%]{padding-top:8px}h4[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{margin-bottom:8px}.b-65[_ngcontent-%COMP%]{color:#000000a6}.left-td[_ngcontent-%COMP%]{width:250px}.number-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;min-width:200px;width:100%}.edit-btn[_ngcontent-%COMP%]{cursor:pointer;color:#1890ff}.text-btn[_ngcontent-%COMP%]{line-height:32px;cursor:pointer;color:#188fff}"]}),a})();var k=s(21406),h=s(3599),y=s(42840),I=s(41958),L=s(33640),$=s(96928),X=s(2919);function Pn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.getUsers())}),n._UZ(1,"span",11),n.qZA()}}function An(o,a){1&o&&n._UZ(0,"span",16)}function Un(o,a){if(1&o&&(n.TgZ(0,"form",12)(1,"nz-input-group",13),n._UZ(2,"input",14),n.qZA(),n.YNc(3,An,1,0,"ng-template",null,15,n.W1O),n.qZA()),2&o){const i=n.MAs(4),e=n.oxw();n.Q6J("formGroup",e.searchForm)("nzLayout","vertical"),n.xp6(1),n.Q6J("nzSuffix",i),n.xp6(1),n.Q6J("formControlName","search")}}function Sn(o,a){if(1&o&&(n.TgZ(0,"tr",17)(1,"td",18),n._UZ(2,"nz-avatar",19),n.ALo(3,"firstCharUpper"),n.TgZ(4,"nz-badge"),n._uU(5),n.TgZ(6,"span",20),n._uU(7),n.qZA()()(),n.TgZ(8,"td",18),n._uU(9),n.qZA(),n.TgZ(10,"td",18),n._uU(11),n.ALo(12,"date"),n.qZA()()),2&o){const i=a.$implicit,e=n.oxw();n.xp6(2),n.Udp("background-color",i.avatar_url?"#ececec":e.getColor(i.name)),n.s9C("nzText",n.lcZ(3,10,i.name)),n.Q6J("nzSize",28)("nzSrc",i.avatar_url),n.xp6(3),n.hij(" ",i.name," "),n.xp6(1),n.Q6J("nzType","secondary"),n.xp6(1),n.Oqu(i.is_admin?"(Admin)":i.is_owner?"(Owner)":""),n.xp6(2),n.hij(" ",i.email," "),n.xp6(2),n.hij(" ",n.xi3(12,12,i.last_logged,"medium")||"-"," ")}}function wn(o,a){1&o&&(n.TgZ(0,"div",21)(1,"div",22),n._UZ(2,"img",23),n.qZA(),n.TgZ(3,"span",24),n._uU(4,"No users found in the organization."),n.qZA()())}const Nn=function(){return[]};let On=(()=>{var o;class a{constructor(e,t){this.api=e,this.fb=t,this.visible=!1,this.visibleNewMember=!1,this.users=[],this.loading=!1,this.total=0,this.pageSize=k.L8,this.pageIndex=1,this.paginationSizes=[5,10,15,20,50,100],this.sortField=null,this.sortOrder=null,this.form=this.fb.group({name:[null,[l.kI.required]]}),this.searchForm=this.fb.group({search:[]}),this.searchForm.valueChanges.subscribe(()=>this.getUsers()),Z.s.track(x.Oh)}getColor(e){return k.Lj[e?.charAt(0).toUpperCase()||"A"]}onQueryParamsChange(e){var t=this;return(0,p.Z)(function*(){const{pageSize:r,pageIndex:c,sort:d}=e;t.pageIndex=c,t.pageSize=r;const _=d.find(N=>null!==N.value);t.sortField=_&&_.key||null,t.sortOrder=_&&_.value||null,yield t.getUsers()})()}getUsers(){var e=this;return(0,p.Z)(function*(){try{e.loading=!0;const t=yield e.api.getOrganizationUsers(e.pageIndex,e.pageSize,e.sortField,e.sortOrder,e.searchForm.value.search);t.done&&(e.total=t.body.total||0,e.users=t.body.data||[],e.loading=!1)}catch(t){e.loading=!1,(0,u.tu)(t)}})()}open(){}close(){this.visible=!1}openNewmember(){this.visibleNewMember=!0}closeNewmember(){this.visibleNewMember=!1}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(l.qu))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-users"]],decls:26,vars:14,consts:[[1,"px-0",3,"nzGhost"],[1,"site-page-header","pt-0","ps-0"],["nz-button","","nz-tooltip","","nzShape","circle","nzTooltipTitle","Refresh users","nzType","default",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","nzLayout",4,"nzSpaceItem"],[3,"nzActive","nzLoading"],["nzShowSizeChanger","","nzSize","small",1,"custom-table",3,"nzData","nzFrontPagination","nzLoading","nzPageIndex","nzPageSizeOptions","nzPageSize","nzTotal","nzNoResult","nzQueryParams"],["usersTable",""],["scope","col"],["class","actions-row",4,"ngFor","ngForOf"],["noDataTemplate",""],["nz-button","","nz-tooltip","","nzShape","circle","nzTooltipTitle","Refresh users","nzType","default",3,"click"],["nz-icon","","nzTheme","outline","nzType","sync"],["nz-form","",3,"formGroup","nzLayout"],[3,"nzSuffix"],["nz-input","","placeholder","Search by name","type","text",3,"formControlName"],["suffixIconSearch",""],["nz-icon","","nzType","search"],[1,"actions-row"],[1,"cursor-pointer"],[1,"me-2",3,"nzSize","nzText","nzSrc"],["nz-typography","",3,"nzType"],[1,"pt-4","pb-5"],[1,"no-data-img-holder","mx-auto","mb-3"],["src","/assets/images/empty-box.webp","alt","",1,"img-fluid"],["nz-typography","",1,"no-data-text"]],template:function(e,t){if(1&e&&(n.TgZ(0,"nz-page-header",0)(1,"nz-page-header-title"),n._uU(2,"Users"),n.qZA()(),n.TgZ(3,"nz-page-header",1)(4,"nz-page-header-subtitle"),n._uU(5),n.qZA(),n.TgZ(6,"nz-page-header-extra")(7,"nz-space"),n.YNc(8,Pn,2,0,"button",2),n.YNc(9,Un,5,4,"form",3),n.qZA()()(),n.TgZ(10,"nz-card")(11,"nz-skeleton",4)(12,"nz-table",5,6),n.NdJ("nzQueryParams",function(c){return t.onQueryParamsChange(c)}),n.TgZ(14,"thead")(15,"tr")(16,"th",7),n._uU(17,"User"),n.qZA(),n.TgZ(18,"th",7),n._uU(19,"Email"),n.qZA(),n.TgZ(20,"th",7),n._uU(21,"Last Activity"),n.qZA()()(),n.TgZ(22,"tbody"),n.YNc(23,Sn,13,15,"tr",8),n.qZA()()()(),n.YNc(24,wn,5,0,"ng-template",null,9,n.W1O)),2&e){const r=n.MAs(13),c=n.MAs(25);n.Q6J("nzGhost",!1),n.xp6(5),n.hij("",t.total," users"),n.xp6(6),n.Q6J("nzActive",!1)("nzLoading",!1),n.xp6(1),n.Q6J("nzData",t.users||n.DdM(13,Nn))("nzFrontPagination",!1)("nzLoading",t.loading)("nzPageIndex",t.pageIndex)("nzPageSizeOptions",t.paginationSizes)("nzPageSize",t.pageSize)("nzTotal",t.total)("nzNoResult",c),n.xp6(11),n.Q6J("ngForOf",r.data)}},dependencies:[z.sg,m.$O,m.u9,m.yG,m.Jp,b.Ls,v.bd,A.ZU,g.N8,g.Uo,g._C,g.Om,g.p0,g.$Z,U.NU,U.$1,h.Lr,T.Zp,T.gB,T.ke,y.ix,S.w,I.dQ,O.ng,L.x7,$.Dz,w.SY,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,z.uU,X.I],styles:[".you-text[_ngcontent-%COMP%]{font-size:12px;color:#00000073}.admin-text[_ngcontent-%COMP%]{font-size:12px;background-color:#faad141a;font-weight:500;padding:0 4px;border-radius:12px;color:#faad14}.ant-dropdown[_ngcontent-%COMP%]{position:relative;margin:0;padding:4px 0;text-align:left;list-style-type:none;background-color:#fff;background-clip:padding-box;border-radius:2px;outline:none;box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d}.ant-form-item-label[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{float:left!important}.role-selector[_ngcontent-%COMP%]{margin-top:24px}nz-page-header-subtitle[_ngcontent-%COMP%]{color:#000000d9;font-weight:500;font-size:16px}.no-data-img-holder[_ngcontent-%COMP%]{width:100px;margin-top:42px}"]}),a})();var In=s(45538),Mn=s(83916),nn=s(90586),Jn=s(95542),Qn=s(93302),q=s(32333),C=s(10095),D=s(43389),M=s(9691),tn=s(99183),E=s(19035);function qn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",18),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.getTeams())}),n._UZ(1,"span",19),n.qZA()}}function kn(o,a){1&o&&n._UZ(0,"span",24)}function Ln(o,a){if(1&o&&(n.TgZ(0,"form",20)(1,"nz-input-group",21),n._UZ(2,"input",22),n.qZA(),n.YNc(3,kn,1,0,"ng-template",null,23,n.W1O),n.qZA()),2&o){const i=n.MAs(4),e=n.oxw();n.Q6J("nzLayout","vertical")("formGroup",e.searchForm),n.xp6(1),n.Q6J("nzSuffix",i),n.xp6(1),n.Q6J("formControlName","search")}}function Dn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"span")(1,"button",25),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.openNewTeam())}),n._uU(2,"Add Team"),n.qZA()()}}function Fn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.openTeamDrawer(t.currentTeam))}),n._UZ(1,"span",35),n.qZA()}2&o&&n.Q6J("nzTooltipPlacement","top")("nzTooltipTitle","Settings")("nzType","default")}function Yn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",36),n.NdJ("nzOnConfirm",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.deleteTeam(t.currentTeam.id))}),n._UZ(1,"span",37),n.qZA()}2&o&&n.Q6J("nzOkText","Yes")("nzPopconfirmTitle","Are you sure?")("nzSize","small")("nzTooltipPlacement","top")("nzTooltipTitle","Delete")("nzType","default")}function jn(o,a){if(1&o&&(n.TgZ(0,"tr",26)(1,"td",27),n._UZ(2,"nz-badge",28),n.qZA(),n.TgZ(3,"td",29),n._uU(4),n.qZA(),n.TgZ(5,"td",27),n._UZ(6,"worklenz-avatars",30),n.qZA(),n.TgZ(7,"td",27)(8,"div",31)(9,"nz-space"),n.YNc(10,Fn,2,3,"button",32),n.YNc(11,Yn,2,6,"button",33),n.qZA()()()()),2&o){const i=n.oxw();n.xp6(2),n.Q6J("nzText",i.currentTeam.name),n.xp6(2),n.hij(" ",i.currentTeam.members_count," "),n.xp6(2),n.Q6J("names",i.currentTeam.names)}}function En(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(i);const t=n.oxw().$implicit,r=n.oxw();return n.KtG(r.openTeamDrawer(t))}),n._UZ(1,"span",35),n.qZA()}2&o&&n.Q6J("nzTooltipPlacement","top")("nzTooltipTitle","Settings")("nzType","default")}function Vn(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",36),n.NdJ("nzOnConfirm",function(){n.CHM(i);const t=n.oxw().$implicit,r=n.oxw();return n.KtG(r.deleteTeam(t.id))}),n._UZ(1,"span",37),n.qZA()}2&o&&n.Q6J("nzOkText","Yes")("nzPopconfirmTitle","Are you sure?")("nzSize","small")("nzTooltipPlacement","top")("nzTooltipTitle","Delete")("nzType","default")}function Bn(o,a){if(1&o&&(n.TgZ(0,"tr",26)(1,"td",27),n._uU(2),n.qZA(),n.TgZ(3,"td",29),n._uU(4),n.qZA(),n.TgZ(5,"td",27),n._UZ(6,"worklenz-avatars",30),n.qZA(),n.TgZ(7,"td",27)(8,"div",31)(9,"nz-space"),n.YNc(10,En,2,3,"button",32),n.YNc(11,Vn,2,6,"button",33),n.qZA()()()()),2&o){const i=a.$implicit;n.xp6(2),n.hij(" ",i.name," "),n.xp6(2),n.hij(" ",i.members_count," "),n.xp6(2),n.Q6J("names",i.names)}}function Rn(o,a){1&o&&(n.TgZ(0,"div",38)(1,"div",39),n._UZ(2,"img",40),n.qZA(),n.TgZ(3,"span",41),n._uU(4,"No teams found in the organization."),n.qZA()())}function Gn(o,a){}function $n(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",36),n.NdJ("nzOnConfirm",function(){n.CHM(i);const t=n.oxw().$implicit,r=n.oxw(2);return n.KtG(r.deleteTeamMember(t.value.id))}),n._UZ(1,"span",37),n.qZA()}2&o&&n.Q6J("nzOkText","Yes")("nzPopconfirmTitle","Are you sure?")("nzSize","small")("nzTooltipPlacement","top")("nzTooltipTitle","Delete")("nzType","default")}function Kn(o,a){if(1&o&&(n.TgZ(0,"tr",50)(1,"td"),n._UZ(2,"nz-avatar",51),n.ALo(3,"firstCharUpper"),n.TgZ(4,"nz-badge"),n._uU(5),n.qZA()(),n.TgZ(6,"td")(7,"nz-select",52),n._UZ(8,"nz-option",53)(9,"nz-option",54)(10,"nz-option",55),n.qZA()(),n.TgZ(11,"td"),n.YNc(12,$n,2,6,"button",56),n.qZA()()),2&o){const i=a.$implicit,e=a.index,t=n.oxw(2);n.Q6J("formGroupName",e),n.xp6(2),n.Udp("background-color",i.value.avatar_url?"#ececec":t.getColor("name")),n.Q6J("nzSize",28)("nzText",n.lcZ(3,12,i.value.name))("nzSrc",i.value.avatar_url),n.xp6(3),n.Oqu(i.value.name),n.xp6(2),n.Q6J("formControlName","role_name")("nzDisabled","Owner"===i.value.role_name),n.uIk("id","member_"+e),n.xp6(3),n.Q6J("nzDisabled","Owner"!==i.value.role_name),n.xp6(2),n.Q6J("ngIf","Owner"!==i.value.role_name)}}function Hn(o,a){if(1&o){const i=n.EpF();n.ynx(0),n.TgZ(1,"form",42),n.NdJ("ngSubmit",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.submit())}),n.TgZ(2,"nz-form-item")(3,"nz-form-label",43),n._uU(4," Team Name "),n.qZA(),n._UZ(5,"input",44),n.qZA(),n.TgZ(6,"nz-form-item",45)(7,"nz-form-label",43),n._uU(8),n.qZA(),n.TgZ(9,"nz-table",46)(10,"thead")(11,"tr")(12,"th"),n._uU(13,"User"),n.qZA(),n.TgZ(14,"th",47),n._uU(15,"Role"),n.qZA(),n._UZ(16,"th"),n.qZA()(),n.TgZ(17,"tbody"),n.YNc(18,Kn,13,14,"tr",48),n.qZA()()(),n.TgZ(19,"button",49),n._uU(20,"Save"),n.qZA()(),n.BQk()}if(2&o){const i=n.oxw(),e=n.MAs(36);n.xp6(1),n.Q6J("formGroup",i.editTeamForm)("nzLayout","vertical"),n.xp6(2),n.Q6J("nzSpan",null),n.xp6(2),n.Q6J("formControlName","name"),n.xp6(2),n.Q6J("nzSpan",null),n.xp6(1),n.hij(" Users (",i.teamMembers.controls.length,") "),n.xp6(1),n.Q6J("nzData",i.teamMembers.controls)("nzFrontPagination",!1)("formArrayName","teamMembers")("nzNoResult",e),n.xp6(9),n.Q6J("ngForOf",i.teamMembers.controls)}}function Wn(o,a){if(1&o){const i=n.EpF();n.ynx(0),n.TgZ(1,"form",57),n.NdJ("submit",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.createTeam())}),n.TgZ(2,"nz-form-item",45)(3,"nz-form-label",58),n._uU(4," Team name "),n.qZA(),n.TgZ(5,"nz-form-control"),n._UZ(6,"input",59),n.qZA()(),n.TgZ(7,"button",60),n._uU(8,"Create"),n.qZA()(),n.BQk()}if(2&o){const i=n.oxw();n.xp6(1),n.Q6J("formGroup",i.form),n.xp6(5),n.Q6J("formControlName","name")}}function Xn(o,a){}const nt=function(){return[]};let tt=(()=>{var o;class a{get buttonText(){return this.isValueIsAnEmail()?"Invite as a member":"Invite a new member by email"}constructor(e,t,r,c,d,_,N,W){this.api=e,this.teamMembersApi=t,this.teamsApiService=r,this.fb=c,this.app=d,this.service=_,this.membersApi=N,this.auth=W,this.visible=!1,this.visibleNewTeam=!1,this.teams=[],this.currentTeam=null,this.loading=!1,this.total=0,this.pageSize=k.L8,this.pageIndex=1,this.paginationSizes=[5,10,15,20,50,100],this.sortField=null,this.sortOrder=null,this.loadingTeamDetails=!1,this.teamData={},this.selectedTeam={},this.updatingTeam=!1,this.users=[],this.totalUsers=0,this.searchingName=null,this.projectId=null,this.inviting=!1,this.app.setTitle("Admin Center - Teams"),this.form=this.fb.group({name:[null,[l.kI.required]]}),this.editTeamForm=this.fb.group({name:[null,[l.kI.required]],teamMembers:this.fb.array([]),search:[null]}),this.searchForm=this.fb.group({search:[]}),this.searchForm.valueChanges.subscribe(()=>this.getTeams()),this.editTeamForm.controls.search?.valueChanges.subscribe(Oe=>this.handleMemberSelect(Oe)),Z.s.track(x.vR)}get teamMembers(){return this.editTeamForm.get("teamMembers")}getColor(e){return k.Lj[e?.charAt(0).toUpperCase()||"A"]}onQueryParamsChange(e){var t=this;return(0,p.Z)(function*(){const{pageSize:r,pageIndex:c,sort:d}=e;t.pageIndex=c,t.pageSize=r;const _=d.find(N=>null!==N.value);t.sortField=_&&_.key||null,t.sortOrder=_&&_.value||null,yield t.getTeams()})()}getTeams(){var e=this;return(0,p.Z)(function*(){try{e.loading=!0;const t=yield e.api.getOrganizationTeams(e.pageIndex,e.pageSize,e.sortField,e.sortOrder,e.searchForm.value.search);t.done&&(e.total=t.body.total||0,e.teams=t.body.data?.filter(r=>r.id!==e.auth.getCurrentSession()?.team_id)||[],e.currentTeam=t.body.current_team_data||null,e.loading=!1)}catch(t){e.loading=!1,(0,u.tu)(t)}})()}createTeam(){var e=this;return(0,p.Z)(function*(){if(e.form.value&&e.form.value.name&&""!==e.form.value.name.trim()){try{e.form.valid?(e.loading=!0,(yield e.teamsApiService.create({name:e.form.value.name})).done&&(e.closeNewTeam(),e.getTeams(),e.service.emitCreateTeam())):e.app.displayErrorsOf(e.form)}catch(t){e.loading=!1,(0,u.tu)(t)}e.loading=!1}})()}openTeamDrawer(e){var t=this;return(0,p.Z)(function*(){if(e.id){try{t.loadingTeamDetails=!0,t.selectedTeam=e,Z.s.track(x.p$),t.getTeamMembers(e)}catch(r){t.loadingTeamDetails=!1,(0,u.tu)(r)}t.visible=!0}})()}getTeamMembers(e){var t=this;return(0,p.Z)(function*(){if(e.id)try{const r=yield t.api.getOrganizationTeam(e.id);r.done&&(t.teamMembers.clear(),t.teamData=r.body,t.total=t.teamData.team_members?.length||0,t.editTeamForm.patchValue({name:t.teamData.name}),t.teamData.team_members?.map(c=>{const d=t.fb.group({id:c.id,user_id:c.user_id,name:c.name,role_name:c.role_name,avatar_url:c.avatar_url});t.teamMembers.push(d)})&&(t.loadingTeamDetails=!1))}catch{t.loadingTeamDetails=!1}})()}close(){this.teamMembers.clear(),this.editTeamForm.reset(),this.visible=!1}openNewTeam(){this.visibleNewTeam=!0}closeNewTeam(){this.visibleNewTeam=!1,this.form.reset()}submit(){var e=this;return(0,p.Z)(function*(){if(e.teamData.id&&e.editTeamForm.value&&e.editTeamForm.value.name&&""!==e.editTeamForm.value.name.trim())try{e.updatingTeam=!0,(yield e.api.updateTeam(e.teamData.id,e.editTeamForm.value)).done&&(e.service.emitTeamNameChange({teamId:e.teamData.id,teamName:e.editTeamForm.value.name}),e.close(),e.getTeams())}catch(t){(0,u.tu)(t)}})()}deleteTeam(e){var t=this;return(0,p.Z)(function*(){if(e)try{(yield t.api.deleteTeam(e)).done&&(Z.s.track(x.pG),yield t.getTeams())}catch(r){(0,u.tu)(r)}})()}handleMemberSelect(e){var t=this;return(0,p.Z)(function*(){if(e&&t.selectedTeam.id)if(t.editTeamForm.valid)try{t.loading=!0;const r={job_title:null,emails:[e],is_admin:!1};(yield t.teamMembersApi.addTeamMember(t.selectedTeam.id,r)).done&&(t.editTeamForm.controls.search?.setValue(null),t.getTeamMembers(t.selectedTeam)),t.loading=!1}catch(r){(0,u.tu)(r),t.loading=!1}else t.app.displayErrorsOf(t.form)})()}deleteTeamMember(e){var t=this;return(0,p.Z)(function*(){if(e&&t.selectedTeam.id)try{(yield t.api.removeTeamMember(e,t.selectedTeam.id)).done&&(Z.s.track(x.OA),e===t.auth.getCurrentSession()?.team_member_id?window.location.reload():yield t.getTeamMembers(t.selectedTeam))}catch(r){(0,u.tu)(r)}})()}isValueIsAnEmail(){return!!this.searchingName&&(0,u.PH)(this.searchingName)}sendInvitation(){var e=this;return(0,p.Z)(function*(){if(e.projectId&&"string"==typeof e.searchingName&&e.searchingName.length)try{const t=e.searchingName.trim().toLowerCase(),r={project_id:e.projectId,email:t};e.inviting=!0,yield e.membersApi.createByEmail(r),e.inviting=!1}catch{e.inviting=!1}})()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(In.B),n.Y36(Mn.S),n.Y36(l.qu),n.Y36(nn.z),n.Y36(Jn.I),n.Y36(Qn.r),n.Y36(q.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-teams"]],decls:37,vars:24,consts:[[1,"px-0",3,"nzGhost"],[1,"site-page-header","pt-0","ps-0"],["nz-button","","nz-tooltip","","nzShape","circle","nzTooltipTitle","Refresh teams","nzType","default",3,"click",4,"nzSpaceItem"],["nz-form","",3,"nzLayout","formGroup",4,"nzSpaceItem"],[4,"nzSpaceItem"],[3,"nzActive","nzLoading"],["nzShowSizeChanger","","nzSize","small",1,"custom-table",3,"nzData","nzLoading","nzPageIndex","nzPageSizeOptions","nzFrontPagination","nzPageSize","nzTotal","nzNoResult","nzQueryParams"],["teamsTable",""],["scope","col"],["scope","col",1,"text-center"],["class","actions-row",4,"ngIf"],["class","actions-row",4,"ngFor","ngForOf"],["noDataTemplate",""],["noDataTemplate1",""],["nzPlacement","right",3,"nzClosable","nzVisible","nzTitle","nzSize","nzWidth","nzOnClose"],[4,"nzDrawerContent"],["nzPlacement","right","nzTitle","Create New Team",3,"nzClosable","nzVisible","nzSize","nzWidth","nzOnClose"],["emptyData",""],["nz-button","","nz-tooltip","","nzShape","circle","nzTooltipTitle","Refresh teams","nzType","default",3,"click"],["nz-icon","","nzTheme","outline","nzType","sync"],["nz-form","",3,"nzLayout","formGroup"],[3,"nzSuffix"],["nz-input","","placeholder","Search by name","type","text",3,"formControlName"],["suffixIconSearch",""],["nz-icon","","nzType","search"],["nz-button","","nzType","primary",3,"click"],[1,"actions-row"],[1,"cursor-pointer"],["nzColor","#52c41a",3,"nzText"],[1,"cursor-pointer","text-center"],[3,"names"],[1,"actions","text-center"],["nz-button","","nz-tooltip","","nzSize","small",3,"nzTooltipPlacement","nzTooltipTitle","nzType","click",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nz-tooltip","",3,"nzOkText","nzPopconfirmTitle","nzSize","nzTooltipPlacement","nzTooltipTitle","nzType","nzOnConfirm",4,"nzSpaceItem"],["nz-button","","nz-tooltip","","nzSize","small",3,"nzTooltipPlacement","nzTooltipTitle","nzType","click"],["nz-icon","","nzType","setting"],["nz-button","","nz-popconfirm","","nz-tooltip","",3,"nzOkText","nzPopconfirmTitle","nzSize","nzTooltipPlacement","nzTooltipTitle","nzType","nzOnConfirm"],["nz-icon","","nzType","delete"],[1,"pt-4","pb-5"],[1,"no-data-img-holder","mx-auto","mb-3"],["src","/assets/images/empty-box.webp","alt","",1,"img-fluid"],["nz-typography","",1,"no-data-text"],["nz-form","",3,"formGroup","nzLayout","ngSubmit"],["nzRequired","",3,"nzSpan"],["nz-input","","placeholder","Name of the team",3,"formControlName"],[1,"d-block"],[3,"nzData","nzFrontPagination","formArrayName","nzNoResult"],[2,"width","150px"],[3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","primary","nzBlock",""],[3,"formGroupName"],[1,"me-2",3,"nzSize","nzText","nzSrc"],[2,"width","150px",3,"formControlName","nzDisabled"],["nzValue","Admin","nzLabel","Admin"],["nzValue","Member","nzLabel","Member"],["nzValue","Owner","nzLabel","Owner",3,"nzDisabled"],["nz-button","","nz-popconfirm","","nz-tooltip","",3,"nzOkText","nzPopconfirmTitle","nzSize","nzTooltipPlacement","nzTooltipTitle","nzType","nzOnConfirm",4,"ngIf"],["nz-form","",3,"formGroup","submit"],["nzRequired",""],["nz-input","","type","text",3,"formControlName"],["nz-button","","nzType","primary","type","submit","nzBlock",""]],template:function(e,t){if(1&e&&(n.TgZ(0,"nz-page-header",0)(1,"nz-page-header-title"),n._uU(2,"Teams"),n.qZA()(),n.TgZ(3,"nz-page-header",1)(4,"nz-page-header-subtitle"),n._uU(5),n.qZA(),n.TgZ(6,"nz-page-header-extra")(7,"nz-space"),n.YNc(8,qn,2,0,"button",2),n.YNc(9,Ln,5,4,"form",3),n.YNc(10,Dn,3,0,"span",4),n.qZA()()(),n.TgZ(11,"nz-card")(12,"nz-skeleton",5)(13,"nz-table",6,7),n.NdJ("nzQueryParams",function(c){return t.onQueryParamsChange(c)}),n.TgZ(15,"thead")(16,"tr")(17,"th",8),n._uU(18,"Team"),n.qZA(),n.TgZ(19,"th",9),n._uU(20,"Members Count"),n.qZA(),n.TgZ(21,"th",8),n._uU(22,"Members"),n.qZA(),n._UZ(23,"th",9),n.qZA()(),n.TgZ(24,"tbody"),n.YNc(25,jn,12,3,"tr",10),n.YNc(26,Bn,12,3,"tr",11),n.qZA()()()(),n.YNc(27,Rn,5,0,"ng-template",null,12,n.W1O),n.YNc(29,Gn,0,0,"ng-template",null,13,n.W1O),n.TgZ(31,"nz-drawer",14),n.NdJ("nzOnClose",function(){return t.close()}),n.YNc(32,Hn,21,11,"ng-container",15),n.qZA(),n.TgZ(33,"nz-drawer",16),n.NdJ("nzOnClose",function(){return t.closeNewTeam()}),n.YNc(34,Wn,9,2,"ng-container",15),n.qZA(),n.YNc(35,Xn,0,0,"ng-template",null,17,n.W1O)),2&e){const r=n.MAs(14),c=n.MAs(28),d=n.MAs(30);n.Q6J("nzGhost",!1),n.xp6(5),n.hij("",t.total?t.total:0," teams"),n.xp6(7),n.Q6J("nzActive",!1)("nzLoading",!1),n.xp6(1),n.Q6J("nzData",t.teams||n.DdM(23,nt))("nzLoading",t.loading)("nzPageIndex",t.pageIndex)("nzPageSizeOptions",t.paginationSizes)("nzFrontPagination",!1)("nzPageSize",t.pageSize)("nzTotal",t.total)("nzNoResult",t.currentTeam?d:c),n.xp6(12),n.Q6J("ngIf",t.currentTeam),n.xp6(1),n.Q6J("ngForOf",r.data),n.xp6(5),n.Q6J("nzClosable",!0)("nzVisible",t.visible)("nzTitle","Team Settings")("nzSize","large")("nzWidth","550px"),n.xp6(2),n.Q6J("nzClosable",!0)("nzVisible",t.visibleNewTeam)("nzSize","large")("nzWidth","350px")}},dependencies:[z.sg,z.O5,m.$O,m.u9,m.yG,m.Jp,b.Ls,v.bd,A.ZU,g.N8,g.Uo,g._C,g.Om,g.p0,g.$Z,U.NU,U.$1,C.t3,C.SK,h.Lr,h.Nx,h.iK,h.Fd,T.Zp,T.gB,T.ke,y.ix,S.w,I.dQ,O.ng,L.x7,$.Dz,w.SY,D.Vz,D.SQ,M.Ip,M.Vq,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,tn.o,E.JW,X.I],styles:["nz-page-header-subtitle[_ngcontent-%COMP%]{color:#000000d9;font-weight:500;font-size:16px}.no-data-img-holder[_ngcontent-%COMP%]{width:100px;margin-top:42px}"]}),a})();var V=s(33410),K=s(73460);const F=function(){return["ant-menu-item-selected"]};let et=(()=>{var o;class a{constructor(e){this.auth=e}get profile(){return this.auth.getCurrentSession()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(q.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-admin-center-sidebar"]],decls:6,vars:26,consts:[["nz-menu","",1,"border-0",3,"nzMode"],["nz-submenu","",1,"rounded-4",3,"routerLink","routerLinkActive","nzTitle","nzIcon"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0),n._UZ(1,"li",1)(2,"li",1)(3,"li",1)(4,"li",1)(5,"li",1),n.qZA()),2&e&&(n.Q6J("nzMode","vertical"),n.xp6(1),n.Q6J("routerLink","overview")("routerLinkActive",n.DdM(21,F))("nzTitle","Overview")("nzIcon","appstore"),n.xp6(1),n.Q6J("routerLink","users")("routerLinkActive",n.DdM(22,F))("nzTitle","Users")("nzIcon","user"),n.xp6(1),n.Q6J("routerLink","teams")("routerLinkActive",n.DdM(23,F))("nzTitle","Teams")("nzIcon","team"),n.xp6(1),n.Q6J("routerLink","projects")("routerLinkActive",n.DdM(24,F))("nzTitle","Projects")("nzIcon","profile"),n.xp6(1),n.Q6J("routerLink","billing")("routerLinkActive",n.DdM(25,F))("nzTitle","Billing")("nzIcon","credit-card"))},dependencies:[J.rH,J.Od,K.wO,K.rY,S.w]}),a})(),ot=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-layout"]],decls:9,vars:2,consts:[[1,"container"],[1,"px-0",3,"nzGhost"],[1,"inner-layout"],[3,"nzWidth"],[1,"px-4","bg-white"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"nz-page-header",1)(2,"nz-page-header-title"),n._uU(3,"Admin Center"),n.qZA()(),n.TgZ(4,"nz-layout",2)(5,"nz-sider",3),n._UZ(6,"worklenz-admin-center-sidebar"),n.qZA(),n.TgZ(7,"nz-content",4),n._UZ(8,"router-outlet"),n.qZA()()()),2&e&&(n.xp6(1),n.Q6J("nzGhost",!1),n.xp6(4),n.Q6J("nzWidth","240px"))},dependencies:[J.lC,V.hw,V.OK,V.t7,m.$O,m.u9,et],styles:["[nz-submenu][_ngcontent-%COMP%]{transition:none!important}"]}),a})();var B=s(79382),P=s(34849),en=s(48128),H=s(23627),Q=s(81221),on=s(12996),R=s(55695);function it(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"div",28)(1,"nz-form-item")(2,"nz-form-label",29),n._uU(3,"No of seats"),n.qZA(),n.TgZ(4,"nz-form-control")(5,"input",30),n.NdJ("ngModelChange",function(t){n.CHM(i);const r=n.oxw(2);return n.KtG(r.selectedSeatCount=t)})("ngModelChange",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.seatCountChanged())}),n.qZA()()()()}if(2&o){const i=n.oxw(2);n.xp6(5),n.Q6J("type","number")("min",15)("step",5)("ngModel",i.selectedSeatCount)}}function at(o,a){1&o&&(n.TgZ(0,"span",31)(1,"h5",4),n._uU(2,"Best for personal use"),n.qZA()())}function rt(o,a){1&o&&(n.TgZ(0,"span",31)(1,"h5",4),n._uU(2," Upto 15 users "),n.qZA()())}function st(o,a){1&o&&n.GkF(0)}function lt(o,a){1&o&&(n.TgZ(0,"span",31)(1,"h5",4),n._uU(2," 16 - 200 users "),n.qZA()())}function ct(o,a){1&o&&(n._uU(0," Business "),n.TgZ(1,"nz-tag",32),n._uU(2,"Most Popular"),n.qZA()),2&o&&(n.xp6(1),n.Q6J("nzColor","volcano"))}function pt(o,a){1&o&&n.GkF(0)}function ut(o,a){1&o&&(n.TgZ(0,"span",31)(1,"h5",4),n._uU(2," 200 - 500+ users "),n.qZA()())}function _t(o,a){1&o&&n.GkF(0)}function gt(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",33),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.switchToFreePlan())}),n._uU(1," Try for free "),n.qZA()}2&o&&n.Q6J("nzSize","large")}function dt(o,a){1&o&&(n.TgZ(0,"button",34),n._uU(1," Contact us "),n.qZA())}function mt(o,a){1&o&&(n.TgZ(0,"div",12)(1,"div"),n._UZ(2,"span",13),n._uU(3,"\xa0 "),n.TgZ(4,"span",4),n._uU(5,"25GB storage"),n.qZA()(),n.TgZ(6,"div"),n._UZ(7,"span",13),n._uU(8,"\xa0 "),n.TgZ(9,"span",4),n._uU(10,"Unlimited active projects"),n.qZA()(),n.TgZ(11,"div"),n._UZ(12,"span",13),n._uU(13,"\xa0 "),n.TgZ(14,"span",4),n._uU(15,"Schedule"),n.qZA()(),n.TgZ(16,"div"),n._UZ(17,"span",13),n._uU(18,"\xa0 "),n.TgZ(19,"span",4),n._uU(20,"Reporting"),n.qZA()(),n.TgZ(21,"div"),n._UZ(22,"span",13),n._uU(23,"\xa0 "),n.TgZ(24,"span",4),n._uU(25,"Subscribe to projects"),n.qZA()()())}function zt(o,a){if(1&o){const i=n.EpF();n.ynx(0),n.TgZ(1,"div",3)(2,"h2",4),n._uU(3,"Select the best plan for your team"),n.qZA(),n.YNc(4,it,6,4,"div",5),n.TgZ(5,"div",6)(6,"div",7)(7,"nz-card",8),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.FREE)}),n.TgZ(8,"div",9)(9,"h1",4),n._uU(10,"Rs 0.00 "),n.TgZ(11,"span",10),n._uU(12,"free forever"),n.qZA()(),n.YNc(13,at,3,0,"span",11),n.qZA(),n.TgZ(14,"div",12)(15,"div"),n._UZ(16,"span",13),n._uU(17,"\xa0 "),n.TgZ(18,"span",4),n._uU(19),n.qZA()(),n.TgZ(20,"div"),n._UZ(21,"span",13),n._uU(22,"\xa0 "),n.TgZ(23,"span",4),n._uU(24),n.qZA()(),n.TgZ(25,"div"),n._UZ(26,"span",13),n._uU(27,"\xa0 "),n.TgZ(28,"span",4),n._uU(29),n.qZA()()()()(),n.TgZ(30,"div",7)(31,"nz-card",14),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.STARTUP)}),n.TgZ(32,"div",9)(33,"h1",4),n._uU(34,"Rs 4990 "),n.qZA(),n.TgZ(35,"span",15),n._uU(36,"FLAT RATE / month"),n.qZA(),n.YNc(37,rt,3,0,"span",11),n.qZA(),n.YNc(38,st,1,0,"ng-container",16),n.qZA()(),n.TgZ(39,"div",7)(40,"nz-card",17),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.BUSINESS)}),n.TgZ(41,"div",9)(42,"h1",4),n._uU(43,"Rs 300"),n.qZA(),n.TgZ(44,"span",15),n._uU(45,"user / month"),n.qZA(),n.YNc(46,lt,3,0,"span",11),n.qZA(),n.YNc(47,ct,3,1,"ng-template",null,18,n.W1O),n.YNc(49,pt,1,0,"ng-container",16),n.qZA()(),n.TgZ(50,"div",7)(51,"nz-card",17),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.ENTERPRISE)}),n.TgZ(52,"div",9)(53,"h1",4),n._uU(54,"Rs 250"),n.qZA(),n.TgZ(55,"span",15),n._uU(56,"user / month"),n.qZA(),n.YNc(57,ut,3,0,"span",11),n.qZA(),n.YNc(58,_t,1,0,"ng-container",16),n.qZA()()(),n.TgZ(59,"div",19),n.YNc(60,gt,2,1,"button",20),n.qZA(),n.TgZ(61,"div",21)(62,"h4",4),n._uU(63," Please provide us with a contact number we can use to reach you.\n"),n.qZA(),n.TgZ(64,"form",22),n.NdJ("ngSubmit",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.contactUs())}),n.TgZ(65,"nz-form-item")(66,"nz-form-label",23),n._uU(67,"Contact Number"),n.qZA(),n.TgZ(68,"nz-form-control",24)(69,"input",25),n.NdJ("ngModelChange",function(t){n.CHM(i);const r=n.oxw();return n.KtG(r.contactNo=t)}),n.qZA()()(),n.TgZ(70,"nz-form-item"),n.YNc(71,dt,2,0,"button",26),n.qZA()()()(),n.YNc(72,mt,26,0,"ng-template",null,27,n.W1O),n.BQk()}if(2&o){const i=n.MAs(48),e=n.MAs(73),t=n.oxw();n.xp6(4),n.Q6J("ngIf",t.billingInfo.status===t.subscriptionStatus.TRIALING&&t.selectedPlan!==t.IPaddleLocalPlans.FREE),n.xp6(1),n.Q6J("nzGutter",8),n.xp6(1),n.Q6J("nzSpan",6),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.FREE),n.xp6(6),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(6),n.hij("",t.plans.free_tier_storage," storage"),n.xp6(5),n.hij("",t.plans.projects_limit," projects"),n.xp6(5),n.hij("",t.plans.team_member_limit," team members"),n.xp6(1),n.Q6J("nzSpan",6),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.STARTUP),n.xp6(6),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(1),n.Q6J("ngTemplateOutlet",e),n.xp6(1),n.Q6J("nzSpan",6),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.BUSINESS),n.Q6J("nzTitle",i),n.xp6(6),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(3),n.Q6J("ngTemplateOutlet",e),n.xp6(1),n.Q6J("nzSpan",6),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.ENTERPRISE),n.Q6J("nzTitle","Enterprise"),n.xp6(6),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(1),n.Q6J("ngTemplateOutlet",e),n.xp6(2),n.Q6J("ngIf",t.selectedPlan===t.paddlePlans.FREE&&"100+"!==t.selectedSeatCount.toString()),n.xp6(4),n.Q6J("nzLayout","inline"),n.xp6(4),n.Q6J("nzSm",14)("nzXs",24),n.xp6(1),n.Q6J("ngModel",t.contactNo),n.xp6(2),n.Q6J("ngIf",t.selectedPlan!==t.paddlePlans.FREE&&"100+"!==t.selectedSeatCount.toString())}}let an=(()=>{var o;class a{get contactUsState(){return 10!==this.contactNo?.length}constructor(e,t,r){this.api=e,this.billingApi=t,this.auth=r,this.billingInfo={},this.isVisible=!1,this.actionDone=new n.vpe,this.planUpgraded=new n.vpe,this.modalClosed=new n.vpe,this.loadDirectPay=new n.vpe,this.selectedSeatCount=15,this.selectedPlan=P.SX.STARTUP,this.plans={},this.subscriptionStatus=P.in,this.paddlePlans=P.SX,this.IPaddleLocalPlans=P.SX,this.contactNo=null,this.upgradingPlan=!1,this.loadingPlans=!1,this.switchingToFree=!1,this.seatCountOptions=[15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]}continueWithSelectedPlan(){!this.selectedPlan&&"100+"===this.selectedSeatCount.toString()||this.loadDirectPay.emit(this.selectedSeatCount)}closePricingModal(){this.isVisible=!1,this.modalClosed.emit()}modelOpened(){this.getPlans()}getPlans(){var e=this;return(0,p.Z)(function*(){try{e.loadingPlans=!0;const t=yield e.api.getPlans();t.done&&(e.plans=t.body,e.loadingPlans=!1)}catch{e.loadingPlans=!1}})()}seatCountChanged(){this.selectedSeatCount<=15&&(this.selectedPlan=P.SX.STARTUP),this.selectedSeatCount>15&&this.selectedSeatCount<200&&(this.selectedPlan=P.SX.BUSINESS),this.selectedSeatCount>200&&(this.selectedPlan=P.SX.ENTERPRISE)}contactUs(){var e=this;return(0,p.Z)(function*(){e.contactNo&&(yield e.billingApi.contactUs(e.contactNo),e.modalClosed.emit())})()}switchToFreePlan(){var e=this;return(0,p.Z)(function*(){try{const t=e.auth.getCurrentSession()?.team_id;if(!t)return;e.switchingToFree=!0,(yield e.api.switchToFreePlan(t)).done&&(e.planUpgraded.emit(),e.isVisible=!1,e.switchingToFree=!1)}catch(t){(0,u.tu)(t)}})()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(H.j),n.Y36(q.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-pricing-plans-lkr"]],inputs:{billingInfo:"billingInfo",isVisible:"isVisible"},outputs:{actionDone:"actionDone",planUpgraded:"planUpgraded",modalClosed:"modalClosed",loadDirectPay:"loadDirectPay"},standalone:!0,features:[n.jDz],decls:4,vars:3,consts:[[3,"nzVisible","nzWidth","nzFooter","nzVisibleChange","nzAfterOpen","nzOnCancel"],[4,"nzModalContent"],["gatewayHost",""],[1,"row","text-center","mt-4"],["nz-typography",""],["nz-row","","class","justify-content-center",4,"ngIf"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","Free Plan",1,"h-100","plan-card",3,"click"],[1,"pricing-plan"],[2,"font-size","0.4em","font-weight","normal"],["class","details",4,"ngIf"],[1,"plan-includes"],["nz-icon","","nzType","check-circle","nzTheme","fill",1,"include-check-circle"],["nzTitle","Startup",1,"h-100","plan-card",3,"click"],[2,"font-weight","normal"],[4,"ngTemplateOutlet"],[1,"h-100","plan-card",3,"nzTitle","click"],["annualTitle",""],[1,"w-100","text-end"],["nz-button","","nzType","primary","type","button","class","mt-3 mb-2",3,"nzSize","click",4,"ngIf"],[1,"bg-secondary-subtle","mt-4","p-3"],["nz-form","",1,"justify-content-center",3,"nzLayout","ngSubmit"],["nzFor","contactNo","nzRequired",""],[3,"nzSm","nzXs"],["name","contactNo","nz-input","","placeholder","07xxxxxxxx","type","number","id","contactNo",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","type","submit",4,"ngIf"],["planIncludes",""],["nz-row","",1,"justify-content-center"],["nzFor","seats"],["nz-input","","id","seats",3,"type","min","step","ngModel","ngModelChange"],[1,"details"],[3,"nzColor"],["nz-button","","nzType","primary","type","button",1,"mt-3","mb-2",3,"nzSize","click"],["nz-button","","nzType","primary","type","submit"]],template:function(e,t){1&e&&(n.TgZ(0,"nz-modal",0),n.NdJ("nzVisibleChange",function(c){return t.isVisible=c})("nzAfterOpen",function(){return t.modelOpened()})("nzOnCancel",function(){return t.closePricingModal()}),n.YNc(1,zt,74,32,"ng-container",1),n.qZA(),n._UZ(2,"div",null,2)),2&e&&n.Q6J("nzVisible",t.isVisible)("nzWidth","60vw")("nzFooter",null)},dependencies:[z.ez,z.O5,z.tP,Q.Qp,Q.du,Q.Hf,A.ZJ,A.ZU,C.Jb,C.t3,C.SK,M.LV,l.u5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.On,l.F,v.vh,v.bd,b.PV,b.Ls,w.cg,R.X,R.j,y.sL,y.ix,S.w,I.dQ,h.U5,h.Lr,h.Nx,h.iK,h.Fd,T.o7,T.Zp,l.UX],styles:[".pricing-plan[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;row-gap:10px;padding:20px 20px 0}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer;box-shadow:#959da533 0 8px 24px}.plan-includes[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto auto;row-gap:7px;padding:10px;justify-items:flex-start}.include-check-circle[_ngcontent-%COMP%]{color:#52c41a}.plan-selected[_ngcontent-%COMP%]{border:solid 2px #1890ff}"]}),a})();var rn=s(28677);function ft(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"div")(1,"nz-form-item")(2,"nz-form-label",2),n._uU(3,"Redeem Code"),n.qZA(),n.TgZ(4,"nz-form-control",3)(5,"input",4),n.NdJ("ngModelChange",function(t){n.CHM(i);const r=n.oxw();return n.KtG(r.redeemCode=t)}),n.qZA()()(),n.TgZ(6,"nz-form-item")(7,"nz-form-control")(8,"button",5),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.submit())}),n._uU(9),n.qZA()()()()}if(2&o){const i=n.oxw();n.xp6(2),n.Q6J("nzSpan",24),n.xp6(2),n.Q6J("nzSpan",24),n.xp6(1),n.Q6J("placeholder","Enter you redeem code")("ngModel",i.redeemCode),n.xp6(3),n.Q6J("nzType","primary")("nzLoading",i.loading)("disabled",10!==i.redeemCode.length),n.xp6(1),n.hij("",i.loading?"Verifying":"Submit"," ")}}let ht=(()=>{var o;class a{constructor(e){this.api=e,this.isVisible=!1,this.modalClosed=new n.vpe,this.redeemCode="",this.loading=!1}closeModal(){this.isVisible=!1,this.redeemCode="",this.modalClosed.emit()}submit(){var e=this;return(0,p.Z)(function*(){try{e.loading=!0,(yield e.api.redeemCode({code:e.redeemCode})).done&&(e.loading=!1,e.closeModal()),e.loading=!1}catch{e.loading=!1}})()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-redeem-code-modal"]],inputs:{isVisible:"isVisible"},outputs:{modalClosed:"modalClosed"},decls:2,vars:4,consts:[["nzPlacement","right",3,"nzClosable","nzVisible","nzWidth","nzTitle","nzOnClose"],[4,"nzDrawerContent"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["nz-input","",1,"w-100",3,"placeholder","ngModel","ngModelChange"],["nz-button","","nzBlock","",3,"nzType","nzLoading","disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"nz-drawer",0),n.NdJ("nzOnClose",function(){return t.closeModal()}),n.YNc(1,ft,10,8,"div",1),n.qZA()),2&e&&n.Q6J("nzClosable",!0)("nzVisible",t.isVisible)("nzWidth",420)("nzTitle","Redeem Code")},dependencies:[C.t3,C.SK,h.Nx,h.iK,h.Fd,T.Zp,y.ix,S.w,I.dQ,D.Vz,D.SQ,l.Fj,l.JJ,l.On]}),a})();function Tt(o,a){if(1&o&&n._UZ(0,"nz-option",27),2&o){const i=a.$implicit,e=n.oxw(3);n.Q6J("nzLabel",i)("nzValue",i)("nzDisabled",!!e.plans.current_user_count&&i.toString()<e.plans.current_user_count)}}function bt(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"div",21)(1,"nz-form-item",22)(2,"nz-form-label",23),n._uU(3,"No of seats"),n.qZA(),n.TgZ(4,"nz-form-control")(5,"nz-select",24),n.NdJ("ngModelChange",function(t){n.CHM(i);const r=n.oxw(2);return n.KtG(r.selectedSeatCount=t)}),n.YNc(6,Tt,1,3,"nz-option",25),n._UZ(7,"nz-option",26),n.qZA()()()()}if(2&o){const i=n.oxw(2);n.xp6(5),n.Q6J("ngModel",i.selectedSeatCount),n.xp6(1),n.Q6J("ngForOf",i.seatCountOptions),n.xp6(1),n.Q6J("nzLabel","100+ seats")("nzValue","100+")}}function Ct(o,a){1&o&&(n.TgZ(0,"span",28)(1,"h5",3),n._uU(2,"Best for personal use"),n.qZA()())}function Zt(o,a){if(1&o&&(n.TgZ(0,"span",28)(1,"h5",3),n._uU(2),n._UZ(3,"span",29),n.qZA(),n.TgZ(4,"p",3),n._uU(5,"Billed annually"),n.qZA()()),2&o){const i=n.oxw(2);n.xp6(2),n.hij(" Total $",i.calculateAnnualTotal(i.plans.annual_price),"/ year "),n.xp6(1),n.Q6J("nzTooltipTitle","$"+i.plans.annual_price+" x 12 months x "+i.selectedSeatCount+" seats")}}function xt(o,a){if(1&o&&(n._uU(0),n.TgZ(1,"nz-tag",30),n._uU(2,"Most Popular"),n.qZA()),2&o){const i=n.oxw(2);n.hij(" ",i.plans.annual_plan_name," "),n.xp6(1),n.Q6J("nzColor","volcano")}}function vt(o,a){1&o&&n.GkF(0)}function yt(o,a){if(1&o&&(n.TgZ(0,"span",28)(1,"h5",3),n._uU(2),n.qZA(),n.TgZ(3,"p",3),n._uU(4,"Billed monthly"),n.qZA()()),2&o){const i=n.oxw(2);n.xp6(2),n.hij("Total $",i.calculateTotal(i.plans.monthly_price)," / month")}}function Pt(o,a){1&o&&n.GkF(0)}function At(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.switchToFreePlan())}),n._uU(1," Try for free "),n.qZA()}2&o&&n.Q6J("nzSize","large")}function Ut(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",32),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.continueWithPlan())}),n._uU(1),n.qZA()}if(2&o){const i=n.oxw(2);n.Q6J("nzLoading",i.upgradingPlan)("disabled",i.billingInfo.plan_id===i.plans.annual_plan_id)("nzSize","large"),n.xp6(1),n.hij(" ",i.billingInfo.plan_id===i.plans.monthly_plan_id?"Switch to":"Continue with"," Pro - Annual ")}}function St(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",32),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.continueWithPlan())}),n._uU(1),n.qZA()}if(2&o){const i=n.oxw(2);n.Q6J("nzLoading",i.upgradingPlan)("disabled",i.billingInfo.plan_id===i.plans.monthly_plan_id)("nzSize","large"),n.xp6(1),n.hij(" ",i.billingInfo.plan_id===i.plans.annual_plan_id?"Switch to":"Continue with"," Pro - Monthly ")}}function wt(o,a){1&o&&(n.TgZ(0,"button",33),n._uU(1," Contact sales "),n.qZA()),2&o&&n.Q6J("nzSize","large")}function Nt(o,a){1&o&&(n.TgZ(0,"div",11)(1,"div"),n._UZ(2,"span",12),n._uU(3,"\xa0 "),n.TgZ(4,"span",3),n._uU(5,"25GB storage"),n.qZA()(),n.TgZ(6,"div"),n._UZ(7,"span",12),n._uU(8,"\xa0 "),n.TgZ(9,"span",3),n._uU(10,"Unlimited active projects"),n.qZA()(),n.TgZ(11,"div"),n._UZ(12,"span",12),n._uU(13,"\xa0 "),n.TgZ(14,"span",3),n._uU(15,"Schedule"),n.qZA()(),n.TgZ(16,"div"),n._UZ(17,"span",12),n._uU(18,"\xa0 "),n.TgZ(19,"span",3),n._uU(20,"Reporting"),n.qZA()(),n.TgZ(21,"div"),n._UZ(22,"span",12),n._uU(23,"\xa0 "),n.TgZ(24,"span",3),n._uU(25,"Subscribe to projects"),n.qZA()()())}function Ot(o,a){if(1&o){const i=n.EpF();n.ynx(0),n.TgZ(1,"div",2)(2,"h2",3),n._uU(3),n.qZA(),n.YNc(4,bt,8,4,"div",4),n.TgZ(5,"div",5)(6,"div",6)(7,"nz-card",7),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.FREE)}),n.TgZ(8,"div",8)(9,"h1",3),n._uU(10,"$0.00 "),n.TgZ(11,"span",9),n._uU(12,"free forever"),n.qZA()(),n.YNc(13,Ct,3,0,"span",10),n.qZA(),n.TgZ(14,"div",11)(15,"div"),n._UZ(16,"span",12),n._uU(17,"\xa0 "),n.TgZ(18,"span",3),n._uU(19),n.qZA()(),n.TgZ(20,"div"),n._UZ(21,"span",12),n._uU(22,"\xa0 "),n.TgZ(23,"span",3),n._uU(24),n.qZA()(),n.TgZ(25,"div"),n._UZ(26,"span",12),n._uU(27,"\xa0 "),n.TgZ(28,"span",3),n._uU(29),n.qZA()()()()(),n.TgZ(30,"div",6)(31,"nz-card",13),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.ANNUAL)}),n.TgZ(32,"div",8)(33,"h1",3),n._uU(34),n.TgZ(35,"span",9),n._uU(36,"seat / month"),n.qZA()(),n.YNc(37,Zt,6,2,"span",10),n.qZA(),n.YNc(38,xt,3,2,"ng-template",null,14,n.W1O),n.YNc(40,vt,1,0,"ng-container",15),n.qZA()(),n.TgZ(41,"div",6)(42,"nz-card",13),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.selectedPlan=t.paddlePlans.MONTHLY)}),n.TgZ(43,"div",8)(44,"h1",3),n._uU(45),n.TgZ(46,"span",9),n._uU(47,"seat / month"),n.qZA()(),n.YNc(48,yt,5,1,"span",10),n.qZA(),n.YNc(49,Pt,1,0,"ng-container",15),n.qZA()()(),n.TgZ(50,"div",16),n.YNc(51,At,2,1,"button",17),n.YNc(52,Ut,2,4,"button",18),n.YNc(53,St,2,4,"button",18),n.YNc(54,wt,2,1,"button",19),n.qZA()(),n.YNc(55,Nt,26,0,"ng-template",null,20,n.W1O),n.BQk()}if(2&o){const i=n.MAs(39),e=n.MAs(56),t=n.oxw();n.xp6(3),n.Oqu(t.billingInfo.status===t.subscriptionStatus.TRIALING?"Select the best plan for your team":"Change your subscription plan"),n.xp6(1),n.Q6J("ngIf",t.billingInfo.status===t.subscriptionStatus.TRIALING),n.xp6(1),n.Q6J("nzGutter",8),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.FREE),n.xp6(6),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(6),n.hij("",t.plans.free_tier_storage," storage"),n.xp6(5),n.hij("",t.plans.projects_limit," projects"),n.xp6(5),n.hij("",t.plans.team_member_limit," team members"),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.ANNUAL),n.Q6J("nzTitle",i),n.xp6(3),n.hij("$",t.plans.annual_price," "),n.xp6(3),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(3),n.Q6J("ngTemplateOutlet",e),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(1),n.ekj("plan-selected",t.selectedPlan===t.paddlePlans.MONTHLY),n.Q6J("nzTitle",t.plans.monthly_plan_name),n.xp6(3),n.hij("$",t.plans.monthly_price," "),n.xp6(3),n.Q6J("ngIf","100+"!==t.selectedSeatCount.toString()),n.xp6(1),n.Q6J("ngTemplateOutlet",e),n.xp6(2),n.Q6J("ngIf",t.selectedPlan===t.paddlePlans.FREE&&"100+"!==t.selectedSeatCount.toString()),n.xp6(1),n.Q6J("ngIf",t.selectedPlan!==t.paddlePlans.FREE&&t.selectedPlan===t.paddlePlans.ANNUAL&&"100+"!==t.selectedSeatCount.toString()),n.xp6(1),n.Q6J("ngIf",t.selectedPlan!==t.paddlePlans.FREE&&t.selectedPlan===t.paddlePlans.MONTHLY&&"100+"!==t.selectedSeatCount.toString()),n.xp6(1),n.Q6J("ngIf","100+"===t.selectedSeatCount.toString())}}let It=(()=>{var o;class a{constructor(e,t,r){this.api=e,this.billingApi=t,this.auth=r,this.billingInfo={},this.isVisible=!1,this.actionDone=new n.vpe,this.planUpgraded=new n.vpe,this.modalClosed=new n.vpe,this.seatCountOptions=[],this.selectedSeatCount=5,this.selectedPlan=P.bk.ANNUAL,this.plans={},this.subscriptionStatus=P.in,this.paddlePlans=P.bk,this.upgradingPlan=!1,this.loadingPlans=!1,this.switchingToFree=!1}ngOnChanges(){this.seatCountOptions=this.populateSeatCount(this.billingInfo&&this.billingInfo.total_used),this.selectedSeatCount=this.seatCountOptions.length&&this.seatCountOptions[0]}closePricingModal(){this.isVisible=!1,this.modalClosed.emit()}calculateTotal(e){if(e)return(parseFloat(e)*this.selectedSeatCount).toFixed(2)}calculateAnnualTotal(e){if(e)return(12*parseFloat(e)*this.selectedSeatCount).toFixed(2)}getPlans(){var e=this;return(0,p.Z)(function*(){try{e.loadingPlans=!0;const t=yield e.api.getPlans();t.done&&(e.plans=t.body,e.loadingPlans=!1)}catch{e.loadingPlans=!1}})()}handlePaddleCallback(e){"Checkout.Loaded"===e.event&&(this.upgradingPlan=!1),"Checkout.Complete"===e.event&&(this.isVisible=!1,setTimeout(()=>{this.actionDone.emit()},5e3))}loadScript(e){const t=document.createElement("script");t.src="https://cdn.paddle.com/paddle/paddle.js",t.type="text/javascript",t.async=!0,document.getElementsByTagName("head")[0].appendChild(t),t.onload=()=>{e.sandbox&&Paddle.Environment.set("sandbox"),Paddle.Setup({vendor:parseInt(e.vendor_id),eventCallback:r=>{this.handlePaddleCallback(r)}}),Paddle.Checkout.open(e.params)}}upgradePlan(e=null){var t=this;return(0,p.Z)(function*(){if(e)try{if(t.upgradingPlan=!0,t.billingInfo.trial_in_progress&&t.billingInfo.status===t.subscriptionStatus.TRIALING){const r=yield t.billingApi.upgradeToPaidPlan(e,t.selectedSeatCount);r.done&&(t.upgradingPlan=!1,t.loadScript(r.body)),t.upgradingPlan=!1}t.billingInfo.status===t.subscriptionStatus.ACTIVE&&(yield t.api.changePlan(e)).done&&(t.isVisible=!1,t.planUpgraded.emit())}catch(r){(0,u.tu)(r)}})()}continueWithPlan(){if(this.selectedPlan||"100+"!==this.selectedSeatCount.toString())try{this.upgradingPlan=!0;let e=null;this.selectedPlan===this.paddlePlans.ANNUAL&&this.plans.annual_plan_id&&(e=this.plans.annual_plan_id),this.selectedPlan===this.paddlePlans.MONTHLY&&this.plans.monthly_plan_id&&(e=this.plans.monthly_plan_id),e&&this.upgradePlan(e)}catch(e){(0,u.tu)(e)}}modelOpened(){this.getPlans()}populateSeatCount(e){if(!e)return[];const c=e+1,d=5*Math.ceil(c/5),_=Array.from({length:Math.floor((90-d)/5)+1},(N,W)=>d+5*W);return e<5?[...Array(d-c).keys()].map(N=>c+N).concat(_):_}switchToFreePlan(){var e=this;return(0,p.Z)(function*(){try{const t=e.auth.getCurrentSession()?.team_id;if(!t)return;e.switchingToFree=!0,(yield e.api.switchToFreePlan(t)).done&&(e.planUpgraded.emit(),e.isVisible=!1,e.switchingToFree=!1)}catch(t){(0,u.tu)(t)}})()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(H.j),n.Y36(q.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-pricing-plans-modal-v2"]],inputs:{billingInfo:"billingInfo",isVisible:"isVisible"},outputs:{actionDone:"actionDone",planUpgraded:"planUpgraded",modalClosed:"modalClosed"},features:[n.TTD],decls:2,vars:3,consts:[[3,"nzVisible","nzWidth","nzFooter","nzVisibleChange","nzOnCancel","nzAfterOpen"],[4,"nzModalContent"],[1,"row","text-center","mt-4"],["nz-typography",""],["nz-row","","class","justify-content-center",4,"ngIf"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","Free Plan",1,"h-100","plan-card",3,"click"],[1,"pricing-plan"],[2,"font-size","0.4em","font-weight","normal"],["class","details",4,"ngIf"],[1,"plan-includes"],["nz-icon","","nzType","check-circle","nzTheme","fill",1,"include-check-circle"],[1,"h-100","plan-card",3,"nzTitle","click"],["annualTitle",""],[4,"ngTemplateOutlet"],[1,"w-100","text-end"],["nz-button","","nzType","primary","type","button","class","mt-3 mb-2",3,"nzSize","click",4,"ngIf"],["nz-button","","nzType","primary","type","button","class","mt-3 mb-2",3,"nzLoading","disabled","nzSize","click",4,"ngIf"],["nz-button","","nzType","primary","type","button","class","mt-3 mb-2",3,"nzSize",4,"ngIf"],["planIncludes",""],["nz-row","",1,"justify-content-center"],[1,"w-25"],["nzFor","seats"],["id","seats",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue","nzDisabled",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],[3,"nzLabel","nzValue","nzDisabled"],[1,"details"],["nz-icon","","nzType","info-circle","nzTheme","outline","nz-tooltip","",3,"nzTooltipTitle"],[3,"nzColor"],["nz-button","","nzType","primary","type","button",1,"mt-3","mb-2",3,"nzSize","click"],["nz-button","","nzType","primary","type","button",1,"mt-3","mb-2",3,"nzLoading","disabled","nzSize","click"],["nz-button","","nzType","primary","type","button",1,"mt-3","mb-2",3,"nzSize"]],template:function(e,t){1&e&&(n.TgZ(0,"nz-modal",0),n.NdJ("nzVisibleChange",function(c){return t.isVisible=c})("nzOnCancel",function(){return t.closePricingModal()})("nzAfterOpen",function(){return t.modelOpened()}),n.YNc(1,Ot,57,28,"ng-container",1),n.qZA()),2&e&&n.Q6J("nzVisible",t.isVisible)("nzWidth","60vw")("nzFooter",null)},dependencies:[z.sg,z.O5,z.tP,b.Ls,v.bd,A.ZU,C.t3,C.SK,h.Nx,h.iK,h.Fd,y.ix,S.w,I.dQ,w.SY,M.Ip,M.Vq,l.JJ,l.On,Q.du,Q.Hf,R.j],styles:[".offer-tag[_ngcontent-%COMP%]{position:absolute;right:5px;background:#ff494b;color:#fff;padding-left:4px;padding-right:4px;font-size:12px;border-radius:12px;font-weight:500;animation:shaking 1s infinite;-webkit-animation:shaking 1s infinite}.pricing-plan[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto auto;row-gap:10px;padding:20px 20px 0}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer;box-shadow:#959da533 0 8px 24px}.plan-includes[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto auto;row-gap:7px;padding:10px;justify-items:flex-start}.include-check-circle[_ngcontent-%COMP%]{color:#52c41a}.plan-selected[_ngcontent-%COMP%]{border:solid 2px #1890ff}"]}),a})();function Mt(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"div",18),n._uU(2),n.qZA(),n.BQk()),2&o){const i=n.oxw(3);n.xp6(1),n.Q6J("nzType","secondary"),n.xp6(1),n.hij(" Life time deal activated for ",i.billingInfo.ltd_users," team members ")}}function Jt(o,a){1&o&&(n.TgZ(0,"small"),n._uU(1,"(Per Month / Per User)"),n.qZA())}function Qt(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"span",19),n._uU(2),n.qZA(),n.YNc(3,Jt,2,0,"small",0),n.BQk()),2&o){const i=n.oxw(4);n.xp6(2),n.AsE(" ",i.billingInfo.default_currency," ","year"===i.billingInfo.billing_type?i.billingInfo.unit_price_per_month:i.billingInfo.unit_price," "),n.xp6(1),n.Q6J("ngIf",i.billingInfo.status!==i.subscriptionStatus.FREE)}}function qt(o,a){if(1&o&&(n.ynx(0),n.YNc(1,Qt,4,3,"ng-container",0),n.BQk()),2&o){const i=n.oxw(3);n.xp6(1),n.Q6J("ngIf",!i.billingInfo.trial_in_progress)}}function kt(o,a){if(1&o&&(n.TgZ(0,"span",20),n.ALo(1,"date"),n._uU(2),n.qZA()),2&o){const i=n.oxw(3);n.Q6J("nzTooltipTitle",n.xi3(1,2,i.billingInfo.trial_expire_date,"fullDate")),n.xp6(2),n.hij(" (",i.billingInfo.expire_date_string,") ")}}function Lt(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"span",24),n._UZ(2,"br"),n._uU(3),n._UZ(4,"br"),n._uU(5),n._UZ(6,"br"),n._uU(7),n.qZA(),n.BQk()),2&o){const i=n.oxw(4);n.xp6(1),n.Q6J("nzType","secondary"),n.xp6(2),n.hij(" - ",0===i.freePlanSettings.team_member_limit?"Unlimited":i.freePlanSettings.team_member_limit," team members "),n.xp6(2),n.hij(" - ",i.freePlanSettings.projects_limit," projects "),n.xp6(2),n.hij(" - ",i.freePlanSettings.free_tier_storage," MB storage ")}}function Dt(o,a){if(1&o&&(n.TgZ(0,"span",25),n._uU(1),n.ALo(2,"date"),n.qZA()),2&o){const i=n.oxw(4);n.xp6(1),n.hij(" (Valid until ",n.xi3(2,1,i.billingInfo.valid_till_date,"longDate"),".) ")}}function Ft(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"strong",21),n._UZ(2,"nz-badge",22),n.YNc(3,Lt,8,4,"ng-container",0),n.YNc(4,Dt,3,4,"span",23),n.qZA(),n.BQk()),2&o){const i=n.oxw(3);n.xp6(2),n.Q6J("nzStatus",i.getPlanStatusColor(i.billingInfo.status))("nzText",i.getPlanStatus(i.billingInfo.status)),n.xp6(1),n.Q6J("ngIf",i.billingInfo.status===i.subscriptionStatus.FREE),n.xp6(1),n.Q6J("ngIf",i.billingInfo.valid_till_date)}}function Yt(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"span",16)(2,"strong"),n._uU(3),n.qZA(),n.YNc(4,Mt,3,2,"ng-container",0),n.YNc(5,qt,2,1,"ng-container",0),n.YNc(6,kt,3,5,"span",17),n.qZA(),n.YNc(7,Ft,5,4,"ng-container",0),n.BQk()),2&o){const i=n.oxw(2);n.xp6(3),n.Oqu(i.billingInfo.status===i.subscriptionStatus.TRIALING?"Free trial":i.billingInfo.plan_name),n.xp6(1),n.Q6J("ngIf",i.billingInfo.is_ltd_user),n.xp6(1),n.Q6J("ngIf",!i.billingInfo.is_ltd_user&&!i.billingInfo.is_custom),n.xp6(1),n.Q6J("ngIf",i.billingInfo.trial_in_progress),n.xp6(1),n.Q6J("ngIf",!i.billingInfo.is_ltd_user&&!i.billingInfo.trial_in_progress)}}function jt(o,a){if(1&o&&(n.TgZ(0,"p",16)(1,"strong",21),n._UZ(2,"nz-badge",22),n.qZA(),n.TgZ(3,"span"),n._uU(4),n.ALo(5,"date"),n.qZA()()),2&o){const i=n.oxw(2);n.xp6(2),n.Q6J("nzStatus",i.getPlanStatusColor(i.billingInfo.status))("nzText",i.getPlanStatus(i.billingInfo.status)),n.xp6(2),n.hij("(Cancellation effective date: ",n.xi3(5,3,i.billingInfo.cancellation_effective_date,"mediumDate")," )")}}function Et(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(2);return n.KtG(t.showRedeem=!0)}),n._uU(1," Redeem Code "),n.qZA()}}function Vt(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"div",28),n._UZ(1,"nz-statistic",29),n.TgZ(2,"button",30),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(3);return n.KtG(t.addMoreSeats())}),n._UZ(3,"span",31),n._uU(4,"Add more seats "),n.qZA(),n._UZ(5,"nz-statistic",29),n.qZA()}if(2&o){const i=n.oxw(3);n.xp6(1),n.Q6J("nzValue",i.billingInfo.total_seats)("nzTitle","Total seats"),n.xp6(4),n.Q6J("nzValue",i.calculateRemaining())("nzTitle","Available seats")}}function Bt(o,a){if(1&o&&(n.TgZ(0,"div",8),n.YNc(1,Vt,6,4,"div",27),n.qZA()),2&o){const i=n.oxw(2);n.xp6(1),n.Q6J("ngIf",i.billingInfo.total_seats&&i.billingInfo.total_used)}}function Rt(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",36),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(4);return n.KtG(t.showPauseConfirm())}),n._uU(1," Pause Plan "),n.qZA()}if(2&o){const i=n.oxw(4);n.Q6J("nzLoading",i.pausingPlan)}}function Gt(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",37),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(4);return n.KtG(t.showResumeConfirm())}),n._uU(1," Resume Plan "),n.qZA()}if(2&o){const i=n.oxw(4);n.Q6J("nzLoading",i.cancellingPlan)}}function $t(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",38),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(4);return n.KtG(t.showPricingModal())}),n._uU(1," Upgrade Plan "),n.qZA()}}function Kt(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",39),n.NdJ("click",function(){n.CHM(i);const t=n.oxw(4);return n.KtG(t.isVisible=!0)}),n._uU(1," Change Plan "),n.qZA()}if(2&o){const i=n.oxw(4);n.Q6J("nzLoading",i.pausingPlan||i.cancellingPlan)}}function Ht(o,a){if(1&o&&(n.TgZ(0,"nz-space"),n.YNc(1,Rt,2,1,"button",32),n.YNc(2,Gt,2,1,"button",33),n.YNc(3,$t,2,0,"button",34),n.YNc(4,Kt,2,1,"button",35),n.qZA()),2&o){const i=n.oxw(3);n.xp6(1),n.Q6J("ngIf",i.showPausePlanButton),n.xp6(1),n.Q6J("ngIf",i.showResumePlanButton),n.xp6(1),n.Q6J("ngIf",i.billingInfo.trial_in_progress),n.xp6(1),n.Q6J("ngIf",i.showChangeButton)}}function Wt(o,a){if(1&o&&n.YNc(0,Ht,5,4,"nz-space",0),2&o){const i=n.oxw(2);n.Q6J("ngIf",!i.billingInfo.is_custom)}}const Xt=function(){return{rows:2}};function ne(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"nz-card",6)(2,"div",7)(3,"div",8)(4,"nz-skeleton",9)(5,"div",10),n.YNc(6,Yt,8,5,"ng-container",11),n.YNc(7,jt,6,6,"ng-template",null,12,n.W1O),n.YNc(9,Et,2,0,"button",13),n.qZA()()(),n.YNc(10,Bt,2,1,"div",14),n.qZA()(),n.YNc(11,Wt,1,1,"ng-template",null,15,n.W1O),n.BQk()),2&o){const i=n.MAs(8),e=n.MAs(12),t=n.oxw();n.xp6(1),n.Q6J("nzExtra",e),n.xp6(3),n.Q6J("nzActive",!0)("nzLoading",t.loadingInfo)("nzParagraph",n.DdM(8,Xt)),n.xp6(2),n.Q6J("ngIf",t.billingInfo.status!==t.subscriptionStatus.DELETED)("ngIfElse",i),n.xp6(3),n.Q6J("ngIf",t.shouldShowRedeemButton()),n.xp6(1),n.Q6J("ngIf",t.billingInfo.status===t.subscriptionStatus.ACTIVE)}}let te=(()=>{var o;class a{get showChangeButton(){return!!this.billingInfo.status&&[this.subscriptionStatus.ACTIVE,this.subscriptionStatus.PASTDUE].includes(this.billingInfo.status)}get showPausePlanButton(){return!!this.billingInfo.status&&[this.subscriptionStatus.ACTIVE,this.subscriptionStatus.PASTDUE].includes(this.billingInfo.status)}get showResumePlanButton(){return!!this.billingInfo.status&&[this.subscriptionStatus.PAUSED].includes(this.billingInfo.status)}constructor(e,t,r){this.api=e,this.billingApi=t,this.modal=r,this.billingInfo={},this.refreshData=new n.vpe,this.isVisible=!1,this.isLKRModalVisible=!1,this.showRedeem=!1,this.loadingInfo=!1,this.cancellingPlan=!1,this.pausingPlan=!1,this.subscriptionStatus=P.in,this.freePlanSettings={},this.savingCardData=!1,this.selectedSeatCount=15,this.showDirectPay=!1,this.directPayLoad={},this.showMoreSeatsModal=!1,this.moreSeatsData={},this.userTimeZone="Asia/Colombo"}ngOnInit(){this.getBillingAccountInfo(),this.userTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone}getBillingAccountInfo(){var e=this;return(0,p.Z)(function*(){try{e.loadingInfo=!0;const t=yield e.api.getBillingAccountInfo();if(t.done&&(e.loadingInfo=!1,e.billingInfo=t.body,e.billingInfo.total_seats&&e.billingInfo.total_used&&(e.moreSeatsData.current_seat_amount=e.billingInfo.total_seats-e.billingInfo.total_used),e.billingInfo.status===e.subscriptionStatus.FREE)){const r=yield e.api.getFreePlanLimits();r.done&&(e.freePlanSettings=r.body)}}catch(t){e.loadingInfo=!1,(0,u.tu)(t)}})()}getPlanStatus(e){return"deleted"===e?"Cancelled":e}getPlanStatusColor(e){switch(e){case"deleted":return"error";case"active":default:return"success";case"past_due":case"paused":return"warning"}}confirmPauseSubscription(){var e=this;return(0,p.Z)(function*(){try{e.pausingPlan=!0,(yield e.api.pauseSubscription()).done&&setTimeout(()=>{e.pausingPlan=!1,e.getBillingAccountInfo(),Z.s.track(x.If)},8e3),e.pausingPlan=!1}catch(t){e.pausingPlan=!1,(0,u.tu)(t)}})()}confirmResumeSubscription(){var e=this;return(0,p.Z)(function*(){try{e.cancellingPlan=!0,(yield e.api.resumeSubscription()).done&&setTimeout(()=>{e.cancellingPlan=!1,e.getBillingAccountInfo(),Z.s.track(x.xz)},8e3)}catch(t){e.cancellingPlan=!1,(0,u.tu)(t)}})()}showPauseConfirm(){this.modal.confirm({nzTitle:"<i>Are you sure you want to pause your current subscription?</i>",nzContent:"<b>You can easily restart the subscription at a later time if the need arises.</b>",nzOnOk:()=>this.confirmPauseSubscription()})}showResumeConfirm(){this.modal.confirm({nzTitle:"<i>Are you sure you want to resume your paused subscription?</i>",nzOnOk:()=>this.confirmResumeSubscription()})}paddleCallback(){this.getBillingAccountInfo(),this.refreshData.emit()}planUpgraded(){this.isVisible=!1,this.getBillingAccountInfo()}shouldShowRedeemButton(){return!!this.billingInfo?.trial_in_progress||!!this.billingInfo?.ltd_users&&this.billingInfo?.ltd_users<50}calculateRemaining(){return this.billingInfo.total_seats&&this.billingInfo.total_used?this.billingInfo.total_seats-this.billingInfo.total_used:0}showPricingModal(){this.billingInfo.is_lkr_billing||"Asia/Colombo"===this.userTimeZone?this.isLKRModalVisible=!0:this.isVisible=!0}getDirectPayObject(e){var t=this;return(0,p.Z)(function*(){try{return(yield t.billingApi.getDirectPayObject(e)).body}catch(r){return(0,u.tu)(r),null}})()}getCardList(){var e=this;return(0,p.Z)(function*(){try{return(yield e.billingApi.getCardList()).body}catch(t){return(0,u.tu)(t),null}})()}loadDirectPay(e){var t=this;return(0,p.Z)(function*(){t.isLKRModalVisible=!1,t.selectedSeatCount=e;const r=yield t.getDirectPayObject(e),c=document.createElement("script");c.src="https://cdn.directpay.lk/v3/directpayipg.min.js",c.type="text/javascript",c.async=!0,document.getElementsByTagName("head")[0].appendChild(c),c.onload=(0,p.Z)(function*(){new DirectPayIpg.Init({signature:r?.signature,dataString:r?.dataString,stage:r?.stage,container:"gatewayHost"}).doInAppCheckout().then(_=>{console.log("client-res",_),t.saveTransactionData(_)}).catch(_=>{console.log("client-error",_)})})})()}saveTransactionData(e){var t=this;return(0,p.Z)(function*(){try{t.savingCardData=!0,e.seatCount=t.selectedSeatCount,(yield t.billingApi.saveTransactionData(e)).done&&(t.savingCardData=!1),t.savingCardData=!1}catch(r){(0,u.tu)(r),t.savingCardData=!1}})()}addMoreSeats(){this.showMoreSeatsModal=!0}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(H.j),n.Y36(Q.Sf))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-current-plan-details"]],inputs:{billingInfo:"billingInfo"},outputs:{refreshData:"refreshData"},decls:7,vars:9,consts:[[4,"ngIf"],[3,"isVisible","billingInfo","actionDone","planUpgraded","modalClosed"],[3,"isVisible","modalClosed"],[3,"isVisible","billingInfo","actionDone","loadDirectPay","planUpgraded","modalClosed"],[3,"title","isVisible","subscriptionData","modalClosed"],["gatewayHost",""],["nzTitle","Current Plan Details",1,"h-100",3,"nzExtra"],[1,"row"],[1,"col-md-6"],[3,"nzActive","nzLoading","nzParagraph"],[1,"card-content"],[4,"ngIf","ngIfElse"],["deletedPlan",""],["nz-button","","nzType","link","class","mt-2 p-0",3,"click",4,"ngIf"],["class","col-md-6",4,"ngIf"],["extraTemplate",""],["nz-typography","",1,"b-65"],["class","text-small","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],["nz-typography","",3,"nzType"],["nz-typography",""],["nz-tooltip","",1,"text-small",3,"nzTooltipTitle"],[1,"text-capitalize"],[3,"nzStatus","nzText"],["class","text-small",4,"ngIf"],["nz-typography","",1,"fw-normal",3,"nzType"],[1,"text-small"],["nz-button","","nzType","link",1,"mt-2","p-0",3,"click"],["class","plan-data",4,"ngIf"],[1,"plan-data"],[3,"nzValue","nzTitle"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzDanger","","nzType","link","class","mt-2",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary","class","mt-2",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary","class","mt-2",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","mt-2 me-2",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzDanger","","nzType","link",1,"mt-2",3,"nzLoading","click"],["nz-button","","nzType","primary",1,"mt-2",3,"nzLoading","click"],["nz-button","","nzType","primary",1,"mt-2",3,"click"],["nz-button","","nzType","primary",1,"mt-2","me-2",3,"nzLoading","click"]],template:function(e,t){1&e&&(n.YNc(0,ne,13,9,"ng-container",0),n.TgZ(1,"worklenz-pricing-plans-modal-v2",1),n.NdJ("actionDone",function(){return t.paddleCallback()})("planUpgraded",function(){return t.planUpgraded()})("modalClosed",function(){return t.isVisible=!1}),n.qZA(),n.TgZ(2,"worklenz-redeem-code-modal",2),n.NdJ("modalClosed",function(){return t.showRedeem=!1,t.getBillingAccountInfo(),t.refreshData.emit()}),n.qZA(),n.TgZ(3,"worklenz-pricing-plans-lkr",3),n.NdJ("actionDone",function(){return t.paddleCallback()})("loadDirectPay",function(c){return t.loadDirectPay(c)})("planUpgraded",function(){return t.planUpgraded()})("modalClosed",function(){return t.isLKRModalVisible=!1}),n.qZA(),n.TgZ(4,"worklenz-add-more-seats",4),n.NdJ("modalClosed",function(){return t.showMoreSeatsModal=!1}),n.qZA(),n._UZ(5,"div",null,5)),2&e&&(n.Q6J("ngIf",t.billingInfo),n.xp6(1),n.Q6J("isVisible",t.isVisible)("billingInfo",t.billingInfo),n.xp6(1),n.Q6J("isVisible",t.showRedeem),n.xp6(1),n.Q6J("isVisible",t.isLKRModalVisible)("billingInfo",t.billingInfo),n.xp6(1),n.Q6J("title","Add more seats")("isVisible",t.showMoreSeatsModal)("subscriptionData",t.moreSeatsData))},dependencies:[z.O5,b.Ls,v.bd,A.ZU,U.NU,y.ix,S.w,I.dQ,O.ng,L.x7,w.SY,on.my,an,rn.x,ht,It,z.uU],styles:[".plan-data[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;justify-items:center;gap:7px}.total-seats[_ngcontent-%COMP%]{font-size:18px;font-weight:400}.available-seats[_ngcontent-%COMP%]{font-size:42px;font-weight:500}"]}),a})();const ee=["dataUsageChart"];function oe(o,a){1&o&&(n.TgZ(0,"div"),n._uU(1," Charges "),n._UZ(2,"span",22),n.qZA()),2&o&&(n.xp6(2),n.Q6J("nzTooltipTitle","Charges for the current billing cycle"))}function ie(o,a){if(1&o&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"date"),n.ALo(6,"date"),n.qZA(),n.TgZ(7,"td",23),n._uU(8),n.qZA(),n.TgZ(9,"td",24),n._uU(10),n.qZA(),n.TgZ(11,"td",24),n._uU(12),n.qZA(),n.TgZ(13,"td",24),n._uU(14),n.qZA()()),2&o){const i=a.$implicit;n.ekj("bg-red","past_due"===i.status),n.xp6(2),n.hij("",i.name," Plan Charge"),n.xp6(2),n.AsE("",n.xi3(5,11,i.start_date,"longDate")," - ",n.xi3(6,14,i.end_date,"longDate")," "),n.xp6(4),n.Oqu(i.status),n.xp6(2),n.AsE("",i.currency," ",i.unit_price,""),n.xp6(2),n.Oqu(i.quantity),n.xp6(2),n.AsE("",i.currency," ",i.amount,"")}}function ae(o,a){if(1&o&&(n.TgZ(0,"tr")(1,"td"),n._uU(2,"Additional Storage Purchase (25GB)"),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"date"),n.ALo(6,"date"),n.qZA(),n.TgZ(7,"td",23),n._uU(8),n.qZA(),n.TgZ(9,"td",24),n._uU(10,"-"),n.qZA(),n.TgZ(11,"td",24),n._uU(12,"-"),n.qZA(),n.TgZ(13,"td",24),n._uU(14),n.qZA()()),2&o){const i=n.oxw();n.xp6(4),n.AsE("",n.xi3(5,4,i.charges[0].start_date,"longDate")," - ",n.xi3(6,7,i.charges[0].end_date,"longDate")," "),n.xp6(4),n.Oqu(i.charges[0].status),n.xp6(6),n.hij("",i.charges[0].currency," 4.00")}}function re(o,a){if(1&o&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"date"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"date"),n.ALo(9,"date"),n.qZA(),n.TgZ(10,"td",23),n._uU(11),n.qZA(),n.TgZ(12,"td",23),n._UZ(13,"nz-badge",25),n.qZA(),n.TgZ(14,"td")(15,"a",26),n._UZ(16,"span",27),n.qZA()()()),2&o){const i=a.$implicit;n.xp6(2),n.Oqu(i.subscription_payment_id),n.xp6(2),n.Oqu(n.xi3(5,11,i.event_time,"longDate")),n.xp6(3),n.AsE("",n.xi3(8,14,i.event_time,"longDate")," - ",n.xi3(9,17,i.next_bill_date,"longDate"),""),n.xp6(4),n.Oqu(i.payment_method),n.xp6(2),n.Q6J("nzStatus",i.payment_status||"")("nzText",i.payment_status||""),n.xp6(2),n.Q6J("nzType","default")("nzSize","small")("href",i.receipt_url,n.LSH)("nzTooltipTitle","View Receipt")}}const se=function(){return[20,0]},le=function(){return{rows:2}};let ce=(()=>{var o;class a{get total(){return 0}constructor(e,t){this.api=e,this.auth=t,this.loadingStorage=!1,this.loadingTransactions=!1,this.loadingCharges=!1,this.options={},this.storage={},this.transactions=[],this.charges=[],this.modifiers=[],this.subscriptionType="TRIAL",this.subscriptionStatus=P.in,this.formatOne=r=>`${r}% Used`,this.subscriptionType=this.auth.getCurrentSession()?.subscription_status||"TRIAL"}ngOnInit(){this.getTransactions(),this.getCharges(),this.getBillingAccountStorage(),Z.s.track(x.SU)}getTransactions(){var e=this;return(0,p.Z)(function*(){try{e.loadingTransactions=!0;const t=yield e.api.getTransactions();t.done&&(e.transactions=t.body,e.loadingTransactions=!1)}catch{e.loadingTransactions=!1}})()}getCharges(){var e=this;return(0,p.Z)(function*(){try{e.loadingCharges=!0;const t=yield e.api.getCharges();t.done&&(e.charges=t.body.plan_charges??[],e.modifiers=t.body.modifiers??[],e.loadingCharges=!1)}catch{e.loadingCharges=!1}})()}formatBytes(e=0,t=2){if(!+e)return"0 MB";const c=t<0?0:t,_=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,_)).toFixed(c))} ${this.subscriptionType!==this.subscriptionStatus.FREE?["Bytes","KB","MB","GB","TB"][_]:" MB"}`}getBillingAccountStorage(){var e=this;return(0,p.Z)(function*(){try{e.loadingStorage=!0;const t=yield e.api.getBillingAccountStorage();t.done&&(e.loadingStorage=!1,e.storage=t.body)}catch(t){e.loadingStorage=!1,(0,u.tu)(t)}})()}refreshData(){this.getCharges(),this.getTransactions(),this.getBillingAccountStorage()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(q.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-current-bill"]],viewQuery:function(e,t){if(1&e&&n.Gf(ee,5),2&e){let r;n.iGM(r=n.CRH())&&(t.dataUsageChart=r.first)}},decls:61,vars:23,consts:[["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","16"],[3,"refreshData"],["nz-col","","nzSpan","8"],[1,"h-100",3,"nzTitle"],[3,"nzActive","nzLoading","nzParagraph"],[1,"card-content"],[1,"row"],[1,"col-md-4"],["nzType","circle",1,"storage-text",3,"nzPercent","nzWidth","nzFormat"],[1,"col-md-8"],[1,"mt-4",3,"nzTitle"],["chargesTitleTemplate",""],[3,"nzNoResult","nzData","nzShowPagination"],["chargesTable",""],["scope","col"],[3,"bg-red",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"mt-4"],[3,"nzTitle"],[3,"nzNoResult","nzData","nzLoading","nzShowPagination","nzPaginationType"],["transactionsTable",""],["nz-icon","","nzType","info-circle","nzTheme","twotone","nz-tooltip","",3,"nzTooltipTitle"],[1,"text-capitalize"],[1,"text-end"],[3,"nzStatus","nzText"],["nz-button","","target","_blank","nz-tooltip","",3,"nzType","nzSize","href","nzTooltipTitle"],["nz-icon","","nzType","container"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"worklenz-current-plan-details",2),n.NdJ("refreshData",function(){return t.refreshData()}),n.qZA()(),n.TgZ(3,"div",3)(4,"nz-card",4)(5,"nz-skeleton",5)(6,"div",6)(7,"div",7)(8,"div",8),n._UZ(9,"nz-progress",9),n.qZA(),n.TgZ(10,"div",10),n._uU(11," Used: "),n.TgZ(12,"strong"),n._uU(13),n.qZA(),n._UZ(14,"br"),n._uU(15," Remaining: "),n.TgZ(16,"strong"),n._uU(17),n.qZA()()()()()()()(),n.TgZ(18,"nz-card",11),n.YNc(19,oe,3,1,"ng-template",null,12,n.W1O),n.TgZ(21,"div",6)(22,"nz-table",13,14)(24,"thead")(25,"tr")(26,"th",15),n._uU(27,"Description"),n.qZA(),n.TgZ(28,"th",15),n._uU(29,"Billing Period"),n.qZA(),n.TgZ(30,"th",15),n._uU(31,"Bill Status"),n.qZA(),n.TgZ(32,"th",15),n._uU(33,"Per User Value"),n.qZA(),n.TgZ(34,"th",15),n._uU(35,"Users"),n.qZA(),n.TgZ(36,"th",15),n._uU(37,"Amount"),n.qZA()()(),n.TgZ(38,"tbody"),n.YNc(39,ie,15,17,"tr",16),n.YNc(40,ae,15,10,"tr",17),n.qZA()()()(),n._UZ(41,"div",18),n.TgZ(42,"nz-card",19)(43,"div",6)(44,"nz-table",20,21)(46,"thead")(47,"tr")(48,"th",15),n._uU(49,"Transaction ID"),n.qZA(),n.TgZ(50,"th",15),n._uU(51,"Transaction Date"),n.qZA(),n.TgZ(52,"th",15),n._uU(53,"Billing Period"),n.qZA(),n.TgZ(54,"th",15),n._uU(55,"Payment Method"),n.qZA(),n.TgZ(56,"th",15),n._uU(57,"Status"),n.qZA(),n._UZ(58,"th",15),n.qZA()(),n.TgZ(59,"tbody"),n.YNc(60,re,17,20,"tr",17),n.qZA()()()()),2&e){const r=n.MAs(20),c=n.MAs(23),d=n.MAs(45);n.Q6J("nzGutter",n.DdM(21,se)),n.xp6(4),n.Q6J("nzTitle","Account Storage"),n.xp6(1),n.Q6J("nzActive",!0)("nzLoading",t.loadingStorage)("nzParagraph",n.DdM(22,le)),n.xp6(4),n.Q6J("nzPercent",t.storage.used_percent)("nzWidth",80)("nzFormat",t.formatOne),n.xp6(4),n.Oqu(t.formatBytes(t.storage.used,1)),n.xp6(4),n.Oqu(t.formatBytes(t.storage.remaining,1)),n.xp6(1),n.Q6J("nzTitle",r),n.xp6(4),n.Q6J("nzData",t.charges)("nzShowPagination",!1),n.xp6(17),n.Q6J("ngForOf",c.data),n.xp6(1),n.Q6J("ngForOf",t.modifiers),n.xp6(2),n.Q6J("nzTitle","Invoices"),n.xp6(2),n.Q6J("nzData",t.transactions)("nzLoading",t.loadingTransactions)("nzShowPagination",!1)("nzPaginationType","small"),n.xp6(16),n.Q6J("ngForOf",d.data)}},dependencies:[z.sg,b.Ls,v.bd,g.N8,g.Uo,g._C,g.Om,g.p0,g.$Z,C.t3,C.SK,y.ix,S.w,O.ng,L.x7,w.SY,en.M,te,z.uU],styles:[".card-content[_ngcontent-%COMP%]{padding-top:8px}h4[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{margin-bottom:8px}.b-65[_ngcontent-%COMP%]{color:#000000a6}.left-td[_ngcontent-%COMP%]{width:250px}.text-small[_ngcontent-%COMP%]{font-size:12px}.bg-red[_ngcontent-%COMP%]{background-color:hwb(0 29% 0%/.05)}.text-red[_ngcontent-%COMP%]{color:#ff4949}.text-16[_ngcontent-%COMP%]{font-size:16px}body[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,var(--bs-body-secondary-bg),var(--bs-body-bg) 100px,var(--bs-body-bg))}.container[_ngcontent-%COMP%]{max-width:960px}nz-progress[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:8px;display:inline-block}"]}),a})();var sn=s(66987);function pe(o,a){1&o&&(n.TgZ(0,"span",24)(1,"strong"),n._uU(2,"Company Details"),n.qZA()())}function ue(o,a){if(1&o&&n._UZ(0,"nz-option",25),2&o){const i=a.$implicit;n.Q6J("nzLabel",i.name+" - ("+i.code+")")("nzValue",i.id)}}let _e=(()=>{var o;class a{constructor(e,t){this.fb=e,this.api=t,this.loading=!1,this.loadingCountries=!1,this.updating=!1,this.countries=[],this.validateForm=this.fb.group({name:[null,[l.kI.required]],company_name:[null],email:[null],phone:[null,l.kI.pattern("^[0-9]*$")],address_line_1:[null],address_line_2:[null],country:[null],city:[null],state:[null],postal_code:[null]}),this.validateForm.controls.email.disable()}ngOnInit(){this.getBillingConfiguration(),this.getCountries()}getBillingConfiguration(){var e=this;return(0,p.Z)(function*(){try{e.loading=!0;const t=yield e.api.getBillingConfiguration();t.done&&(e.loading=!1,e.validateForm.setValue(t.body))}catch(t){e.loading=!1,(0,u.tu)(t)}})()}getCountries(){var e=this;return(0,p.Z)(function*(){try{e.loadingCountries=!0;const t=yield e.api.getCountries();t.done&&(e.loadingCountries=!1,e.countries=t.body)}catch(t){e.loadingCountries=!1,(0,u.tu)(t)}})()}updateForm(){var e=this;return(0,p.Z)(function*(){try{e.updating=!0,(yield e.api.updateBillingConfiguration(e.validateForm.value)).done&&(e.updating=!1,e.getBillingConfiguration())}catch(t){e.updating=!1,(0,u.tu)(t)}})()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(l.qu),n.Y36(f))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-configuration"]],decls:72,vars:20,consts:[[3,"nzTitle","nzLoading"],["nz-form","",3,"nzLayout","formGroup","ngSubmit"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzRequired","","nzFor","name"],["nzErrorTip","Name is required!"],["formControlName","name","nz-input","","placeholder","Name"],["nzRequired","","nzFor","email"],["readonly","","formControlName","email","nz-input","","type","email","placeholder","Email address"],["nzFor","phone"],["nzErrorTip","Only numbers are allowed!"],["formControlName","phone","nz-input","","type","number","placeholder","Phone number"],["nzOrientation","left",3,"nzText"],["companyDetails",""],["nzFor","company_name"],["formControlName","company_name","nz-input","","type","text","placeholder","Company name"],["formControlName","address_line_1","nz-input","","type","text","placeholder","Address Line 01"],["formControlName","address_line_2","nz-input","","type","text","placeholder","Address Line 02"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Country","formControlName","country"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["formControlName","city","nz-input","","type","text","placeholder","City"],["formControlName","state","nz-input","","type","text","placeholder","State"],["formControlName","postal_code","nz-input","","type","text","placeholder","Postal code"],["nz-button","","nzType","primary",3,"disabled","nzLoading"],["nz-typography",""],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(n.TgZ(0,"nz-card",0)(1,"form",1),n.NdJ("ngSubmit",function(){return t.updateForm()}),n.TgZ(2,"div",2)(3,"div",3)(4,"nz-form-item")(5,"nz-form-label",4),n._uU(6,"Name"),n.qZA(),n.TgZ(7,"nz-form-control",5),n._UZ(8,"input",6),n.qZA()()(),n.TgZ(9,"div",3)(10,"nz-form-item")(11,"nz-form-label",7),n._uU(12,"Email Address"),n.qZA(),n.TgZ(13,"nz-form-control"),n._UZ(14,"input",8),n.qZA()()(),n.TgZ(15,"div",3)(16,"nz-form-item")(17,"nz-form-label",9),n._uU(18,"Contact Number"),n.qZA(),n.TgZ(19,"nz-form-control",10),n._UZ(20,"input",11),n.qZA()()()(),n._UZ(21,"nz-divider",12),n.YNc(22,pe,3,0,"ng-template",null,13,n.W1O),n.TgZ(24,"div",2)(25,"div",3)(26,"nz-form-item")(27,"nz-form-label",14),n._uU(28,"Company Name(Optional)"),n.qZA(),n.TgZ(29,"nz-form-control"),n._UZ(30,"input",15),n.qZA()()(),n.TgZ(31,"div",3)(32,"nz-form-item")(33,"nz-form-label",9),n._uU(34,"Address Line 01"),n.qZA(),n.TgZ(35,"nz-form-control"),n._UZ(36,"input",16),n.qZA()()(),n.TgZ(37,"div",3)(38,"nz-form-item")(39,"nz-form-label",9),n._uU(40,"Address Line 02"),n.qZA(),n.TgZ(41,"nz-form-control"),n._UZ(42,"input",17),n.qZA()()(),n.TgZ(43,"div",3)(44,"nz-form-item")(45,"nz-form-label",9),n._uU(46,"Country"),n.qZA(),n.TgZ(47,"nz-form-control")(48,"nz-select",18),n.YNc(49,ue,1,2,"nz-option",19),n.qZA()()()(),n.TgZ(50,"div",3)(51,"nz-form-item")(52,"nz-form-label",9),n._uU(53,"City"),n.qZA(),n.TgZ(54,"nz-form-control"),n._UZ(55,"input",20),n.qZA()()(),n.TgZ(56,"div",3)(57,"nz-form-item")(58,"nz-form-label",9),n._uU(59,"State"),n.qZA(),n.TgZ(60,"nz-form-control"),n._UZ(61,"input",21),n.qZA()()(),n.TgZ(62,"div",3)(63,"nz-form-item")(64,"nz-form-label",9),n._uU(65,"Postal Code"),n.qZA(),n.TgZ(66,"nz-form-control"),n._UZ(67,"input",22),n.qZA()()()(),n.TgZ(68,"nz-form-item")(69,"nz-form-control")(70,"button",23),n._uU(71,"Save"),n.qZA()()()()()),2&e){const r=n.MAs(23);n.Q6J("nzTitle","Billing Details")("nzLoading",t.loading||t.updating),n.xp6(1),n.Q6J("nzLayout","vertical")("formGroup",t.validateForm),n.xp6(1),n.Q6J("nzGutter",24),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzText",r),n.xp6(3),n.Q6J("nzGutter",24),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("ngForOf",t.countries),n.xp6(1),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(6),n.Q6J("nzSpan",8),n.xp6(8),n.Q6J("disabled",!t.validateForm.valid)("nzLoading",t.updating)}},dependencies:[z.sg,v.bd,A.ZU,C.t3,C.SK,h.Lr,h.Nx,h.iK,h.Fd,T.Zp,y.ix,S.w,I.dQ,M.Ip,M.Vq,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,sn.g],styles:[".ant-progress-text[_ngcontent-%COMP%]{font-size:15px!important}"]}),a})();function ge(o,a){1&o&&n._UZ(0,"worklenz-current-bill")}function de(o,a){1&o&&n._UZ(0,"worklenz-configuration")}let me=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-billing-layout"]],decls:8,vars:1,consts:[[1,"px-0",3,"nzGhost"],["nzTitle","Current Bill"],["nz-tab",""],["nzTitle","Configuration"]],template:function(e,t){1&e&&(n.TgZ(0,"nz-page-header",0)(1,"nz-page-header-title"),n._uU(2,"Billing"),n.qZA()(),n.TgZ(3,"nz-tabset")(4,"nz-tab",1),n.YNc(5,ge,1,0,"ng-template",2),n.qZA(),n.TgZ(6,"nz-tab",3),n.YNc(7,de,1,0,"ng-template",2),n.qZA()()),2&e&&n.Q6J("nzGhost",!1)},dependencies:[m.$O,m.u9,B.xH,B.xw,B.cj,ce,_e]}),a})();var ze=s(31215);function fe(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(){n.CHM(i);const t=n.oxw();return n.KtG(t.getProjects())}),n._UZ(1,"span",12),n.qZA()}}function he(o,a){1&o&&n._UZ(0,"span",17)}function Te(o,a){if(1&o&&(n.TgZ(0,"form",13)(1,"nz-input-group",14),n._UZ(2,"input",15),n.qZA(),n.YNc(3,he,1,0,"ng-template",null,16,n.W1O),n.qZA()),2&o){const i=n.MAs(4),e=n.oxw();n.Q6J("nzLayout","vertical")("formGroup",e.searchForm),n.xp6(1),n.Q6J("nzSuffix",i),n.xp6(1),n.Q6J("formControlName","search")}}function be(o,a){if(1&o){const i=n.EpF();n.TgZ(0,"button",24),n.NdJ("nzOnConfirm",function(){n.CHM(i);const t=n.oxw().$implicit,r=n.oxw();return n.KtG(r.deleteProject(t.id))}),n._UZ(1,"span",25),n.qZA()}2&o&&n.Q6J("nzOkText","Yes")("nzPopconfirmTitle","Are you sure?")("nzSize","small")("nzTooltipPlacement","top")("nzTooltipTitle","Delete")("nzType","default")}function Ce(o,a){if(1&o&&(n.TgZ(0,"tr",18)(1,"td",19),n._uU(2),n.qZA(),n.TgZ(3,"td",19),n._uU(4),n.qZA(),n.TgZ(5,"td",20),n._uU(6),n.qZA(),n.TgZ(7,"td",21),n._uU(8),n.ALo(9,"date"),n.qZA(),n.TgZ(10,"td",19)(11,"div",22)(12,"nz-space"),n.YNc(13,be,2,6,"button",23),n.qZA()()()()),2&o){const i=a.$implicit;n.xp6(2),n.hij(" ",i.name," "),n.xp6(2),n.hij(" ",i.team_name," "),n.xp6(2),n.hij(" ",i.member_count||0," "),n.xp6(2),n.hij(" ",n.xi3(9,4,i.created_at,"medium")," ")}}function Ze(o,a){1&o&&(n.TgZ(0,"div",26)(1,"div",27),n._UZ(2,"img",28),n.qZA(),n.TgZ(3,"span",29),n._uU(4,"No teams found in the organization."),n.qZA()())}const xe=function(){return[]},ve=[{path:"",component:ot,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:yn},{path:"users",component:On},{path:"teams",component:tt},{path:"billing",component:me},{path:"projects",component:(()=>{var o;class a{constructor(e,t,r,c,d){this.api=e,this.fb=t,this.app=r,this.projectsService=c,this.auth=d,this.loading=!1,this.projects=[],this.total=0,this.pageSize=k.L8,this.pageIndex=1,this.paginationSizes=[5,10,15,20,50,100],this.sortField=null,this.sortOrder=null,this.app.setTitle("Admin Center - Projects"),this.searchForm=this.fb.group({search:[]}),this.searchForm.valueChanges.subscribe(()=>this.getProjects()),Z.s.track(x.Bk)}getProjects(){var e=this;return(0,p.Z)(function*(){try{e.loading=!0;const t=yield e.api.getOrganizationProjects(e.pageIndex,e.pageSize,e.sortField,e.sortOrder,e.searchForm.value.search);t.done&&(e.total=t.body.total||0,e.projects=t.body.data?.filter(r=>r.id!==e.auth.getCurrentSession()?.team_id)||[],e.loading=!1)}catch(t){e.loading=!1,(0,u.tu)(t)}})()}onQueryParamsChange(e){var t=this;return(0,p.Z)(function*(){const{pageSize:r,pageIndex:c,sort:d}=e;t.pageIndex=c,t.pageSize=r;const _=d.find(N=>null!==N.value);t.sortField=_&&_.key||null,t.sortOrder=_&&_.value||null,yield t.getProjects()})()}deleteProject(e){var t=this;return(0,p.Z)(function*(){e&&(yield t.projectsService.delete(e),t.getProjects())})()}}return(o=a).\u0275fac=function(e){return new(e||o)(n.Y36(f),n.Y36(l.qu),n.Y36(nn.z),n.Y36(ze.U),n.Y36(q.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["worklenz-projects"]],standalone:!0,features:[n.jDz],decls:29,vars:13,consts:[[1,"px-0",3,"nzGhost"],[1,"site-page-header","pt-0","ps-0"],["nz-button","","nz-tooltip","","nzShape","circle","nzTooltipTitle","Refresh projects","nzType","default",3,"click",4,"nzSpaceItem"],["nz-form","",3,"nzLayout","formGroup",4,"nzSpaceItem"],[3,"nzActive","nzLoading"],["nzShowSizeChanger","","nzSize","small",1,"custom-table",3,"nzData","nzLoading","nzPageIndex","nzPageSizeOptions","nzFrontPagination","nzPageSize","nzTotal","nzQueryParams"],["projectsTable",""],["scope","col"],["scope","col",1,"text-center"],["class","actions-row",4,"ngFor","ngForOf"],["noDataTemplate",""],["nz-button","","nz-tooltip","","nzShape","circle","nzTooltipTitle","Refresh projects","nzType","default",3,"click"],["nz-icon","","nzTheme","outline","nzType","sync"],["nz-form","",3,"nzLayout","formGroup"],[3,"nzSuffix"],["nz-input","","placeholder","Search by project name","type","text",3,"formControlName"],["suffixIconSearch",""],["nz-icon","","nzType","search"],[1,"actions-row"],[1,"cursor-pointer"],[1,"text-center"],[1,"text-end"],[1,"actions","text-center"],["nz-button","","nz-popconfirm","","nz-tooltip","",3,"nzOkText","nzPopconfirmTitle","nzSize","nzTooltipPlacement","nzTooltipTitle","nzType","nzOnConfirm",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nz-tooltip","",3,"nzOkText","nzPopconfirmTitle","nzSize","nzTooltipPlacement","nzTooltipTitle","nzType","nzOnConfirm"],["nz-icon","","nzType","delete"],[1,"pt-4","pb-5"],[1,"no-data-img-holder","mx-auto","mb-3"],["src","/assets/images/empty-box.webp","alt","",1,"img-fluid"],["nz-typography","",1,"no-data-text"]],template:function(e,t){if(1&e&&(n.TgZ(0,"nz-page-header",0)(1,"nz-page-header-title"),n._uU(2,"Projects"),n.qZA()(),n.TgZ(3,"nz-page-header",1)(4,"nz-page-header-subtitle"),n._uU(5),n.qZA(),n.TgZ(6,"nz-page-header-extra")(7,"nz-space"),n.YNc(8,fe,2,0,"button",2),n.YNc(9,Te,5,4,"form",3),n.qZA()()(),n.TgZ(10,"nz-card")(11,"nz-skeleton",4)(12,"nz-table",5,6),n.NdJ("nzQueryParams",function(c){return t.onQueryParamsChange(c)}),n.TgZ(14,"thead")(15,"tr")(16,"th",7),n._uU(17,"Project name"),n.qZA(),n.TgZ(18,"th",7),n._uU(19,"Team"),n.qZA(),n.TgZ(20,"th",8),n._uU(21,"Members count"),n.qZA(),n.TgZ(22,"th",8),n._uU(23,"Created at"),n.qZA(),n._UZ(24,"th",8),n.qZA()(),n.TgZ(25,"tbody"),n.YNc(26,Ce,14,7,"tr",9),n.qZA()()()(),n.YNc(27,Ze,5,0,"ng-template",null,10,n.W1O)),2&e){const r=n.MAs(13);n.Q6J("nzGhost",!1),n.xp6(5),n.hij("",t.total?t.total:0," projects"),n.xp6(6),n.Q6J("nzActive",!1)("nzLoading",!1),n.xp6(1),n.Q6J("nzData",t.projects||n.DdM(12,xe))("nzLoading",t.loading)("nzPageIndex",t.pageIndex)("nzPageSizeOptions",t.paginationSizes)("nzFrontPagination",!1)("nzPageSize",t.pageSize)("nzTotal",t.total),n.xp6(14),n.Q6J("ngForOf",r.data)}},dependencies:[z.ez,z.sg,z.uU,m.KJ,m.$O,m.u9,m.yG,m.Jp,U.zf,U.NU,U.$1,y.sL,y.ix,S.w,I.dQ,w.cg,w.SY,b.PV,b.Ls,h.U5,h.Lr,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.o7,T.Zp,T.gB,T.ke,v.vh,v.bd,O.H0,O.ng,g.HQ,g.N8,g.Uo,g._C,g.Om,g.p0,g.$Z,E._p,E.JW,A.ZJ,A.ZU]}),a})()}]}];let ye=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[J.Bz.forChild(ve),J.Bz]}),a})();var Pe=s(62787),Ae=s(57907),Ue=s(22114),Se=s(62612),we=s(95717);let Ne=(()=>{var o;class a{}return(o=a).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[z.ez,ye,V.wm,m.KJ,K.ip,b.PV,v.vh,A.ZJ,g.HQ,U.zf,h.U5,T.o7,y.sL,O.H0,L.mS,$.Rt,w.cg,Pe.b1,Ae.aF,D.BL,M.LV,l.UX,tn.o,l.u5,B.we,Q.Qp,en.W,sn.S,Ue.KW,E._p,Se.Wr,we.ic,R.X,on.A2,an,rn.x]}),a})()},93302:(ln,Y,s)=>{s.d(Y,{r:()=>x});var z=s(26857),J=s(10708),p=s(69649),u=s(65879),Z=s(69862);let x=(()=>{var n;class j extends z.P{constructor(f){super(),this.http=f,this.root=`${this.API_BASE_URL}/project-members`}create(f){const m=(0,p.UK)({current_project_id:f.project_id});return this._post(this.http,`${this.root}${m}`,f)}createByEmail(f){return this._post(this.http,`${this.root}/invite`,f)}getByProjectId(f){return this._get(this.http,`${this.root}/${f}`)}deleteById(f,m){const b=(0,p.UK)({current_project_id:m});return(0,J.n)(this.http.delete(`${this.root}/${f}${b}`))}}return(n=j).\u0275fac=function(f){return new(f||n)(u.LFG(Z.eN))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),j})()}}]);