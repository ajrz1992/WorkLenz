"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[570],{99865:(N,Z,o)=>{o.d(Z,{n:()=>L});var p=o(15861),e=o(65879),r=o(96814),T=o(42840),A=o(3599),h=o(10095),v=o(62595),j=o(9691),z=o(41958),M=o(76271),C=o(60095),b=o(69649),O=o(20824),D=o(53980),E=o(45019),Q=o(70855);const w=["nameInput"];function J(x,F){if(1&x){const f=e.EpF();e.ynx(0),e.TgZ(1,"input",3,4),e.NdJ("ngModelChange",function(m){e.CHM(f);const u=e.oxw();return e.KtG(u.newCategoryName=m)})("blur",function(){e.CHM(f);const m=e.oxw();return e.KtG(m.resetInputMode())})("keyup.enter",function(m){e.CHM(f);const u=e.oxw();return m.stopPropagation(),e.KtG(u.create())}),e.qZA(),e.BQk()}if(2&x){const f=e.oxw();e.xp6(1),e.Q6J("ngModel",f.newCategoryName)("disabled",f.creating)}}function U(x,F){if(1&x&&(e.TgZ(0,"nz-option",10),e.ALo(1,"safeString"),e._uU(2),e.qZA()),2&x){const f=F.$implicit;e.Q6J("nzLabel",e.lcZ(1,3,f.name))("nzValue",f.id),e.xp6(2),e.hij(" ",f.name," ")}}function k(x,F){if(1&x){const f=e.EpF();e.ynx(0),e.TgZ(1,"nz-select",5),e.NdJ("ngModelChange",function(m){e.CHM(f);const u=e.oxw();return e.KtG(u.categoryId=m)})("ngModelChange",function(m){e.CHM(f);const u=e.oxw();return e.KtG(u.onCategoryChange(m))}),e.YNc(2,U,3,5,"nz-option",6),e.TgZ(3,"nz-option",7)(4,"button",8),e.NdJ("click",function(){e.CHM(f);const m=e.oxw();return e.KtG(m.newCategory())}),e._UZ(5,"span",9),e._uU(6," New Category "),e.qZA()()(),e.BQk()}if(2&x){const f=e.oxw();e.xp6(1),e.Q6J("ngModel",f.categoryId)("nzLoading",f.loading)("nzPlaceHolder","Add a category to the project")("nzDisabled",f.disabled)("nzAllowClear",!0),e.xp6(1),e.Q6J("ngForOf",f.categories),e.xp6(1),e.Q6J("nzValue","add"),e.xp6(1),e.Q6J("nzType","dashed")("nzSize","small"),e.xp6(1),e.Q6J("nzType","plus")("nzTheme","outline")}}let L=(()=>{var x;class F{constructor(l,m,u,c){this.cdr=l,this.api=m,this.ngZone=u,this.projectFormService=c,this.categoryId=null,this.categoryIdChange=new e.vpe,this.disabled=!1,this.loading=!1,this.creating=!1,this.showCategoryInput=!1,this.categories=[],this.newCategoryName=null}ngOnInit(){this.get()}get(){var l=this;return(0,p.Z)(function*(){try{l.loading=!0;const m=yield l.api.get();m.done&&(l.categories=m.body),l.loading=!1}catch(m){l.loading=!1,(0,b.tu)(m)}l.cdr.markForCheck()})()}newCategory(){this.showCategoryInput||(this.newCategoryName=null,this.showCategoryInput=!0,this.focusInput(),this.cdr.markForCheck())}onCategoryChange(l){this.categoryId=l,this.categoryIdChange.emit(this.categoryId)}resetInputMode(){this.showCategoryInput=!1,this.newCategoryName=null}create(){var l=this;return(0,p.Z)(function*(){if(l.newCategoryName?.trim()&&!l.creating){try{l.creating=!0;const m={name:l.newCategoryName},u=yield l.api.create(m);u.done&&(yield l.get(),l.handleCreate(u.body)),l.creating=!1}catch{l.creating=!1}l.cdr.markForCheck()}})()}handleCreate(l){this.onCategoryChange(l.id),this.resetInputMode()}focusInput(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.nameInput.nativeElement?.focus()})})}}return(x=F).\u0275fac=function(l){return new(l||x)(e.Y36(e.sBO),e.Y36(D.s),e.Y36(e.R0b),e.Y36(E.s))},x.\u0275cmp=e.Xpm({type:x,selectors:[["worklenz-project-categories-autocomplete"]],viewQuery:function(l,m){if(1&l&&e.Gf(w,5),2&l){let u;e.iGM(u=e.CRH())&&(m.nameInput=u.first)}},inputs:{categoryId:"categoryId",disabled:"disabled"},outputs:{categoryIdChange:"categoryIdChange"},standalone:!0,features:[e.jDz],decls:6,vars:6,consts:[[3,"nzSpan"],[3,"ngSwitch","nzSpan","nzExtra"],[4,"ngSwitchCase"],["nz-input","","placeholder","Enter a name for the category",3,"ngModel","disabled","ngModelChange","blur","keyup.enter"],["nameInput",""],[3,"ngModel","nzLoading","nzPlaceHolder","nzDisabled","nzAllowClear","ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzValue"],["nz-button","","nzBlock","",3,"nzType","nzSize","click"],["nz-icon","",3,"nzType","nzTheme"],["nzCustomContent","",3,"nzLabel","nzValue"]],template:function(l,m){1&l&&(e.TgZ(0,"nz-form-item")(1,"nz-form-label",0),e._uU(2,"Category"),e.qZA(),e.TgZ(3,"nz-form-control",1),e.YNc(4,J,3,2,"ng-container",2),e.YNc(5,k,7,11,"ng-container",2),e.qZA()()),2&l&&(e.xp6(1),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("ngSwitch",m.showCategoryInput)("nzSpan",null)("nzExtra",m.showCategoryInput?"Hit enter to create!":""),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1))},dependencies:[r.ez,r.sg,r.RF,r.n9,T.sL,T.ix,Q.w,z.dQ,A.U5,h.t3,h.SK,A.Nx,A.iK,A.Fd,h.Jb,v.PV,v.Ls,j.LV,j.Ip,j.Vq,z.vG,M.m,C.UX,C.Fj,C.JJ,C.u5,C.On,O.o7,O.Zp],changeDetection:0}),F})()},13490:(N,Z,o)=>{o.d(Z,{g:()=>Ne});var p=o(15861),e=o(65879),r=o(60095),T=o(21406),A=o(59556),h=o(69649),v=o(9691),j=o(43389),z=o(55695),M=o(82669),C=o(3599),b=o(95717),O=o(62595),D=o(96814),E=o(20824),Q=o(99783),w=o(10095);function J(s,_){1&s&&(e.TgZ(0,"nz-auto-option"),e._UZ(1,"span",6),e._uU(2," Loading Data... "),e.qZA())}function U(s,_){if(1&s&&(e.TgZ(0,"nz-auto-option",9),e._uU(1),e.qZA()),2&s){const a=e.oxw(2);e.s9C("nzValue",a.newName),e.xp6(1),e.hij('+ ADD "',a.newName,'"')}}function k(s,_){if(1&s&&(e.TgZ(0,"nz-auto-option",9),e._uU(1),e.qZA()),2&s){const a=_.$implicit;e.Q6J("nzValue",a.name),e.xp6(1),e.Oqu(a.name)}}function L(s,_){if(1&s&&(e.TgZ(0,"span"),e.YNc(1,U,2,2,"nz-auto-option",7),e.YNc(2,k,2,2,"nz-auto-option",8),e.qZA()),2&s){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.isNew),e.xp6(1),e.Q6J("ngForOf",a.clients)}}let x=(()=>{var s;class _{constructor(t,n){this.api=t,this.fb=n,this.nameChange=new e.vpe,this.name=null,this.searching=!1,this.isNew=!1,this.newName=null,this.clients=[],this.total=0,this.form=this.fb.group({name:[]})}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.form.controls.name.setValue(t.name||null),t.form.get("name")?.valueChanges.subscribe(n=>{if(n)return t.newName=n,void(t.isNew=!t.clients.some(i=>i.name===n));t.isNew=!1}),yield t.get()})()}get(){var t=this;return(0,p.Z)(function*(){try{const n=yield t.api.get(1,5,null,null,t.form.value.name||null);n.done&&(t.clients=n.body.data||[],t.total=t.clients.length)}catch(n){(0,h.tu)(n)}})()}search(){var t=this;return(0,p.Z)(function*(){t.emitChange(),t.searching=!0,yield t.get(),t.searching=!1})()}emitChange(){this.form.valid&&this.nameChange.emit(this.form.value.name.trim())}}return(s=_).\u0275fac=function(t){return new(t||s)(e.Y36(Q.Q),e.Y36(r.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["worklenz-clients-autocomplete"]],inputs:{name:"name"},outputs:{nameChange:"nameChange"},standalone:!0,features:[e.jDz],decls:10,vars:9,consts:[["nz-form","",3,"formGroup","nzLayout"],[3,"nzSpan","nzTooltipTitle"],[3,"nzSpan"],["nz-input","","placeholder","Select client",3,"formControlName","nzAutocomplete","ngModelChange"],["jobTitlesAutoComplete",""],[4,"ngIf"],["nz-icon","","nzType","loading",1,"loading-icon"],[3,"nzValue",4,"ngIf"],[3,"nzValue",4,"ngFor","ngForOf"],[3,"nzValue"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"Client"),e.qZA(),e.TgZ(4,"nz-form-control",2)(5,"input",3),e.NdJ("ngModelChange",function(){return n.search()}),e.qZA(),e.TgZ(6,"nz-autocomplete",null,4),e.YNc(8,J,3,0,"nz-auto-option",5),e.YNc(9,L,3,2,"span",5),e.qZA()()()()),2&t){const i=e.MAs(7);e.Q6J("formGroup",n.form)("nzLayout","vertical"),e.xp6(2),e.Q6J("nzSpan",null)("nzTooltipTitle","You can manage clients under settings."),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","name")("nzAutocomplete",i),e.xp6(3),e.Q6J("ngIf",n.searching),e.xp6(1),e.Q6J("ngIf",!n.searching)}},dependencies:[r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,C.U5,w.t3,w.SK,C.Lr,C.Nx,C.iK,C.Fd,b.ic,b.gi,b.NB,b.Pf,O.PV,O.Ls,D.O5,D.sg,E.o7,E.Zp]}),_})();var F=o(42840),f=o(19035),l=o(72095),m=o(52682),u=o(62787),c=o(86408),d=o(27782),g=o(76271),P=o(34302),S=o(96109),R=o(8083),H=o(66987),K=o(93903),X=o(99865),B=o(33640),q=o(16676),Y=o.n(q),W=o(68373),ee=o(2919),G=o(96928),te=o(62612),ne=o(9172),oe=o(28677),re=o(31215),ae=o(45538),ie=o(90586),se=o(52732),le=o(32333),ce=o(55012),me=o(97192),de=o(64532),ue=o(45019),_e=o(19350),pe=o(18223),he=o(70855),ge=o(41958),$=o(73460);const fe=["projectName"],ze=["memberSearchInput"],Ce=["projectManagerSelector"],ve=["outsideClicker"];function ye(s,_){1&s&&e._UZ(0,"nz-alert",39),2&s&&e.Q6J("nzType","warning")("nzMessage","Members do not have permissions to change settings.")}function Me(s,_){if(1&s){const a=e.EpF();e.TgZ(0,"nz-form-item")(1,"nz-form-label",7),e._uU(2,"Key"),e.qZA(),e.TgZ(3,"nz-form-control",17)(4,"input",40),e.NdJ("keyup",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.onKeyChange())}),e.qZA()()()}2&s&&(e.xp6(1),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","key")("maxlength",5))}function Te(s,_){if(1&s){const a=e.EpF();e.TgZ(0,"li",41),e.NdJ("click",function(){const i=e.CHM(a).$implicit,y=e.oxw(2);return e.KtG(y.setColorCode(i))}),e.TgZ(1,"nz-tag",42),e._uU(2,"\xa0 "),e.qZA()()}if(2&s){const a=_.$implicit;e.xp6(1),e.Q6J("nzColor",a)}}function xe(s,_){if(1&s&&(e.TgZ(0,"nz-option",43),e.ALo(1,"safeString"),e._UZ(2,"span",44),e.ALo(3,"safeString"),e._uU(4),e.qZA()),2&s){const a=_.$implicit;e.Q6J("nzLabel",e.lcZ(1,6,a.name))("nzValue",a.id),e.xp6(2),e.Udp("color",a.color_code),e.Q6J("nzType",e.lcZ(3,8,a.icon)),e.xp6(2),e.hij(" ",a.name," ")}}function Pe(s,_){if(1&s&&(e.TgZ(0,"nz-option",43),e.ALo(1,"safeString"),e._UZ(2,"nz-badge",45),e.qZA()),2&s){const a=_.$implicit;e.Q6J("nzLabel",e.lcZ(1,4,a.name))("nzValue",a.id),e.xp6(2),e.Q6J("nzColor",a.color_code+"69")("nzText",a.name)}}function Ae(s,_){if(1&s){const a=e.EpF();e.TgZ(0,"worklenz-clients-autocomplete",46),e.NdJ("nameChange",function(n){e.CHM(a);const i=e.oxw(2);return e.KtG(i.onNameChangeSubmit(n))}),e.qZA()}if(2&s){const a=e.oxw(2);e.Q6J("name",a.clientName)}}function je(s,_){if(1&s){const a=e.EpF();e.ynx(0),e._UZ(1,"nz-avatar",47),e.ALo(2,"firstCharUpper"),e.TgZ(3,"span",48),e._uU(4),e.qZA(),e.TgZ(5,"span",49),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.handleMemberChange(null))}),e._UZ(6,"span",50),e.qZA(),e.BQk()}if(2&s){const a=e.oxw(2);e.xp6(1),e.Udp("background-color",a.projectManager.avatar_url?"#ececec":a.projectManager.color_code),e.Q6J("nzSize",24)("nzSrc",a.projectManager.avatar_url)("nzText",e.lcZ(2,8,a.projectManager.name))("nzTooltipPlacement","top")("nzTooltipTitle",a.projectManager.name),e.xp6(3),e.Oqu(a.projectManager.name)}}function Oe(s,_){1&s&&(e.TgZ(0,"span",51),e._UZ(1,"nz-avatar",52),e.qZA()),2&s&&(e.xp6(1),e.Q6J("nzSize",26)("nzIcon","plus"))}function Ze(s,_){1&s&&(e.TgZ(0,"small",64),e._uU(1,"(Pending Invitation)"),e.qZA())}function be(s,_){if(1&s){const a=e.EpF();e.TgZ(0,"li",58),e.NdJ("click",function(){const i=e.CHM(a).$implicit,y=e.oxw(3);return e.KtG(y.handleMemberChange(i))}),e.TgZ(1,"div",59),e._UZ(2,"nz-avatar",60),e.ALo(3,"firstCharUpper"),e.TgZ(4,"div",61)(5,"span",62),e._uU(6),e.qZA(),e.TgZ(7,"small",51),e._uU(8),e.YNc(9,Ze,2,0,"small",63),e.qZA()()()()}if(2&s){const a=_.$implicit;e.Q6J("nzDisabled",a.pending_invitation),e.xp6(2),e.Udp("background-color",a.avatar_url?"#ececec":a.color_code),e.Q6J("nzSize",24)("nzSrc",a.avatar_url)("nzText",e.lcZ(3,11,a.name))("nzTooltipPlacement","top")("nzTooltipTitle",a.name),e.xp6(4),e.Oqu(a.name),e.xp6(2),e.hij(" ",a.email," "),e.xp6(1),e.Q6J("ngIf",a.pending_invitation)}}function De(s,_){if(1&s){const a=e.EpF();e.TgZ(0,"ul",53)(1,"li",54)(2,"input",55,56),e.NdJ("input",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.getTeamMembers())}),e.qZA()(),e.YNc(4,be,10,13,"li",57),e.ALo(5,"searchByName"),e.qZA()}if(2&s){const a=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",e.xi3(5,2,a.teamMembers,a.searchingName))("ngForTrackBy",a.trackById)}}function Ee(s,_){if(1&s){const a=e.EpF();e.TgZ(0,"button",67),e.NdJ("nzOnConfirm",function(){e.CHM(a);const n=e.oxw(3);return e.KtG(n.delete())}),e._uU(1," Delete Project "),e.qZA()}if(2&s){const a=e.oxw(3);e.Q6J("nzLoading",a.deletingProject)("nzOkText","ok")("nzPopconfirmTitle","Are you sure?")("nzType","dashed")}}function Fe(s,_){if(1&s){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",65),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.submit())}),e._uU(2),e.qZA(),e.YNc(3,Ee,2,4,"button",66),e.BQk()}if(2&s){const a=e.oxw(2);e.xp6(1),e.Q6J("nzLoading",a.updatingProject)("nzType","primary"),e.xp6(1),e.Oqu(a.submitButtonText),e.xp6(1),e.Q6J("ngIf",a.projectId)}}function Se(s,_){if(1&s&&(e.TgZ(0,"div",71)(1,"small",72),e.ALo(2,"date"),e._uU(3),e.ALo(4,"fromNow"),e.qZA()()),2&s){const a=e.oxw(3);e.xp6(1),e.Q6J("nzTooltipPlacement","right")("nzTooltipTitle",e.xi3(2,4,a.model.created_at,"medium")),e.xp6(2),e.AsE(" Created ",e.lcZ(4,7,a.model.created_at)," by ",a.model.project_owner," ")}}function Ie(s,_){if(1&s&&(e.TgZ(0,"div",71)(1,"small",72),e.ALo(2,"date"),e._uU(3),e.ALo(4,"fromNow"),e.qZA()()),2&s){const a=e.oxw(3);e.xp6(1),e.Q6J("nzTooltipPlacement","right")("nzTooltipTitle",e.xi3(2,3,a.model.updated_at,"medium")),e.xp6(2),e.hij(" Updated ",e.lcZ(4,6,a.model.updated_at)," ")}}function we(s,_){if(1&s&&(e.ynx(0),e._UZ(1,"nz-divider",68),e.TgZ(2,"div",69),e.YNc(3,Se,5,9,"div",70),e.YNc(4,Ie,5,8,"div",70),e.qZA(),e.BQk()),2&s){const a=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a.model.created_at),e.xp6(1),e.Q6J("ngIf",a.model.updated_at)}}function Je(s,_){if(1&s){const a=e.EpF();e.ynx(0),e.TgZ(1,"nz-spin",4),e.YNc(2,ye,1,2,"nz-alert",5),e.TgZ(3,"form",6)(4,"nz-form-item")(5,"nz-form-label",7),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"nz-form-control",8),e._UZ(8,"input",9,10),e.qZA()(),e.YNc(10,Me,5,4,"nz-form-item",11),e.TgZ(11,"nz-form-item")(12,"nz-form-label",12),e._uU(13,"Project color "),e.TgZ(14,"nz-tag",13),e._uU(15,"\xa0 "),e.qZA()(),e.TgZ(16,"nz-dropdown-menu",null,14)(18,"ul",15),e.YNc(19,Te,3,1,"li",16),e.qZA()()(),e.TgZ(20,"nz-form-item")(21,"nz-form-label",17),e._uU(22,"Status"),e.qZA(),e.TgZ(23,"nz-form-control",17)(24,"nz-select",18),e.YNc(25,xe,5,10,"nz-option",19),e.qZA()()(),e.TgZ(26,"nz-form-item")(27,"nz-form-label",17),e._uU(28,"Health"),e.qZA(),e.TgZ(29,"nz-form-control",17)(30,"nz-select",18),e.YNc(31,Pe,3,6,"nz-option",19),e.qZA()()(),e.TgZ(32,"worklenz-project-categories-autocomplete",20),e.NdJ("categoryIdChange",function(n){e.CHM(a);const i=e.oxw();return e.KtG(i.categoryId=n)}),e.qZA(),e.TgZ(33,"nz-form-item")(34,"nz-form-label",17),e._uU(35,"Notes"),e.qZA(),e.TgZ(36,"nz-form-control",17),e._UZ(37,"textarea",21),e.qZA()(),e.YNc(38,Ae,1,1,"worklenz-clients-autocomplete",22),e.TgZ(39,"nz-form-item")(40,"nz-form-label",17),e._uU(41," Project Manager "),e.TgZ(42,"div",23),e.NdJ("nzVisibleChange",function(n){e.CHM(a);const i=e.oxw();return e.KtG(i.handleOwnerVisibleChange(n))}),e.TgZ(43,"div",24,25),e.YNc(45,je,7,10,"ng-container",11),e.YNc(46,Oe,2,2,"span",26),e.qZA(),e.TgZ(47,"nz-dropdown-menu",null,27),e.YNc(49,De,6,5,"ul",28),e.qZA()()()(),e._UZ(50,"div",null,29),e.TgZ(52,"nz-input-group",30)(53,"div",31)(54,"div",32)(55,"nz-form-item")(56,"nz-form-label",17),e._uU(57,"Start date"),e.qZA(),e.TgZ(58,"nz-form-control",17)(59,"nz-date-picker",33),e.NdJ("nzOnOpenChange",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.calculateManDays())}),e.qZA()()()(),e.TgZ(60,"div",32)(61,"nz-form-item")(62,"nz-form-label",17),e._uU(63,"End date"),e.qZA(),e.TgZ(64,"nz-form-control",17)(65,"nz-date-picker",33),e.NdJ("nzOnOpenChange",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.calculateManDays())}),e.qZA()()()(),e.TgZ(66,"div",32)(67,"nz-form-item")(68,"nz-form-label",34),e._uU(69,"Estimated working days"),e.qZA(),e.TgZ(70,"nz-form-control",35),e._UZ(71,"nz-input-number",36),e.qZA()()(),e.TgZ(72,"div",32)(73,"nz-form-item")(74,"nz-form-label",34),e._uU(75,"Estimated man days"),e.qZA(),e.TgZ(76,"nz-form-control",35),e._UZ(77,"nz-input-number",37),e.qZA()()(),e.TgZ(78,"div",32)(79,"nz-form-item")(80,"nz-form-label",34),e._uU(81,"Hours per day"),e.qZA(),e.TgZ(82,"nz-form-control",35),e._UZ(83,"nz-input-number",38),e.qZA()()()()(),e.YNc(84,Fe,4,4,"ng-container",11),e.qZA(),e.YNc(85,we,5,2,"ng-container",11),e.qZA(),e.BQk()}if(2&s){const a=e.MAs(17),t=e.MAs(48),n=e.oxw();e.xp6(1),e.Q6J("nzSpinning",n.isLoading()),e.xp6(1),e.Q6J("ngIf",n.isMember),e.xp6(1),e.Q6J("formGroup",n.form)("nzLayout","vertical"),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","name"),e.xp6(2),e.Q6J("ngIf",n.projectId),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzColor",n.activeColorCode)("nzDropdownMenu",a)("nzDisabled",n.isMember)("nzTrigger","click"),e.xp6(5),e.Q6J("ngForOf",n.COLOR_CODES),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","status_id")("nzLoading",n.loadingProjStatuses),e.xp6(1),e.Q6J("ngForOf",n.statuses),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","health_id")("nzLoading",n.loadingProjHealths),e.xp6(1),e.Q6J("ngForOf",n.healths),e.xp6(1),e.Q6J("categoryId",n.categoryId)("disabled",n.isMember),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","notes"),e.xp6(1),e.Q6J("ngIf",!(n.isMember||n.edit&&n.loading)),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzClickHide",!1)("nzDropdownMenu",t)("nzTrigger","click")("nzDisabled",n.isMember||!n.isOwnerOrAdmin()&&n.isProjectManager()),e.xp6(3),e.Q6J("ngIf",n.projectManager),e.xp6(1),e.Q6J("ngIf",!n.projectManager),e.xp6(3),e.Q6J("ngIf",n.teamMembers.length),e.xp6(3),e.Q6J("nzSize","default"),e.xp6(1),e.Q6J("nzGutter",8),e.xp6(1),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","start_date")("nzDisabledDate",n.utils.checkForMaxDate(n.endDate)),e.xp6(1),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","end_date")("nzDisabledDate",n.utils.checkForMinDate(n.startDate)),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","working_days")("nzMin",0)("maxlength",5),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","man_days")("nzMin",0)("maxlength",10),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","hours_per_day")("nzMin",0)("nzMax",24)("maxlength",2),e.xp6(1),e.Q6J("ngIf",!n.isMember),e.xp6(1),e.Q6J("ngIf",n.projectId)}}let Ne=(()=>{var s;class _{get categoryId(){return this.form.controls.category_id.value||null}set categoryId(t){this.form.controls.category_id.setValue(t)}get startDate(){return this.form.value.start_date||null}get endDate(){return this.form.value.end_date||null}get title(){return this.projectId?"Update Project":"Create Project"}get submitButtonText(){return this.projectId?"Save Changes":"Create"}get activeColorCode(){return this.form.controls.color_code.value}constructor(t,n,i,y,I,V,Qe,Ue,ke,Le,Re,Ve,He,Ke){this.api=t,this.fb=n,this.membersApi=i,this.app=y,this.statusesApi=I,this.auth=V,this.ngZone=Qe,this.foldersApi=Ue,this.folderFormService=ke,this.cdr=Le,this.utils=Re,this.projectFormService=Ve,this.healthsApi=He,this.projectsService=Ke,this.onCreate=new e.vpe,this.onUpdate=new e.vpe,this.onProjectManagerUpdate=new e.vpe,this.onDelete=new e.vpe,this.COLOR_CODES=T.lD,this.show=!1,this.edit=!1,this.loading=!1,this.searching=!1,this.showTeamMemberModal=!1,this.updatingProject=!1,this.deletingProject=!1,this.loadingTeamMembers=!1,this.loadingProjStatuses=!1,this.loadingProjHealths=!1,this.isMember=!1,this.isManager=!1,this.loadingFolders=!1,this.clientName=null,this.projectManager=null,this.projectId=null,this.teamMembers=[],this.projectMembers=[],this.removedMembersList=[],this.removedTasks=[],this.newTasks=[],this.statuses=[],this.folders=[],this.healths=[],this.searchingName=null,this.model={},this.showMoreSeatsModal=!1,this.moreSeatsData={},this.createForm()}createForm(){this.form=this.fb.group({name:[null,[r.kI.required]],key:[null,[r.kI.max(5)]],notes:[null,[]],start_date:[],project_manager:[null,[]],end_date:[],status_id:[],health_id:[],folder_id:[],category_id:[],color_code:[T.lD[1],[r.kI.required]],working_days:[0,[r.kI.required]],man_days:[0,[r.kI.required]],hours_per_day:[8,[r.kI.required]],_select_team_member_input:[null,[]]}),this.isMember&&this.form.disable(),this.form.controls._select_team_member_input.valueChanges.subscribe(t=>{this.searchingName=t,this.searchMembers()})}reset(){this.clientName=null,this.projectId=null,this.projectManager=null,this.teamMembers=[],this.projectMembers=[],this.removedMembersList=[],this.removedTasks=[],this.newTasks=[],this.deletingProject=!1,this.updatingProject=!1}handleClose(){this.reset(),this.show=!1}isOwnerOrAdmin(){return this.auth.getCurrentSession()?.owner||this.auth.getCurrentSession()?.is_admin}isProjectManager(){return!!this.projectsService.projectOwnerTeamMemberId&&this.auth.getCurrentSession()?.team_member_id===this.projectsService.projectOwnerTeamMemberId}open(t,n=!1){var i=this;return(0,p.Z)(function*(){i.isMember=!i.isOwnerOrAdmin()&&!i.isProjectManager(),i.show=!0,i.edit=n,i.createForm(),i.getProjectStatuses(),i.getProjectHealths(),t&&(i.projectId=t,i.get(i.projectId)),i.getTeamMembers()})()}isLoading(){return this.loadingTeamMembers}getFolders(){var t=this;return(0,p.Z)(function*(){try{t.loadingFolders=!0;const n=yield t.foldersApi.get();n.done&&(t.folders=n.body),t.loadingFolders=!1}catch(n){t.loadingFolders=!1,(0,h.tu)(n)}t.cdr.markForCheck()})()}getTeamMembers(){var t=this;return(0,p.Z)(function*(){try{t.loadingTeamMembers=!0;const n=yield t.membersApi.get(1,5,null,null,t.memberSearchInput?t.memberSearchInput.nativeElement.value:null,!0);n.done&&(t.teamMembers=n.body.data||[],t.teamMembers=t.teamMembers.filter(i=>i.active),t.teamMembers.sort((i,y)=>Number(i.pending_invitation)-Number(y.pending_invitation))),t.loadingTeamMembers=!1}catch(n){t.loadingTeamMembers=!1,(0,h.tu)(n)}t.cdr.markForCheck()})()}getProjectStatuses(){var t=this;return(0,p.Z)(function*(){try{t.loadingProjStatuses=!0;const n=yield t.statusesApi.get();if(n.done){t.statuses=n.body;const i=t.statuses.find(y=>y.is_default);!t.projectId&&i&&i.id&&t.form.controls.status_id.setValue(i.id)}t.loadingProjStatuses=!1}catch(n){t.loadingProjStatuses=!1,(0,h.tu)(n)}t.cdr.markForCheck()})()}getProjectHealths(){var t=this;return(0,p.Z)(function*(){try{t.loadingProjHealths=!0;const n=yield t.healthsApi.get();if(n){t.healths=n.body;const i=t.healths.find(y=>y.is_default);!t.projectId&&i&&i.id&&t.form.controls.health_id.setValue(i.id)}t.loadingProjHealths=!1}catch(n){t.loadingProjHealths=!1,(0,h.tu)(n)}t.cdr.markForCheck()})()}delete(){var t=this;return(0,p.Z)(function*(){if(t.projectId){try{t.deletingProject=!0,(yield t.api.delete(t.projectId)).done&&(t.handleClose(),t.onDelete?.emit()),t.deletingProject=!1}catch(n){t.deletingProject=!1,(0,h.tu)(n)}t.cdr.markForCheck()}})()}create(){var t=this;return(0,p.Z)(function*(){try{t.updatingProject=!0;const n={name:t.form.controls.name.value,client_name:t.clientName,notes:t.form.controls.notes.value,project_manager:t.projectManager,color_code:t.form.controls.color_code.value,status_id:t.form.controls.status_id.value,health_id:t.form.controls.health_id.value,start_date:t.form.controls.start_date.value,end_date:t.form.controls.end_date.value,folder_id:t.form.controls.folder_id.value,category_id:t.form.controls.category_id.value,working_days:t.form.controls.working_days.value,man_days:t.form.controls.man_days.value,hours_per_day:t.form.controls.hours_per_day.value},i=yield t.api.create(n);i.done&&(c.s.track(d.zY),t.handleClose(),t.onCreate.emit(i.body),(0,A.xt)()),t.updatingProject=!1}catch(n){t.updatingProject=!1,(0,h.tu)(n)}t.cdr.markForCheck()})()}update(t){var n=this;return(0,p.Z)(function*(){try{n.updatingProject=!0;const i={name:n.form.controls.name.value,client_name:n.clientName,notes:n.form.controls.notes.value,project_manager:n.projectManager,key:n.form.controls.key.value,color_code:n.form.controls.color_code.value,status_id:n.form.controls.status_id.value,health_id:n.form.controls.health_id.value,start_date:n.form.controls.start_date.value,end_date:n.form.controls.end_date.value,folder_id:n.form.controls.folder_id.value,category_id:n.form.controls.category_id.value,working_days:n.form.controls.working_days.value,man_days:n.form.controls.man_days.value,hours_per_day:n.form.controls.hours_per_day.value},y=yield n.api.update(t,i);if(y.done)return c.s.track(d.n9),n.handleClose(),n.onUpdate.emit(y.body),(0,A.xt)(),n.projectFormService.emitProjectUpdate(),!0;n.updatingProject=!1}catch(i){n.updatingProject=!1,(0,h.tu)(i)}return n.cdr.markForCheck(),!1})()}get(t){var n=this;return(0,p.Z)(function*(){if(t){try{n.loading=!0;const i=yield n.api.getById(t);i.done&&(n.model=i.body,n.form.patchValue(n.model),n.clientName=i.body.client_name,n.projectManager=n.model.project_manager?n.model.project_manager:null,n.projectMembers=n.model.members??[],n.newTasks=n.model.tasks??[],n.categoryId=n.model.category_id||null),n.loading=!1}catch(i){n.loading=!1,(0,h.tu)(i)}n.cdr.markForCheck()}})()}submit(){var t=this;return(0,p.Z)(function*(){t.isMember||(t.form.valid?t.projectId?yield t.update(t.projectId):t.create():t.app.displayErrorsOf(t.form))})()}searchMembers(){var t=this;return(0,p.Z)(function*(){t.searching=!0,yield t.getTeamMembers(),t.searching=!1,t.cdr.markForCheck()})()}onVisibilityChange(t){if(t){if(this.getFolders(),this.isMember)return;this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{const n=this.projectName.nativeElement;n&&n.focus()},100)})}}handleOwnerVisibleChange(t){if(t)try{setTimeout(()=>{this.projectManagerSelector.nativeElement.classList.add("highlight")},100),this.cdr.markForCheck()}catch(n){(0,h.tu)(n),this.cdr.markForCheck()}else this.projectManagerSelector.nativeElement.classList.remove("highlight"),this.cdr.markForCheck()}setColorCode(t){this.form.controls.color_code.setValue(t)}onNameChangeSubmit(t){this.clientName=t||null,this.cdr.markForCheck()}onKeyChange(){const t=this.form.controls.key.value;t&&this.form.controls.key.setValue(t.toUpperCase())}newFolder(){this.folderFormService.create(t=>{t&&(this.updateFolders(t),this.form.controls.folder_id?.setValue(t.id),this.cdr.markForCheck())})}updateFolders(t){const n=[...this.folders];n.push(t),n.sort((i,y)=>i.name.localeCompare(y.name)),this.folders=n}calculateManDays(){const t=this.form.controls.start_date.value,n=this.form.controls.end_date.value;if(t&&n){const i=Y()(t),y=Y()(n);let I=y.diff(i,"days")+1;y.isoWeekday()>5&&(I-=y.isoWeekday()%5),i.isoWeekday()>5&&(I-=3-i.isoWeekday()%5),I>5&&(I-=(I-I%7)/7*2),this.form.controls.working_days.setValue(I)}}trackById(t,n){return n.id}handleMemberChange(t){t?.pending_invitation||this.isMember||!this.isOwnerOrAdmin()&&this.isProjectManager()||(this.projectManager=t,this.focusOut(),this.cdr.markForCheck())}focusOut(){setTimeout(()=>{this.outsideClicker.nativeElement.click()},50),this.cdr.markForCheck()}handleMoreSeatsNeeded(t){this.moreSeatsData=t,this.showMoreSeatsModal=!0}}return(s=_).\u0275fac=function(t){return new(t||s)(e.Y36(re.U),e.Y36(r.qu),e.Y36(ae.B),e.Y36(ie.z),e.Y36(se.k),e.Y36(le.e),e.Y36(e.R0b),e.Y36(ce.Y),e.Y36(me.I),e.Y36(e.sBO),e.Y36(de.F),e.Y36(ue.s),e.Y36(_e.w),e.Y36(pe.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["worklenz-project-form-modal"]],viewQuery:function(t,n){if(1&t&&(e.Gf(fe,5),e.Gf(ze,5),e.Gf(Ce,5),e.Gf(ve,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.projectName=i.first),e.iGM(i=e.CRH())&&(n.memberSearchInput=i.first),e.iGM(i=e.CRH())&&(n.projectManagerSelector=i.first),e.iGM(i=e.CRH())&&(n.outsideClicker=i.first)}},outputs:{onCreate:"onCreate",onUpdate:"onUpdate",onProjectManagerUpdate:"onProjectManagerUpdate",onDelete:"onDelete"},standalone:!0,features:[e.jDz],decls:4,vars:7,consts:[[3,"nzClosable","nzTitle","nzVisible","nzPlacement","nzOnClose","nzVisibleChange"],[4,"nzDrawerContent"],[3,"show","onCreateOrUpdate","showChange"],[3,"isVisible","subscriptionData","modalClosed"],[3,"nzSpinning"],["class","mb-3",3,"nzType","nzMessage",4,"ngIf"],["nz-form","",3,"formGroup","nzLayout"],["nzRequired","",3,"nzSpan"],["nzErrorTip","Please enter a name!",3,"nzSpan"],["nz-input","","placeholder","Name",3,"formControlName"],["projectName",""],[4,"ngIf"],["nzRequired","",1,"pb-0",3,"nzSpan"],["nz-dropdown","",1,"ms-2","rounded-circle","cursor-pointer",2,"width","20px","height","20px",3,"nzColor","nzDropdownMenu","nzDisabled","nzTrigger"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable","",2,"max-height","200px","overflow","hidden","overflow-y","auto"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],[3,"nzSpan"],[3,"formControlName","nzLoading"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"categoryId","disabled","categoryIdChange"],["nz-input","","placeholder","Notes",3,"formControlName"],[3,"name","nameChange",4,"ngIf"],["nz-dropdown","",3,"nzClickHide","nzDropdownMenu","nzTrigger","nzDisabled","nzVisibleChange"],[1,"d-flex","h-100","align-items-center","manager-input"],["projectManagerSelector",""],["nz-typography","","nzType","secondary",4,"ngIf"],["projectManagerDropDown","nzDropdownMenu"],["class","members-dropdown pt-0","nz-menu","",4,"ngIf"],["outsideClicker",""],[3,"nzSize"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[1,"w-100",3,"formControlName","nzDisabledDate","nzOnOpenChange"],["nzRequired","",1,"star-none",3,"nzSpan"],["nzErrorTip","Field cannot be empty!",3,"nzSpan"],["nz-input","","placeholder","Estimated Working Days",1,"w-100",3,"formControlName","nzMin","maxlength"],["nz-input","","placeholder","Estimated Man Days",1,"w-100",3,"formControlName","nzMin","maxlength"],["nz-input","","placeholder","Hours Per Day",1,"w-100",3,"formControlName","nzMin","nzMax","maxlength"],[1,"mb-3",3,"nzType","nzMessage"],["nz-input","","placeholder","Key",3,"formControlName","maxlength","keyup"],["nz-menu-item","",3,"click"],[1,"me-1","w-100","rounded-pill",2,"height","16px !important","width","16px !important",3,"nzColor"],["nzCustomContent","",3,"nzLabel","nzValue"],["nz-icon","",3,"nzType"],[3,"nzColor","nzText"],[3,"name","nameChange"],["nz-tooltip","",1,"mt-auto","mb-auto","mx-2",3,"nzSize","nzSrc","nzText","nzTooltipPlacement","nzTooltipTitle"],["nz-typography",""],["nz-typography","",1,"mx-2","remove-icon",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"],["nz-typography","","nzType","secondary"],[1,"avatar-dashed","mx-2","bg-white",3,"nzSize","nzIcon"],["nz-menu","",1,"members-dropdown","pt-0"],[1,"px-3","py-2","position-sticky","top-0","bg-white","z-top"],["nz-input","","placeholder","Search by name","type","text",1,"border-default-color","dropdown-search-input",3,"input"],["memberSearchInput",""],["class","m-0","nz-menu-item","",3,"nzDisabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["nz-menu-item","",1,"m-0",3,"nzDisabled","click"],[1,"d-flex","align-items-center","justify-content-center","user-select-none"],["nz-tooltip","",1,"mt-auto","mb-auto","me-2",3,"nzSize","nzSrc","nzText","nzTooltipPlacement","nzTooltipTitle"],[2,"line-height","15px"],["nz-typography","",1,"d-block","mem-name"],["nz-typography","","nzType","danger",4,"ngIf"],["nz-typography","","nzType","danger"],["nz-button","","nzBlock","","type","button",3,"nzLoading","nzType","click"],["class","mt-2","nz-button","","nz-popconfirm","","nzDanger","","nzBlock","","type","button",3,"nzLoading","nzOkText","nzPopconfirmTitle","nzType","nzOnConfirm",4,"ngIf"],["nz-button","","nz-popconfirm","","nzDanger","","nzBlock","","type","button",1,"mt-2",3,"nzLoading","nzOkText","nzPopconfirmTitle","nzType","nzOnConfirm"],[1,"mt-3","mb-2"],[1,"pb-1"],["class","mb-0","nz-typography","","nzType","secondary",4,"ngIf"],["nz-typography","","nzType","secondary",1,"mb-0"],["nz-tooltip","",3,"nzTooltipPlacement","nzTooltipTitle"]],template:function(t,n){1&t&&(e.TgZ(0,"nz-drawer",0),e.NdJ("nzOnClose",function(){return n.handleClose()})("nzVisibleChange",function(y){return n.onVisibilityChange(y)}),e.YNc(1,Je,86,71,"ng-container",1),e.qZA(),e.TgZ(2,"worklenz-team-members-form",2),e.NdJ("onCreateOrUpdate",function(){return n.getTeamMembers()})("showChange",function(y){return n.showTeamMemberModal=y}),e.qZA(),e.TgZ(3,"worklenz-add-more-seats",3),e.NdJ("modalClosed",function(){return n.showMoreSeatsModal=!1}),e.qZA()),2&t&&(e.Q6J("nzClosable",!0)("nzTitle",n.title)("nzVisible",n.show)("nzPlacement","right"),e.xp6(2),e.Q6J("show",n.showTeamMemberModal),e.xp6(1),e.Q6J("isVisible",n.showMoreSeatsModal)("subscriptionData",n.moreSeatsData))},dependencies:[v.LV,v.Ip,v.Vq,j.BL,j.Vz,j.SQ,z.X,z.j,M.j,M.W,x,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.nD,r.sg,r.u,E.o7,E.Zp,E.gB,F.sL,F.ix,he.w,ge.dQ,D.O5,f._p,f.JW,C.U5,w.t3,w.SK,C.Lr,C.Nx,C.iK,C.Fd,D.sg,O.PV,O.Ls,l.S,m.Hb,m.uw,u.b1,$.wO,$.r9,u.cm,u.RR,g.m,D.uU,P.d,S.cg,S.SY,R.ZJ,R.ZU,H.S,H.g,K.L,K.r,X.n,B.mS,B.x7,W.Zf,W._V,ee.I,G.Rt,G.Dz,te.Wr,ne.g,r.u5,oe.x],styles:[".remove-icon[_ngcontent-%COMP%]{color:#00000040;background:#fff;opacity:0;cursor:pointer;transition:.25s all}.remove-icon[_ngcontent-%COMP%]:hover{color:#00000073}.manager-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-color:transparent;border-radius:6px;transition:.25s all;margin-left:8px;min-height:32px}.manager-input[_ngcontent-%COMP%]:hover{border-color:#40a9ff}.manager-input[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{opacity:1}.manager-input.highlight[_ngcontent-%COMP%]{border-color:#40a9ff;box-shadow:0 0 0 2px #1890ff33}.z-top[_ngcontent-%COMP%]{z-index:1}"],changeDetection:0}),_})()},97192:(N,Z,o)=>{o.d(Z,{I:()=>r});var p=o(78645),e=o(65879);let r=(()=>{var T;class A{constructor(){this._createSbj$=new p.x}get onCreateInvoke(){return this._createSbj$.asObservable()}create(v){this._createSbj$.next(v)}}return(T=A).\u0275fac=function(v){return new(v||T)},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),A})()},99783:(N,Z,o)=>{o.d(Z,{Q:()=>h});var p=o(10708),e=o(26857),r=o(69649),T=o(65879),A=o(69862);let h=(()=>{var v;class j extends e.P{constructor(M){super(),this.http=M,this.root=`${this.API_BASE_URL}/clients`}create(M){return this._post(this.http,this.root,M)}get(M,C,b,O,D){const E=encodeURIComponent(D||"");return this._get(this.http,`${this.root}${(0,r.UK)({index:M,size:C,field:b,order:O,search:E})}`)}getById(M){return this._get(this.http,`${this.root}/${M}`)}update(M,C){return this._put(this.http,`${this.root}/${M}`,C)}delete(M){return(0,p.n)(this.http.delete(`${this.root}/${M}`))}}return(v=j).\u0275fac=function(M){return new(M||v)(T.LFG(A.eN))},v.\u0275prov=T.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),j})()},55012:(N,Z,o)=>{o.d(Z,{Y:()=>A});var p=o(26857),e=o(10708),r=o(65879),T=o(69862);let A=(()=>{var h;class v extends p.P{constructor(z){super(),this.http=z,this.root=`${this.API_BASE_URL}/projects-folders`}create(z){return this._post(this.http,this.root,z)}get(){return this._get(this.http,`${this.root}`)}getById(z){return this._get(this.http,`${this.root}/${z}`)}update(z,M){return this._put(this.http,`${this.root}/${z}`,M)}delete(z){return(0,e.n)(this.http.delete(`${this.root}/${z}`))}}return(h=v).\u0275fac=function(z){return new(z||h)(r.LFG(T.eN))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),v})()},98421:(N,Z,o)=>{o.d(Z,{Ju:()=>f,sn:()=>F});var p=o(97582),e=o(36028),r=o(65879),T=o(60095),A=o(92438),h=o(59773),v=o(40874),j=o(99087),z=o(27754),M=o(49388),C=o(96814),b=o(96109),O=o(62595);const D=["nz-rate-item",""];function E(l,m){}function Q(l,m){}function w(l,m){1&l&&r._UZ(0,"span",4)}const J=function(l){return{$implicit:l}},U=["ulElement"];function k(l,m){if(1&l){const u=r.EpF();r.TgZ(0,"li",3)(1,"div",4),r.NdJ("itemHover",function(d){const P=r.CHM(u).index,S=r.oxw();return r.KtG(S.onItemHover(P,d))})("itemClick",function(d){const P=r.CHM(u).index,S=r.oxw();return r.KtG(S.onItemClick(P,d))}),r.qZA()()}if(2&l){const u=m.index,c=r.oxw();r.Q6J("ngClass",c.starStyleArray[u]||"")("nzTooltipTitle",c.nzTooltips[u]),r.xp6(1),r.Q6J("allowHalf",c.nzAllowHalf)("character",c.nzCharacter)("index",u)}}let L=(()=>{var l;class m{constructor(){this.index=0,this.allowHalf=!1,this.itemHover=new r.vpe,this.itemClick=new r.vpe}hoverRate(c){this.itemHover.next(c&&this.allowHalf)}clickRate(c){this.itemClick.next(c&&this.allowHalf)}}return(l=m).\u0275fac=function(c){return new(c||l)},l.\u0275cmp=r.Xpm({type:l,selectors:[["","nz-rate-item",""]],inputs:{character:"character",index:"index",allowHalf:"allowHalf"},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:D,decls:6,vars:8,consts:[[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-rate-star-first",3,"mouseover","click"],["defaultCharacter",""],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(c,d){if(1&c&&(r.TgZ(0,"div",0),r.NdJ("mouseover",function(P){return d.hoverRate(!1),P.stopPropagation()})("click",function(){return d.clickRate(!1)}),r.YNc(1,E,0,0,"ng-template",1),r.qZA(),r.TgZ(2,"div",2),r.NdJ("mouseover",function(P){return d.hoverRate(!0),P.stopPropagation()})("click",function(){return d.clickRate(!0)}),r.YNc(3,Q,0,0,"ng-template",1),r.qZA(),r.YNc(4,w,1,0,"ng-template",null,3,r.W1O)),2&c){const g=r.MAs(5);r.xp6(1),r.Q6J("ngTemplateOutlet",d.character||g)("ngTemplateOutletContext",r.VKq(4,J,d.index)),r.xp6(2),r.Q6J("ngTemplateOutlet",d.character||g)("ngTemplateOutletContext",r.VKq(6,J,d.index))}},dependencies:[C.tP,O.Ls],encapsulation:2,changeDetection:0}),(0,p.gn)([(0,z.yF)()],m.prototype,"allowHalf",void 0),m})();const x="rate";let F=(()=>{var l;class m{get nzValue(){return this._value}set nzValue(c){this._value!==c&&(this._value=c,this.hasHalf=!Number.isInteger(c),this.hoverValue=Math.ceil(c))}constructor(c,d,g,P,S,R){this.nzConfigService=c,this.ngZone=d,this.renderer=g,this.cdr=P,this.directionality=S,this.destroy$=R,this._nzModuleName=x,this.nzAllowClear=!0,this.nzAllowHalf=!1,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzCount=5,this.nzTooltips=[],this.nzOnBlur=new r.vpe,this.nzOnFocus=new r.vpe,this.nzOnHoverChange=new r.vpe,this.nzOnKeyDown=new r.vpe,this.classMap={},this.starArray=[],this.starStyleArray=[],this.dir="ltr",this.hasHalf=!1,this.hoverValue=0,this.isFocused=!1,this._value=0,this.isNzDisableFirstChange=!0,this.onChange=()=>null,this.onTouched=()=>null}ngOnChanges(c){const{nzAutoFocus:d,nzCount:g,nzValue:P}=c;if(d&&!d.isFirstChange()){const S=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(S,"autofocus","autofocus"):this.renderer.removeAttribute(S,"autofocus")}g&&this.updateStarArray(),P&&this.updateStarStyle()}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(x).pipe((0,h.R)(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change.pipe((0,h.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,A.R)(this.ulElement.nativeElement,"focus").pipe((0,h.R)(this.destroy$)).subscribe(c=>{this.isFocused=!0,this.nzOnFocus.observers.length&&this.ngZone.run(()=>this.nzOnFocus.emit(c))}),(0,A.R)(this.ulElement.nativeElement,"blur").pipe((0,h.R)(this.destroy$)).subscribe(c=>{this.isFocused=!1,this.nzOnBlur.observers.length&&this.ngZone.run(()=>this.nzOnBlur.emit(c))})})}onItemClick(c,d){if(this.nzDisabled)return;this.hoverValue=c+1;const g=d?c+.5:c+1;this.nzValue===g?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=g,this.onChange(this.nzValue)),this.updateStarStyle()}onItemHover(c,d){this.nzDisabled||this.hoverValue===c+1&&d===this.hasHalf||(this.hoverValue=c+1,this.hasHalf=d,this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle())}onRateLeave(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.updateStarStyle()}focus(){this.ulElement.nativeElement.focus()}blur(){this.ulElement.nativeElement.blur()}onKeyDown(c){const d=this.nzValue;c.keyCode===e.SV&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:c.keyCode===e.oh&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),d!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(c),this.updateStarStyle(),this.cdr.markForCheck())}updateStarArray(){this.starArray=Array(this.nzCount).fill(0).map((c,d)=>d),this.updateStarStyle()}updateStarStyle(){this.starStyleArray=this.starArray.map(c=>{const d="ant-rate-star",g=c+1;return{[`${d}-full`]:g<this.hoverValue||!this.hasHalf&&g===this.hoverValue,[`${d}-half`]:this.hasHalf&&g===this.hoverValue,[`${d}-active`]:this.hasHalf&&g===this.hoverValue,[`${d}-zero`]:g>this.hoverValue,[`${d}-focused`]:this.hasHalf&&g===this.hoverValue&&this.isFocused}})}writeValue(c){this.nzValue=c||0,this.updateStarArray(),this.cdr.markForCheck()}setDisabledState(c){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||c,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}registerOnChange(c){this.onChange=c}registerOnTouched(c){this.onTouched=c}}return(l=m).\u0275fac=function(c){return new(c||l)(r.Y36(v.jY),r.Y36(r.R0b),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(M.Is,8),r.Y36(j.kn))},l.\u0275cmp=r.Xpm({type:l,selectors:[["nz-rate"]],viewQuery:function(c,d){if(1&c&&r.Gf(U,7),2&c){let g;r.iGM(g=r.CRH())&&(d.ulElement=g.first)}},inputs:{nzAllowClear:"nzAllowClear",nzAllowHalf:"nzAllowHalf",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzCharacter:"nzCharacter",nzCount:"nzCount",nzTooltips:"nzTooltips"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[r._Bn([j.kn,{provide:T.JU,useExisting:(0,r.Gpc)(()=>l),multi:!0}]),r.TTD],decls:3,vars:7,consts:[[1,"ant-rate",3,"ngClass","tabindex","keydown","mouseleave"],["ulElement",""],["class","ant-rate-star","nz-tooltip","",3,"ngClass","nzTooltipTitle",4,"ngFor","ngForOf"],["nz-tooltip","",1,"ant-rate-star",3,"ngClass","nzTooltipTitle"],["nz-rate-item","",3,"allowHalf","character","index","itemHover","itemClick"]],template:function(c,d){1&c&&(r.TgZ(0,"ul",0,1),r.NdJ("keydown",function(P){return d.onKeyDown(P),P.preventDefault()})("mouseleave",function(P){return d.onRateLeave(),P.stopPropagation()}),r.YNc(2,k,2,5,"li",2),r.qZA()),2&c&&(r.ekj("ant-rate-disabled",d.nzDisabled)("ant-rate-rtl","rtl"===d.dir),r.Q6J("ngClass",d.classMap)("tabindex",d.nzDisabled?-1:1),r.xp6(2),r.Q6J("ngForOf",d.starArray))},dependencies:[C.mk,C.sg,b.SY,L],encapsulation:2,changeDetection:0}),(0,p.gn)([(0,v.oS)(),(0,z.yF)()],m.prototype,"nzAllowClear",void 0),(0,p.gn)([(0,v.oS)(),(0,z.yF)()],m.prototype,"nzAllowHalf",void 0),(0,p.gn)([(0,z.yF)()],m.prototype,"nzDisabled",void 0),(0,p.gn)([(0,z.yF)()],m.prototype,"nzAutoFocus",void 0),(0,p.gn)([(0,z.Rn)()],m.prototype,"nzCount",void 0),m})(),f=(()=>{var l;class m{}return(l=m).\u0275fac=function(c){return new(c||l)},l.\u0275mod=r.oAB({type:l}),l.\u0275inj=r.cJS({imports:[M.vT,C.ez,O.PV,b.cg]}),m})()}}]);