"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[469],{36469:(H,U,s)=>{s.r(U),s.d(U,{AuthModule:()=>xe});var C=s(96814),r=s(35420),_=s(15861),l=s(60095),b=s(69649),v=s(21406),y=s(86408),w=s(27782),e=s(65879),A=s(90586),E=s(18218),I=s(32333),T=s(10095),f=s(3599),z=s(20824),R=s(62595),S=s(42840),O=s(70855),k=s(41958),J=s(62612);const u=["emailInput"];function m(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"span",22),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.passwordVisible=!n.passwordVisible)}),e.qZA()}if(2&o){const i=e.oxw(2);e.Q6J("nzType",i.passwordVisible?"eye-invisible":"eye")}}const d=function(){return["/auth/reset-password"]},g=function(){return["/auth/signup"]};function h(o,c){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3),e._uU(4," Log Into your account. "),e.qZA(),e.TgZ(5,"form",4),e.NdJ("submit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.login())}),e.TgZ(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-input-group",6),e._UZ(9,"input",7,8),e.qZA()()(),e.TgZ(11,"nz-form-item")(12,"nz-form-control",5)(13,"nz-input-group",9),e._UZ(14,"input",10),e.qZA(),e.YNc(15,m,1,1,"ng-template",null,11,e.W1O),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"label",14),e.NdJ("nzCheckedChange",function(n){e.CHM(i);const a=e.oxw();return e.KtG(a.rememberMeChange(n))}),e.TgZ(20,"span"),e._uU(21,"Remember me"),e.qZA()()(),e.TgZ(22,"div",13)(23,"a",15),e._uU(24,"Forgot password?"),e.qZA()()(),e.TgZ(25,"button",16),e._uU(26," Log in "),e.qZA(),e.TgZ(27,"div",17),e._uU(28," OR "),e.qZA(),e.TgZ(29,"button",18),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.signInWithGoogle())}),e._UZ(30,"img",19),e._uU(31," Sign in with Google "),e.qZA(),e._UZ(32,"nz-form-item"),e.TgZ(33,"nz-form-item",20)(34,"nz-form-control")(35,"p",20),e._uU(36," Don\u2019t have an account? "),e.TgZ(37,"a",21),e._uU(38,"Sign Up"),e.qZA()()()()(),e.BQk()}if(2&o){const i=e.MAs(16),t=e.oxw();e.xp6(2),e.Q6J("ngSrc","/assets/images/wl-logo.png"),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("nzErrorTip","Please input your email!"),e.xp6(1),e.Q6J("nzPrefixIcon","user")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","email"),e.xp6(3),e.Q6J("nzErrorTip","Please input your Password!"),e.xp6(1),e.Q6J("nzSuffix",i)("nzPrefixIcon","lock")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","password")("type",t.passwordVisible?"text":"password"),e.xp6(4),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("formControlName","remember"),e.xp6(3),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("routerLink",e.DdM(26,d)),e.xp6(2),e.Q6J("nzLoading",t.loading)("nzType","primary")("nzBlock",!0)("nzSize","large"),e.xp6(4),e.Q6J("nzLoading",t.loadingGoogle)("nzType","default")("nzBlock",!0)("nzSize","large"),e.xp6(1),e.Q6J("ngSrc","/assets/images/google-icon.png"),e.xp6(7),e.Q6J("routerLink",e.DdM(27,g))}}let Z=(()=>{var o;class c{set projectId(t){t?localStorage.setItem(v.H4,t):localStorage.removeItem(v.H4)}get projectId(){return localStorage.getItem(v.H4)}constructor(t,n,a,p,x,M,L){this.app=t,this.router=n,this.api=a,this.auth=p,this.route=x,this.fb=M,this.ngZone=L,this.validating=!0,this.loading=!1,this.passwordVisible=!1,this.loadingGoogle=!1,this.teamId=null,this.app.setTitle("Login"),this.teamId=this.route.snapshot.queryParamMap.get("team"),this.projectId=this.route.snapshot.queryParamMap.get("project"),this.form=this.fb.group({email:[null,[l.kI.required,l.kI.email]],password:[null,[l.kI.required]],remember:[!1]})}get teamIdQueryParam(){const t=[`team=${this.teamId}`];return this.projectId&&t.push(`project=${this.projectId}`),this.teamId?`?${t.join("&")}`:""}ngOnInit(){var t=this;return(0,_.Z)(function*(){const n=t.auth.getCurrentSession();!n||n.setup_completed?(yield t.authorize())||(y.s.track(w.h),t.validating=!1):t.router.navigate(["/worklenz/setup"])})()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.emailInput?.nativeElement.focus()},250)})}authorize(){var t=this;return(0,_.Z)(function*(){try{const n=yield t.api.authorize();return!!n.authenticated&&(t.auth.setCurrentSession(n.user),yield t.router.navigate(["/worklenz/home"]),!0)}catch(n){return(0,b.tu)(n),!1}})()}login(){var t=this;return(0,_.Z)(function*(){if(!t.loading)if(t.form.valid){y.s.track(w.Yi),t.loading=!0;try{yield t.api.login({email:t.form.controls.email.value,password:t.form.controls.password.value,team_id:t.teamId||void 0,project_id:t.projectId||void 0});const n=yield t.authorize();t.loading=!1,n?yield t.router.navigate(["/authenticate"]):t.app.notify("Login failed!","Please check your email & password and retry.",!1)}catch(n){(0,b.tu)(n),t.loading=!1,t.app.notify("Login failed!","An unknown error has occurred. Please try again.",!1)}}else Object.values(t.form.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})})()}signInWithGoogle(){this.loadingGoogle||(this.loadingGoogle=!0,y.s.track(w.tm),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{window.location.href=`/secure/google${this.teamIdQueryParam}`},1e3)}))}rememberMeChange(t){y.s.track(w.MP,{checked:t})}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(A.z),e.Y36(r.F0),e.Y36(E.Q),e.Y36(I.e),e.Y36(r.gz),e.Y36(l.qu),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["worklenz-login"]],viewQuery:function(t,n){if(1&t&&e.Gf(u,5),2&t){let a;e.iGM(a=e.CRH())&&(n.emailInput=a.first)}},decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center"],["alt","Worklenz Logo","height","50","width","235",3,"ngSrc"],[1,"text-muted","mb-4","mt-1","text-center"],["nz-form","",1,"login-form",3,"formGroup","submit"],[3,"nzErrorTip"],[3,"nzPrefixIcon","nzSize"],["nz-input","","placeholder","Email","type","email",3,"formControlName"],["emailInput",""],[3,"nzSuffix","nzPrefixIcon","nzSize"],["nz-input","","placeholder","Password",3,"formControlName","type"],["suffixTemplate",""],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","",3,"formControlName","nzCheckedChange"],[1,"login-form-forgot",3,"routerLink"],["nz-button","",1,"mt-1",3,"nzLoading","nzType","nzBlock","nzSize"],[1,"text-center","mt-2"],["nz-button","","type","button",1,"mt-1",3,"nzLoading","nzType","nzBlock","nzSize","click"],["alt","Worklenz","width","18","height","18",1,"me-2",3,"ngSrc"],[1,"mb-0"],["rel","noopener",3,"routerLink"],["nz-icon","",3,"nzType","click"]],template:function(t,n){1&t&&e.YNc(0,h,39,28,"ng-container",0),2&t&&e.Q6J("ngIf",!n.validating)},dependencies:[C.O5,r.rH,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.t3,T.SK,f.Lr,f.Nx,f.Fd,z.Zp,z.gB,z.ke,R.Ls,S.ix,O.w,k.dQ,J.Ie,C.Zd],styles:[".login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]}),c})();var P=s(78645);const Q=new e.OlP("recaptcha-language"),N=new e.OlP("recaptcha-base-url"),K=new e.OlP("recaptcha-nonce-tag"),F=(new e.OlP("recaptcha-settings"),new e.OlP("recaptcha-v3-site-key")),$_loadScript=function W(o,c,i,t,n){window.ng2recaptchaloaded=()=>{c(grecaptcha)};const a=document.createElement("script");a.innerHTML="",a.src=`${t||"https://www.google.com/recaptcha/api.js"}?render=${o}&onload=ng2recaptchaloaded${i}`,n&&a.setAttribute("nonce",n),a.async=!0,a.defer=!0,document.head.appendChild(a)};let Y=(()=>{var o;class c{constructor(t,n,a,p,x,M){this.onLoadComplete=L=>{this.grecaptcha=L,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([B,D])=>this.executeActionWithSubject(B,D)),this.actionBacklog=void 0)},this.zone=t,this.isBrowser=(0,C.NF)(a),this.siteKey=n,this.nonce=x,this.language=M,this.baseUrl=p,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new P.x,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new P.x,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(t){const n=new P.x;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(t,n):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([t,n]))),n.asObservable()}executeActionWithSubject(t,n){const a=p=>{this.zone.run(()=>{n.error(p),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:t,error:p})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:t}).then(p=>{this.zone.run(()=>{n.next(p),n.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:t,token:p})})},a)}catch(p){a(p)}})}init(){this.isBrowser&&("grecaptcha"in window?this.grecaptcha=grecaptcha:$_loadScript(this.siteKey,this.onLoadComplete,this.language?"&hl="+this.language:"",this.baseUrl,this.nonce))}}return(o=c).\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG(F),e.LFG(e.Lbi),e.LFG(N,8),e.LFG(K,8),e.LFG(Q,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),c})(),X=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Y]}),c})();var V=s(69862),j=s(8083),G=s(82669);const ee=["nameInput"];function te(o,c){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.hij("(",i.passwordStrength.text,")")}}function ne(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.passwordVisible=!n.passwordVisible)}),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("nzType",i.passwordVisible?"eye-invisible":"eye")}}function oe(o,c){if(1&o&&(e.TgZ(0,"span",28),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.Q6J("nzType","secondary"),e.xp6(1),e.Oqu(i.passwordPolicy)}}const re=function(){return["/auth/login"]};let ie=(()=>{var o;class c{set projectId(t){t?localStorage.setItem(v.H4,t):localStorage.removeItem(v.H4)}get projectId(){return localStorage.getItem(v.H4)}get hasPassword(){return this.form.controls.password.valid}constructor(t,n,a,p,x,M,L,B){this.app=t,this.router=n,this.fb=a,this.api=p,this.route=x,this.ngZone=M,this.recaptchaV3Service=L,this.http=B,this.loading=!1,this.validating=!1,this.passwordVisible=!1,this.loadingGoogle=!1,this.email=null,this.name=null,this.teamId=null,this.teamMemberId=null,this.passwordStrength=null,this.passwordPolicy=v.QW,this.model=null,this.captchaResponse="",this.app.setTitle("Signup"),y.s.track(w.ge),this.email=this.route.snapshot.queryParamMap.get("email"),this.name=this.route.snapshot.queryParamMap.get("name"),this.teamId=this.route.snapshot.queryParamMap.get("team"),this.teamMemberId=this.route.snapshot.queryParamMap.get("user"),this.projectId=this.route.snapshot.queryParamMap.get("project"),this.form=this.fb.group({name:[this.name,[l.kI.required]],email:[this.email,[l.kI.required,l.kI.email]],password:[null,[l.kI.required]]}),this.form.controls.password.valueChanges.subscribe(D=>{this.checkPasswordStrength(D)})}get invitationQueryParams(){const t=[`team=${this.teamId}`,`teamMember=${this.teamMemberId}`];return this.projectId&&t.push(`project=${this.projectId}`),this.teamId&&this.teamMemberId?`?${t.join("&")}`:""}ngAfterViewInit(){this.checkPasswordStrength(this.form.value.password),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.nameInput?.nativeElement.focus()},250)})}onSubmit(){var t=this;try{this.recaptchaV3Service.execute("submitAction").subscribe(function(){var n=(0,_.Z)(function*(a){(yield t.api.verifyCaptcha(a)).done&&t.validate()});return function(a){return n.apply(this,arguments)}}())}catch(n){console.error("reCAPTCHA verification failed",n)}}validate(){var t=this;return(0,_.Z)(function*(){if(!t.validating)if(t.form.valid){t.validating=!0;try{const n={name:t.form.controls.name.value,email:t.form.controls.email.value,password:t.form.controls.password.value},a=yield t.api.signupCheck(n);t.validating=!1,a.done&&(t.model=n,t.signupWithEmail())}catch(n){(0,b.tu)(n),t.validating=!1,t.app.notify("Signup failed!","An unknown error has occurred. Please try again.",!1)}}else t.app.displayErrorsOf(t.form)})()}signUpWithGoogle(){this.loadingGoogle=!0,y.s.track(w.Pb),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{window.location.href=`/secure/google${this.invitationQueryParams}`},1e3)})}signupWithEmail(){var t=this;return(0,_.Z)(function*(){if(!t.loading&&t.model)try{t.loading=!0,t.model.team_name=t.model?.name,t.teamId&&(t.model.team_id=t.teamId),t.teamMemberId&&(t.model.team_member_id=t.teamMemberId),t.projectId&&(t.model.project_id=t.projectId),yield t.api.signup(t.model),(yield t.api.authorize()).authenticated&&(y.s.track(w._A),yield t.router.navigate(["/authenticate"])),t.loading=!1}catch{t.loading=!1}})()}checkPasswordStrength(t){var n=this;return(0,_.Z)(function*(){try{const a=yield n.api.checkPasswordStrength(t);a.done&&(n.passwordStrength=a.body)}catch{}})()}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(A.z),e.Y36(r.F0),e.Y36(l.qu),e.Y36(E.Q),e.Y36(r.gz),e.Y36(e.R0b),e.Y36(Y),e.Y36(V.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["worklenz-signup"]],viewQuery:function(t,n){if(1&t&&e.Gf(ee,5),2&t){let a;e.iGM(a=e.CRH())&&(n.nameInput=a.first)}},decls:54,vars:28,consts:[[1,"text-center"],["alt","Worklenz","height","50","width","235",3,"ngSrc"],[1,"text-muted","mb-4","mt-1","text-center"],[3,"nzSpinning"],["nz-form","",1,"login-form",3,"formGroup","submit"],[3,"nzErrorTip"],["for","full-name",1,"d-block","mb-1"],[3,"nzPrefixIcon","nzSize"],["id","full-name","nz-input","","placeholder","Enter your full name","type","text",3,"formControlName"],["nameInput",""],["for","email",1,"d-block","mb-1"],["id","email","nz-input","","placeholder","Enter your email","type","email",3,"formControlName"],[3,"nzErrorTip","nzExtra"],["for","password",1,"d-block","mb-1"],[4,"ngIf"],[3,"nzSuffix","nzPrefixIcon","nzSize"],["nz-input","","id","password","placeholder","Enter a strong password",3,"formControlName","type"],["suffixTemplate",""],["passwordNote",""],[1,"mb-0"],["href","/privacy-policy","target","_blank","rel","noopener"],["href","/terms-of-use"],["nz-button","","nzBlock","",1,"mt-1",3,"nzLoading","nzType","nzSize"],[1,"text-center","mt-2"],["nz-button","","nzBlock","","type","button",1,"mt-1",3,"nzLoading","nzType","nzSize","click"],["alt","Worklenz","width","18","height","18",1,"me-2",3,"ngSrc"],["rel","noopener",3,"routerLink"],["nz-icon","",3,"nzType","click"],["nz-typography","",2,"font-size","12px",3,"nzType"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.qZA(),e.TgZ(2,"div",2),e._uU(3,"Create your account."),e.qZA(),e.TgZ(4,"nz-spin",3)(5,"form",4),e.NdJ("submit",function(){return n.validate()}),e.TgZ(6,"nz-form-item")(7,"nz-form-control",5)(8,"label",6),e._uU(9,"Full name"),e.qZA(),e.TgZ(10,"nz-input-group",7),e._UZ(11,"input",8,9),e.qZA()()(),e.TgZ(13,"nz-form-item")(14,"nz-form-control",5)(15,"label",10),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"nz-input-group",7),e._UZ(18,"input",11),e.qZA()()(),e.TgZ(19,"nz-form-item")(20,"nz-form-control",12)(21,"label",13),e._uU(22," Password "),e.YNc(23,te,2,1,"span",14),e.qZA(),e.TgZ(24,"nz-input-group",15),e._UZ(25,"input",16),e.qZA(),e.YNc(26,ne,1,1,"ng-template",null,17,e.W1O),e.qZA()(),e.YNc(28,oe,2,2,"ng-template",null,18,e.W1O),e.TgZ(30,"nz-form-item")(31,"nz-form-control")(32,"p",19),e._uU(33," By signing up, you will agree to our "),e.TgZ(34,"a",20),e._uU(35,"Privacy Policy"),e.qZA(),e._uU(36," and "),e.TgZ(37,"a",21),e._uU(38,"Terms of Use"),e.qZA(),e._uU(39,". "),e.qZA()()(),e.TgZ(40,"button",22),e._uU(41,"Sign up "),e.qZA(),e.TgZ(42,"div",23),e._uU(43,"OR"),e.qZA(),e.TgZ(44,"button",24),e.NdJ("click",function(){return n.signUpWithGoogle()}),e._UZ(45,"img",25),e._uU(46," Sign up with Google "),e.qZA(),e._UZ(47,"nz-form-item"),e.TgZ(48,"nz-form-item",19)(49,"nz-form-control")(50,"p",19),e._uU(51," Already have an account? "),e.TgZ(52,"a",26),e._uU(53,"Log In"),e.qZA()()()()()()),2&t){const a=e.MAs(27),p=e.MAs(29);e.xp6(1),e.Q6J("ngSrc","/assets/images/wl-logo.png"),e.xp6(3),e.Q6J("nzSpinning",n.loading||n.validating),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("nzErrorTip","Please input your name!"),e.xp6(3),e.Q6J("nzPrefixIcon","user")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","name"),e.xp6(3),e.Q6J("nzErrorTip","Please input your email!"),e.xp6(3),e.Q6J("nzPrefixIcon","mail")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","email"),e.xp6(2),e.Q6J("nzErrorTip","Please input your Password!")("nzExtra",p),e.xp6(3),e.Q6J("ngIf",n.hasPassword&&n.passwordStrength),e.xp6(1),e.Q6J("nzSuffix",a)("nzPrefixIcon","lock")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","password")("type",n.passwordVisible?"text":"password"),e.xp6(15),e.Q6J("nzLoading",n.loading)("nzType","primary")("nzSize","large"),e.xp6(4),e.Q6J("nzLoading",n.loadingGoogle)("nzType","default")("nzSize","large"),e.xp6(1),e.Q6J("ngSrc","/assets/images/google-icon.png"),e.xp6(7),e.Q6J("routerLink",e.DdM(27,re))}},dependencies:[C.O5,r.rH,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.t3,T.SK,f.Lr,f.Nx,f.Fd,z.Zp,z.gB,z.ke,R.Ls,S.ix,O.w,k.dQ,j.ZU,G.W,C.Zd]}),c})(),ae=(()=>{var o;class c{constructor(t,n,a,p){this.auth=t,this.router=n,this.route=a,this.app=p;const x=this.route.snapshot.queryParamMap.get("error");x&&(this.displayError(x),this.removeErrorQueryParam())}ngOnInit(){var t=this;return(0,_.Z)(function*(){t.auth.isAuthenticated()&&(yield t.router.navigate(["/worklenz"]))})()}displayError(t){this.app.notify("Authentication failed!",t,!1)}removeErrorQueryParam(){this.router.navigate([],{relativeTo:this.route,queryParams:{}})}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(I.e),e.Y36(r.F0),e.Y36(r.gz),e.Y36(A.z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["worklenz-layout"]],decls:10,vars:0,consts:[[1,"justify-content-center","py-5","position-relative"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-12","col-sm-8","col-xl-3","mx-auto","pe-5","ps-5","my-5","bg-white","w-360","border-radius-4"],[1,"row"],[1,"col-md-12"],[1,"py-5"],["aria-labelledby","auth-tab-content"],[1,"bg-ant-grey"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"router-outlet"),e.qZA()()()()()(),e._UZ(8,"div",7),e.qZA(),e._UZ(9,"div",7))},dependencies:[r.lC],styles:[".bg-ant-grey[_ngcontent-%COMP%]{background:#FAFAFA;position:absolute;inset:0;z-index:0}.w-360[_ngcontent-%COMP%]{width:450px;z-index:1}.border-radius-4[_ngcontent-%COMP%]{border:1px solid #FAFAFA;border-radius:4px}@media (max-width: 660px){.w-360[_ngcontent-%COMP%]{width:90%}}"]}),c})();var q=s(65797);const se=["emailInput"];function le(o,c){1&o&&e._UZ(0,"nz-result",11)}const ce=function(){return["/auth/login"]};function ue(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"div")(1,"div",12),e._uU(2," Please enter your email address. You will receive a link to create a new password via email. "),e.qZA(),e.TgZ(3,"div",13)(4,"form",14),e.NdJ("submit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.resetPassword())}),e.TgZ(5,"nz-form-item")(6,"nz-form-control",15)(7,"nz-input-group",16),e._UZ(8,"input",17,18),e.qZA()()(),e.TgZ(10,"button",19),e._uU(11," Reset Password "),e.qZA(),e.TgZ(12,"div",20),e._uU(13," OR "),e.qZA(),e.TgZ(14,"button",21),e._uU(15," Return to Login "),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("formControlName","email"),e.xp6(2),e.Q6J("nzLoading",i.loading)("nzType","primary"),e.xp6(4),e.Q6J("routerLink",e.DdM(6,ce))("nzType","default")}}function de(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"span",20),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.passwordVisible=!n.passwordVisible)}),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("nzType",i.passwordVisible?"eye-invisible":"eye")}}function me(o,c){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.Q6J("nzType","secondary"),e.xp6(1),e.Oqu(i.passwordPolicy)}}const ge=function(){return["/auth/reset-password"]},he=[{path:"",component:ae,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Z},{path:"signup",component:ie}]},{path:"",children:[{path:"reset-password",component:(()=>{var o;class c{constructor(t,n,a,p,x,M){this.app=t,this.router=n,this.api=a,this.auth=p,this.route=x,this.fb=M,this.loading=!1,this.informationSent=!1,this.teamId=null,this.app.setTitle("Reset Password"),y.s.track(w.Hr),this.teamId=this.route.snapshot.queryParamMap.get("team"),this.form=this.fb.group({email:[null,[l.kI.required,l.kI.email]]})}ngOnInit(){var t=this;return(0,_.Z)(function*(){yield t.authorize()})()}authorize(){var t=this;return(0,_.Z)(function*(){try{const n=yield t.api.authorize();return!!n.authenticated&&(t.auth.setCurrentSession(n.user),yield t.router.navigate(["/worklenz/home"]),!0)}catch(n){return(0,b.tu)(n),!1}})()}resetPassword(){var t=this;return(0,_.Z)(function*(){if(!t.loading)if(t.form.valid){t.loading=!0;try{(yield t.api.resetPassword({email:t.form.controls.email.value})).done&&(t.informationSent=!0),t.loading=!1}catch(n){(0,b.tu)(n),t.loading=!1,t.app.notify("Reset password failed!","An unknown error has occurred. Please try again.",!1)}}else t.app.displayErrorsOf(t.form)})()}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(A.z),e.Y36(r.F0),e.Y36(E.Q),e.Y36(I.e),e.Y36(r.gz),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["worklenz-reset-password"]],viewQuery:function(t,n){if(1&t&&e.Gf(se,5),2&t){let a;e.iGM(a=e.CRH())&&(n.emailInput=a.first)}},decls:11,vars:3,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-5","col-sm-8","col-xl-3","mx-auto","pe-5","ps-5"],[1,"w-360"],[1,"row"],[1,"col-md-12"],[1,"py-5"],[1,"text-center"],["alt","Worklenz","height","50","width","235",3,"ngSrc"],["nzStatus","success","nzTitle","Reset instruction sent!","nzSubTitle","Reset information has been sent to your email. Please check your email.",4,"ngIf"],[4,"ngIf"],["nzStatus","success","nzTitle","Reset instruction sent!","nzSubTitle","Reset information has been sent to your email. Please check your email."],[1,"text-muted","mb-4","mt-1","text-center"],["aria-labelledby","auth-tab-content"],["nz-form","",1,"login-form",3,"formGroup","submit"],["nzErrorTip","Please enter your email!"],["nzPrefixIcon","user","nzSize","large"],["nz-input","","placeholder","Enter your email","type","email",3,"formControlName"],["emailInput",""],["nz-button","","nzBlock","","nzSize","large",1,"mt-1",3,"nzLoading","nzType"],[1,"text-center","mt-2"],["nz-button","","nzBlock","","nzSize","large","type","button",1,"mt-1",3,"routerLink","nzType"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.YNc(9,le,1,0,"nz-result",9),e.YNc(10,ue,16,7,"div",10),e.qZA()()()()()()()),2&t&&(e.xp6(8),e.Q6J("ngSrc","/assets/images/wl-logo.png"),e.xp6(1),e.Q6J("ngIf",n.informationSent),e.xp6(1),e.Q6J("ngIf",!n.informationSent))},dependencies:[C.O5,r.rH,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.t3,T.SK,f.Lr,f.Nx,f.Fd,z.Zp,z.gB,S.ix,O.w,k.dQ,q.ml,C.Zd]}),c})()},{path:"verify-reset-email/:user/:hash",component:(()=>{var o;class c{constructor(t,n,a,p,x){this.app=t,this.api=n,this.fb=a,this.route=p,this.router=x,this.hash="",this.user="",this.loading=!1,this.passwordVisible=!1,this.validating=!1,this.model={},this.passwordPolicy=v.QW,this.app.setTitle("Reset Password"),this.form=this.fb.group({password:[null,[l.kI.required]]})}ngOnInit(){this.route.paramMap.subscribe(t=>{this.hash=t.get("hash")||"",this.user=t.get("user")||""})}resetPassword(){var t=this;return(0,_.Z)(function*(){if(!t.validating)if(t.form.valid){t.validating=!0;try{const n={password:t.form.controls.password.value,hash:t.hash,user:t.user};(yield t.api.updateNewPassword(n)).done&&(yield t.router.navigate(["/auth/login"])),t.validating=!1}catch(n){(0,b.tu)(n),t.validating=!1,t.app.notify("Reset password failed!","An unknown error has occurred. Please try again.",!1)}}else t.app.displayErrorsOf(t.form)})()}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(A.z),e.Y36(E.Q),e.Y36(l.qu),e.Y36(r.gz),e.Y36(r.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["worklenz-verify-reset-email"]],decls:27,vars:10,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-5","col-sm-8","col-xl-3","mx-auto","pe-5","ps-5"],[1,"w-360"],[1,"row"],[1,"col-md-12"],[1,"py-5"],[1,"text-center"],["alt","Worklenz","height","50","src","/assets/images/logo.png"],[1,"text-muted","mb-4","mt-1","text-center"],["aria-labelledby","auth-tab-content"],["nz-form","",1,"login-form",3,"formGroup","submit"],["nzErrorTip","Please input your Password!",3,"nzExtra"],["nzPrefixIcon","lock","nzSize","large",3,"nzSuffix"],["nz-input","","placeholder","Enter your new password",3,"formControlName","type"],["suffixTemplate",""],["passwordNote",""],["nz-button","","nzBlock","","nzSize","large",1,"mt-1",3,"nzLoading","nzType"],[1,"text-center","mt-2"],["nz-button","","nzBlock","","nzSize","large","type","button",1,"mt-1",3,"routerLink","nzType"],["nz-icon","",3,"nzType","click"],["nz-typography","",2,"font-size","12px",3,"nzType"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9),e._uU(10," Enter your new password "),e.qZA(),e.TgZ(11,"div",10)(12,"form",11),e.NdJ("submit",function(){return n.resetPassword()}),e.TgZ(13,"nz-form-item")(14,"nz-form-control",12)(15,"nz-input-group",13),e._UZ(16,"input",14),e.qZA(),e.YNc(17,de,1,1,"ng-template",null,15,e.W1O),e.qZA()(),e.YNc(19,me,2,2,"ng-template",null,16,e.W1O),e.TgZ(21,"button",17),e._uU(22," Reset Password "),e.qZA(),e.TgZ(23,"div",18),e._uU(24," OR "),e.qZA(),e.TgZ(25,"button",19),e._uU(26," Resend reset email "),e.qZA()()()()()()()()()()),2&t){const a=e.MAs(18),p=e.MAs(20);e.xp6(12),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("nzExtra",p),e.xp6(1),e.Q6J("nzSuffix",a),e.xp6(1),e.Q6J("formControlName","password")("type",n.passwordVisible?"text":"password"),e.xp6(5),e.Q6J("nzLoading",n.loading)("nzType","primary"),e.xp6(4),e.Q6J("routerLink",e.DdM(9,ge))("nzType","default")}},dependencies:[r.rH,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.t3,T.SK,f.Lr,f.Nx,f.Fd,z.Zp,z.gB,z.ke,R.Ls,S.ix,O.w,k.dQ,j.ZU]}),c})()},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let fe=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[r.Bz.forChild(he),r.Bz]}),c})();var _e=s(79382),ve=s(96109),ze=s(57417),ye=s(48128);let xe=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:F,useValue:"6LeUWjYqAAAAAFhi9Z8KPeiix3RRjxoZtJhLJZXb"}],imports:[C.ez,fe,l.u5,l.UX,f.U5,z.o7,R.PV,S.sL,J.Wr,j.ZJ,_e.we,ve.cg,G.j,q.XD,ze.$6,ye.W,V.JF,X]}),c})()},57417:(H,U,s)=>{s.d(U,{$6:()=>J,lU:()=>O});var C=s(97582),r=s(65879),_=s(64194),l=s(40874),b=s(27754),v=s(96109),y=s(331),w=s(49388),e=s(96814),A=s(69594),E=s(8324),I=s(85448);function T(u,m){if(1&u&&(r.ynx(0),r._uU(1),r.BQk()),2&u){const d=r.oxw(3);r.xp6(1),r.Oqu(d.nzTitle)}}function f(u,m){if(1&u&&(r.TgZ(0,"div",10),r.YNc(1,T,2,1,"ng-container",9),r.qZA()),2&u){const d=r.oxw(2);r.xp6(1),r.Q6J("nzStringTemplateOutlet",d.nzTitle)}}function z(u,m){if(1&u&&(r.ynx(0),r._uU(1),r.BQk()),2&u){const d=r.oxw(2);r.xp6(1),r.Oqu(d.nzContent)}}function R(u,m){if(1&u&&(r.TgZ(0,"div",2)(1,"div",3)(2,"div",4),r._UZ(3,"span",5),r.qZA(),r.TgZ(4,"div",6)(5,"div"),r.YNc(6,f,2,1,"div",7),r.TgZ(7,"div",8),r.YNc(8,z,2,1,"ng-container",9),r.qZA()()()()()),2&u){const d=r.oxw();r.ekj("ant-popover-rtl","rtl"===d.dir),r.Q6J("ngClass",d._classMap)("ngStyle",d.nzOverlayStyle)("@.disabled",!(null==d.noAnimation||!d.noAnimation.nzNoAnimation))("nzNoAnimation",null==d.noAnimation?null:d.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),r.xp6(6),r.Q6J("ngIf",d.nzTitle),r.xp6(2),r.Q6J("nzStringTemplateOutlet",d.nzContent)}}let O=(()=>{var u;class m extends v.Mg{getProxyPropertyMap(){return{nzPopoverBackdrop:["nzBackdrop",()=>this.nzPopoverBackdrop],...super.getProxyPropertyMap()}}constructor(g,h,Z,P,Q,N){super(g,h,Z,P,Q,N),this._nzModuleName="popover",this.trigger="hover",this.placement="top",this.nzPopoverBackdrop=!1,this.visibleChange=new r.vpe,this.componentRef=this.hostView.createComponent(k)}}return(u=m).\u0275fac=function(g){return new(g||u)(r.Y36(r.SBq),r.Y36(r.s_b),r.Y36(r._Vd),r.Y36(r.Qsj),r.Y36(y.P,9),r.Y36(l.jY))},u.\u0275dir=r.lG2({type:u,selectors:[["","nz-popover",""]],hostVars:2,hostBindings:function(g,h){2&g&&r.ekj("ant-popover-open",h.visible)},inputs:{arrowPointAtCenter:["nzPopoverArrowPointAtCenter","arrowPointAtCenter"],title:["nzPopoverTitle","title"],content:["nzPopoverContent","content"],directiveTitle:["nz-popover","directiveTitle"],trigger:["nzPopoverTrigger","trigger"],placement:["nzPopoverPlacement","placement"],origin:["nzPopoverOrigin","origin"],visible:["nzPopoverVisible","visible"],mouseEnterDelay:["nzPopoverMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopoverMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopoverOverlayClassName","overlayClassName"],overlayStyle:["nzPopoverOverlayStyle","overlayStyle"],nzPopoverBackdrop:"nzPopoverBackdrop"},outputs:{visibleChange:"nzPopoverVisibleChange"},exportAs:["nzPopover"],features:[r.qOj]}),(0,C.gn)([(0,b.yF)()],m.prototype,"arrowPointAtCenter",void 0),(0,C.gn)([(0,l.oS)()],m.prototype,"nzPopoverBackdrop",void 0),m})(),k=(()=>{var u;class m extends v.XK{constructor(g,h,Z){super(g,h,Z),this._prefix="ant-popover"}get hasBackdrop(){return"click"===this.nzTrigger&&this.nzBackdrop}isEmpty(){return(0,v.pu)(this.nzTitle)&&(0,v.pu)(this.nzContent)}}return(u=m).\u0275fac=function(g){return new(g||u)(r.Y36(r.sBO),r.Y36(w.Is,8),r.Y36(y.P,9))},u.\u0275cmp=r.Xpm({type:u,selectors:[["nz-popover"]],exportAs:["nzPopoverComponent"],features:[r.qOj],decls:2,vars:6,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-popover",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-arrow-content"],["role","tooltip",1,"ant-popover-inner"],["class","ant-popover-title",4,"ngIf"],[1,"ant-popover-inner-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-title"]],template:function(g,h){1&g&&(r.YNc(0,R,9,9,"ng-template",0,1,r.W1O),r.NdJ("overlayOutsideClick",function(P){return h.onClickOutside(P)})("detach",function(){return h.hide()})("positionChange",function(P){return h.onPositionChange(P)})),2&g&&r.Q6J("cdkConnectedOverlayHasBackdrop",h.hasBackdrop)("cdkConnectedOverlayOrigin",h.origin)("cdkConnectedOverlayPositions",h._positions)("cdkConnectedOverlayOpen",h._visible)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",h.nzArrowPointAtCenter)},dependencies:[e.mk,e.O5,e.PC,A.pI,E.f,I.hQ,y.P],encapsulation:2,data:{animation:[_.$C]},changeDetection:0}),m})(),J=(()=>{var u;class m{}return(u=m).\u0275fac=function(g){return new(g||u)},u.\u0275mod=r.oAB({type:u}),u.\u0275inj=r.cJS({imports:[w.vT,e.ez,A.U8,E.T,I.e4,y.g,v.cg]}),m})()}}]);