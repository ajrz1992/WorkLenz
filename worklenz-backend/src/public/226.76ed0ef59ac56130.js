"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[226],{63106:(G,j,r)=>{r.d(j,{I:()=>L});var t=r(65879),A=r(26254),C=r(62595),M=r(92574),Z=r(42840),k=r(96814),D=r(60095),S=r(62612),x=r(62787),m=r(21406),f=r(52682),e=r(3599),H=r(16676),_=r.n(H),O=r(42012),R=r(70855),Y=r(41958),v=r(73460);function J(c,p){if(1&c){const d=t.EpF();t.TgZ(0,"button",13)(1,"label",14),t.NdJ("ngModelChange",function(u){t.CHM(d);const T=t.oxw(2);return t.KtG(T.includeArchived=u)})("ngModelChange",function(u){t.CHM(d);const T=t.oxw(2);return t.KtG(T.onArchiveChange(u))}),t._uU(2," Include Archived Projects "),t.qZA()()}if(2&c){const d=t.oxw(2);t.Q6J("ngClass",d.includeArchived?"archived":""),t.xp6(1),t.Q6J("ngModel",d.includeArchived)}}function b(c,p){if(1&c&&(t.ynx(0),t.YNc(1,J,3,2,"button",12),t.BQk()),2&c){const d=t.oxw();t.xp6(1),t.Q6J("ngIf",d.showArchivedToggle)}}function P(c,p){if(1&c&&(t.TgZ(0,"button",17),t._uU(1),t._UZ(2,"span",18),t.qZA()),2&c){const d=t.oxw(3),g=t.MAs(9);t.Q6J("nzDropdownMenu",g)("nzTrigger","click")("nzPlacement","bottomRight"),t.xp6(1),t.hij(" ",d.durationLabel," "),t.xp6(1),t.Q6J("nzType","down")}}function y(c,p){1&c&&(t.ynx(0),t.TgZ(1,"nz-space"),t.YNc(2,P,3,5,"button",16),t.qZA(),t.BQk())}function I(c,p){if(1&c&&(t.TgZ(0,"button",23),t._uU(1," Export "),t._UZ(2,"span",18),t.qZA()),2&c){t.oxw();const d=t.MAs(3),g=t.oxw(2);t.Q6J("nzType","primary")("nzLoading",g.exporting)("nzTrigger","click")("nzDropdownMenu",d)("nzPlacement","bottomRight"),t.xp6(2),t.Q6J("nzType","down")}}function Q(c,p){if(1&c){const d=t.EpF();t.TgZ(0,"li",24),t.NdJ("click",function(){t.CHM(d);const u=t.oxw(3);return t.KtG(u.export())}),t._uU(1,"Excel"),t.qZA()}}function W(c,p){if(1&c){const d=t.EpF();t.TgZ(0,"li",24),t.NdJ("click",function(){t.CHM(d);const u=t.oxw(3);return t.KtG(u.export())}),t._uU(1,"PNG"),t.qZA()}}function U(c,p){if(1&c&&(t.ynx(0),t.YNc(1,I,3,6,"button",19),t.TgZ(2,"nz-dropdown-menu",null,20)(4,"ul",21),t.YNc(5,Q,2,0,"li",22),t.YNc(6,W,2,0,"li",22),t.qZA()(),t.BQk()),2&c){const d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",d.showExport),t.xp6(4),t.Q6J("ngIf",!d.isPngOnly),t.xp6(1),t.Q6J("ngIf",d.isPngOnly)}}function V(c,p){if(1&c&&(t.ynx(0),t.YNc(1,y,3,0,"ng-container",15),t.YNc(2,U,7,3,"ng-container",2),t.BQk()),2&c){const d=t.oxw();t.xp6(1),t.Q6J("ngIf",d.showDuration)}}function N(c,p){if(1&c){const d=t.EpF();t.TgZ(0,"li",25),t.NdJ("click",function(){const T=t.CHM(d).$implicit,w=t.oxw();return t.KtG(w.onDurationChange(T))}),t._uU(1),t.TgZ(2,"small",26),t._uU(3),t.qZA()()}if(2&c){const d=p.$implicit,g=t.oxw();t.Q6J("nzSelected",d.key===(null==g.selectedDuration?null:g.selectedDuration.key)&&!g.dateRange.length),t.xp6(1),t.hij(" ",d.label," "),t.xp6(2),t.hij(" ",d.dates,"")}}const F=function(){return{standalone:!0}};let L=(()=>{var c;class p{get durationLabel(){const g="yy-MM-DD";return 2==this.dateRange.length?`${_()(this.dateRange[0]).format(g)} - ${_()(this.dateRange[1]).format(g)}`:this.selectedDuration?this.selectedDuration.label:"Duration"}get selectedDuration(){return this.api.getDuration()}constructor(g){this.api=g,this.showExport=!0,this.showDuration=!0,this.showArchivedToggle=!0,this.isPngOnly=!1,this.durationChanged=new t.vpe,this.exportFile=new t.vpe,this.isDurationLabelSelected=new t.vpe,this.includeArchived=!1,this.exporting=!1,this.dateRange=[],this.durations=[{label:"Yesterday",key:m.WD,dates:_()().subtract(1,"days").format("MMM,DD YYYY").toString()},{label:"Last 7 days",key:m.ao,dates:_()().subtract(1,"weeks").format("MMM,DD YYYY").toString()+" - "+_()().format("MMM,DD YYYY").toString()},{label:"Last week",key:m.$U,dates:_()().subtract(1,"weeks").startOf("week").format("MMM,DD YYYY").toString()+" - "+_()().subtract(1,"weeks").endOf("week").format("MMM,DD YYYY").toString()},{label:"Last 30 days",key:m.ly,dates:_()().subtract(1,"month").format("MMM,DD YYYY").toString()+" - "+_()().format("MMM,DD YYYY").toString()},{label:"Last month",key:m.lI,dates:_()().subtract(1,"month").startOf("month").format("MMM,DD YYYY").toString()+" - "+_()().subtract(1,"month").endOf("month").format("MMM,DD YYYY").toString()},{label:"Last 3 months",key:m.o9,dates:_()().subtract(3,"months").format("MMM,DD YYYY").toString()+" - "+_()().format("MMM,DD YYYY").toString()},{label:"All time",key:m.Si,dates:""}]}ngOnInit(){this.setInitialValues()}setInitialValues(){this.api.getDuration()||this.api.setDuration(this.durations.find(g=>g.key===m.ao)||null),this.api.getIncludeToggle()&&(this.includeArchived=this.api.getIncludeToggle())}onArchiveChange(g){this.api.setIncludeToggle(g),this.api.emitIncludeToggleChanged()}onDurationChange(g){this.isDurationLabelSelected.emit(!0),setTimeout(()=>{this.api.setDuration(g),this.api.setDrawerDuration(g),this.dateRange=[],this.api.setDateRange(this.dateRange),this.api.setDrawerDateRange(this.dateRange),this.api.emitDurationChanged()},500)}customDateChange(){this.isDurationLabelSelected.emit(!1),setTimeout(()=>{this.api.setDateRange(this.dateRange),this.api.setDrawerDateRange(this.dateRange),this.api.emitDateRangeChanged()})}export(){this.exportFile.emit()}}return(c=p).\u0275fac=function(g){return new(g||c)(t.Y36(O.m))},c.\u0275cmp=t.Xpm({type:c,selectors:[["worklenz-rpt-header"]],inputs:{title:"title",showExport:"showExport",showDuration:"showDuration",showArchivedToggle:"showArchivedToggle",isPngOnly:"isPngOnly"},outputs:{durationChanged:"durationChanged",exportFile:"exportFile",isDurationLabelSelected:"isDurationLabelSelected"},standalone:!0,features:[t.jDz],decls:21,vars:8,consts:[[1,"site-page-header-ghost-wrapper"],[1,"px-0",3,"nzGhost"],[4,"nzSpaceItem"],["timeSelector","nzDropdownMenu"],["nz-menu","","nzSelectable","",2,"max-height","330px","overflow-y","auto"],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf"],["nz-menu-divider",""],[1,"px-2","pb-2","pt-2","mt-1","custom-dropdown-range-li"],["nz-form",""],[1,"d-block","mt-1"],[1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],["nz-button","",1,"mt-2","ms-auto","d-block",3,"nzType","nzSize","click"],["nz-button","",3,"ngClass",4,"ngIf"],["nz-button","",3,"ngClass"],["nz-checkbox","",3,"ngModel","ngModelChange"],[4,"ngIf"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzTrigger","nzPlacement",4,"nzSpaceItem"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzTrigger","nzPlacement"],["nz-icon","",3,"nzType"],["nz-button","","nz-dropdown","",3,"nzType","nzLoading","nzTrigger","nzDropdownMenu","nzPlacement",4,"ngIf"],["exportMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-button","","nz-dropdown","",3,"nzType","nzLoading","nzTrigger","nzDropdownMenu","nzPlacement"],["nz-menu-item","",3,"click"],["nz-menu-item","",3,"nzSelected","click"],[1,"ms-auto","text-secondary"]],template:function(g,u){1&g&&(t.TgZ(0,"div",0)(1,"nz-page-header",1)(2,"nz-page-header-title"),t._uU(3),t.qZA(),t.TgZ(4,"nz-page-header-extra")(5,"nz-space"),t.YNc(6,b,2,1,"ng-container",2),t.YNc(7,V,3,1,"ng-container",2),t.qZA()()()(),t.TgZ(8,"nz-dropdown-menu",null,3)(10,"ul",4),t.YNc(11,N,4,3,"li",5),t._UZ(12,"li",6),t.TgZ(13,"li",7)(14,"form",8)(15,"label"),t._uU(16,"Custom range"),t.qZA(),t.TgZ(17,"div",9)(18,"nz-range-picker",10),t.NdJ("ngModelChange",function(w){return u.dateRange=w}),t.qZA()(),t.TgZ(19,"button",11),t.NdJ("click",function(){return u.customDateChange()}),t._uU(20," Filter "),t.qZA()()()()()),2&g&&(t.xp6(1),t.Q6J("nzGhost",!1),t.xp6(2),t.Oqu(u.title),t.xp6(8),t.Q6J("ngForOf",u.durations),t.xp6(7),t.Q6J("ngModel",u.dateRange)("ngModelOptions",t.DdM(7,F)),t.xp6(1),t.Q6J("nzType","primary")("nzSize","small"))},dependencies:[A.KJ,A.$O,A.u9,A.Jp,C.PV,C.Ls,M.zf,M.NU,M.$1,Z.sL,Z.ix,R.w,Y.dQ,k.mk,D.u5,D._Y,D.JJ,D.JL,D.On,D.F,S.Wr,S.Ie,x.b1,v.wO,v.r9,v.YV,x.cm,x.RR,x.wA,k.sg,f.Hb,f.uw,f.wS,e.U5,e.Lr,k.O5],changeDetection:0}),p})()},55226:(G,j,r)=>{r.r(j),r.d(j,{RptTimeEstimationVsActualModule:()=>le});var t=r(96814),A=r(35420),C=r(15861),M=r(47246),Z=r(17816),k=r(69649),D=r(63019),S=r(71993),x=r(16676),m=r.n(x),f=r(21406),e=r(65879),H=r(42012),_=r(16196),O=r(63106),R=r(33410),Y=r(82962),v=r(92574),J=r(20824),b=r(60095),P=r(73460),y=r(62787),I=r(42840),Q=r(70855),W=r(41958),U=r(62612),V=r(62595),N=r(8083),F=r(60804),L=r(22114),c=r(96109),p=r(33640),d=r(9172);const g=["chartContainer"],u=["exportChartCanvas"];function T(i,h){if(1&i&&(e.TgZ(0,"button",24),e._uU(1," Teams "),e._UZ(2,"span",25),e.qZA()),2&i){const l=e.oxw(2),n=e.MAs(17);e.Q6J("nzDropdownMenu",n)("nzClickHide",!1)("nzLoading",l.loadingTeams)("nzTrigger","click")}}function w(i,h){if(1&i&&(e.TgZ(0,"button",24),e._uU(1," Categories "),e._UZ(2,"span",25),e.qZA()),2&i){const l=e.oxw(2),n=e.MAs(39);e.Q6J("nzDropdownMenu",n)("nzClickHide",!1)("nzLoading",l.loadingCategories)("nzTrigger","click")}}function $(i,h){if(1&i&&(e.TgZ(0,"button",24),e._uU(1," Projects "),e._UZ(2,"span",25),e.qZA()),2&i){const l=e.oxw(2),n=e.MAs(28);e.Q6J("nzDropdownMenu",n)("nzClickHide",!1)("nzLoading",l.loadingProjects)("nzTrigger","click")}}function X(i,h){if(1&i&&(e.TgZ(0,"button",26),e._uU(1," Billable "),e._UZ(2,"span",25),e.qZA()),2&i){e.oxw(2);const l=e.MAs(10);e.Q6J("nzDropdownMenu",l)("nzClickHide",!1)("nzTrigger","click")}}function q(i,h){1&i&&(e.TgZ(0,"nz-space"),e.YNc(1,T,3,4,"button",22),e.YNc(2,w,3,4,"button",22),e.YNc(3,$,3,4,"button",22),e.YNc(4,X,3,3,"button",23),e.qZA())}function ee(i,h){if(1&i&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29,30),e._UZ(4,"canvas",31,32),e.qZA()()()),2&i){const l=e.oxw();e.Udp("height",l.chartHeight+"px"),e.xp6(2),e.Udp("height",l.chartHeight+"px")("width",l.chartWidth+"px"),e.xp6(2),e.Q6J("data",l.barChartData)("options",l.barChartOptions)("plugins",l.barChartPlugins)("legend",!1)("type","bar")}}function te(i,h){1&i&&e._UZ(0,"nz-empty")}function ne(i,h){if(1&i){const l=e.EpF();e.TgZ(0,"nz-segmented",33),e.NdJ("nzValueChange",function(o){e.CHM(l);const a=e.oxw();return e.KtG(a.handleIndexChange(o))}),e.qZA()}if(2&i){const l=e.oxw();e.Q6J("nzOptions",l.toggleOptions)("nzTooltipTitle","The adjustment of values such as man-days and working days can be done through the project settings.")}}function oe(i,h){if(1&i){const l=e.EpF();e.TgZ(0,"li",8),e.NdJ("nzCheckedChange",function(o){const s=e.CHM(l).$implicit;return e.KtG(s.selected=o)})("nzCheckedChange",function(){e.CHM(l);const o=e.oxw();return e.KtG(o.checkTeam())}),e._uU(1),e.qZA()}if(2&i){const l=h.$implicit;e.Q6J("nzChecked",l.selected),e.xp6(1),e.hij(" ",l.name," ")}}function ae(i,h){if(1&i){const l=e.EpF();e.TgZ(0,"li",8),e.NdJ("nzCheckedChange",function(o){const s=e.CHM(l).$implicit;return e.KtG(s.selected=o)})("nzCheckedChange",function(){e.CHM(l);const o=e.oxw();return e.KtG(o.checkProject())}),e.TgZ(1,"div",34)(2,"div")(3,"span",35),e._uU(4),e.qZA()()()()}if(2&i){const l=h.$implicit;e.Q6J("nzChecked",l.selected),e.xp6(4),e.Oqu(l.name)}}function ie(i,h){if(1&i){const l=e.EpF();e.TgZ(0,"li",8),e.NdJ("nzCheckedChange",function(o){const s=e.CHM(l).$implicit;return e.KtG(s.selected=o)})("nzCheckedChange",function(){e.CHM(l);const o=e.oxw();return e.KtG(o.checkCategory())}),e.TgZ(1,"div",34)(2,"div")(3,"span",36),e._UZ(4,"nz-badge",37),e.qZA()()()()}if(2&i){const l=h.$implicit;e.Q6J("nzChecked",l.selected),e.xp6(4),e.Q6J("nzColor",l.color_code)("nzText",l.name)}}var K=function(i){return i[i.WORKING_DAYS=0]="WORKING_DAYS",i[i.MAN_DAYS=1]="MAN_DAYS",i}(K||{});const re=[{path:"",component:(()=>{var i;class h{constructor(n,o,a){this.cdr=n,this.service=o,this.api=a,this.visible=!1,this.loading=!1,this.loadingTeams=!1,this.loadingCategories=!1,this.loadingProjects=!1,this.selectAllTeams=!0,this.selectAllCategories=!0,this.selectAllProjects=!0,this.selectNoCategory=!0,this.isDurationLabelSelected=!0,this.chartHeight=600,this.chartWidth=1080,this.teamSearchText=null,this.categorySearchText=null,this.projectSearchText=null,this.tabTitle="Working Days",this.teamsDropdown=[],this.categoriesDropdown=[],this.projectsDropdown=[],this.barChartPlugins=[],this.projects=[],this.toggleOptions=["Working Days","Man Days"],this.type=0,this.exportChart=null,this.baseChart=null,this.barChartData={labels:[],datasets:[{data:[],label:"Estimated Days ",backgroundColor:"#A5AAD9",barThickness:50},{data:[],label:"Actual Days ",backgroundColor:"#c191cc",barThickness:50}]},this.barChartOptions={maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"Days",align:"end",font:{family:"Helvetica"}}},x:{title:{display:!0,text:"Project",align:"end",font:{family:"Helvetica"}},ticks:{callback:function(s){return this.getLabelForValue(parseFloat(s)).substr(0,30)}}}},plugins:{tooltip:{callbacks:{footer:s=>{if(s.length>0){const z=this.projects[s[0].dataIndex];if(z.end_date)return"Ends On: "+m()(z.end_date).format("MMM, DD YYYY")}return""}}},datalabels:{color:"white",anchor:"start",align:"start",offset:-30,borderColor:"#000",textStrokeColor:"black",textStrokeWidth:4}}},this.billableDropdownOptions={billable:!0,nonBillable:!0},(0,D.T)(this.service.onDurationChange,this.service.onDateRangeChange,this.service.onIncludeToggleChange).pipe((0,S.sL)()).subscribe(()=>{this.get()})}ngOnInit(){this.chartHeight=window.innerHeight-300,this.getTeams(),this.cdr.markForCheck()}getTeams(){var n=this;return(0,C.Z)(function*(){try{n.loadingTeams=!0;const o=yield n.api.getOverviewTeams();if(o.done){n.loadingTeams=!1;const a=[];for(const s of o.body)a.push({selected:!0,name:s.name,id:s.id});n.teamsDropdown=a,yield n.refreshCategories(),n.cdr.markForCheck()}}catch(o){(0,k.tu)(o),n.loadingTeams=!1,n.cdr.markForCheck()}})()}getCategories(n){var o=this;return(0,C.Z)(function*(){try{o.loadingCategories=!0;const a=yield o.api.getCategories(n);a.done&&(o.categoriesDropdown=a.body),o.loadingCategories=!1,o.cdr.markForCheck()}catch{o.loadingCategories=!1,o.cdr.markForCheck()}})()}setDatesForKeys(){var n=this;return(0,C.Z)(function*(){if(n.service.getDuration()?.key){const o=n.service.getDuration()?.key,a=m()();switch(o){case f.WD:const s=m()().subtract(1,"days");n.service.setDateRange([s.toString(),s.toString()]);break;case f.ao:const z=m()().subtract(1,"weeks");n.service.setDateRange([z.toString(),a.toString()]);break;case f.ly:const E=m()().subtract(1,"months");n.service.setDateRange([E.toString(),a.toString()]);break;case f.o9:const B=m()().subtract(3,"months");n.service.setDateRange([B.toString(),a.toString()]);break;case f.$U:const ce=m()().subtract(1,"weeks").startOf("week"),de=m()().subtract(1,"weeks").endOf("week");n.service.setDateRange([ce.toString(),de.toString()]);break;case f.lI:const ge=m()().subtract(1,"month").startOf("month"),he=m()().subtract(1,"month").endOf("month");n.service.setDateRange([ge.toString(),he.toString()])}}})()}get(){var n=this;return(0,C.Z)(function*(){try{n.loading=!0;const o=n.getSelectedTeamIds(),a=n.getSelectedCategories(),s=n.getSelectedProjectIds();n.isDurationLabelSelected&&(yield n.setDatesForKeys());const z={type:K[n.type],teams:o,categories:a,selectNoCategory:n.selectNoCategory,projects:s,duration:n.service.getDuration()?.key,date_range:n.service.getDateRange(),billable:n.billableDropdownOptions},E=yield n.api.getProjectEstimatedVsActual(z,n.service.getIncludeToggle());E.done&&(n.barChartData&&(n.barChartData.datasets[0].data=[],n.barChartData.datasets[1].data=[],n.barChartData.labels=[]),n.loading=!1,n.projects=E.body,n.createChart(),n.cdr.markForCheck()),n.loading=!1,n.cdr.markForCheck()}catch(o){n.loading=!1,(0,k.tu)(o),n.cdr.markForCheck()}})()}ngOnChanges(n){setTimeout(()=>{this.barChart?.update(""),this.cdr.markForCheck()},1e3)}createChart(){this.visible=!0;for(const n of this.projects)this.barChartData.labels?.push(n.name),this.barChartData.datasets[0].data.push(n.estimated_value||0),this.barChartData.datasets[1].data.push(n.value||0);if(this.projects.length){const n=window.innerWidth-300,o=120*this.projects.length;this.chartWidth=o>n?o:window.innerWidth-250}this.barChart?.update("none"),this.createExportChart(),this.cdr.markForCheck()}getSelectedTeamIds(){return this.teamsDropdown.filter(a=>a.selected).map(a=>a.id)||[]}getSelectedCategories(){return this.categoriesDropdown.filter(a=>a.selected).map(a=>a.id)||[]}getSelectedProjectIds(){return this.projectsDropdown.filter(a=>a.selected).map(a=>a.id)||[]}checkTeam(){this.selectAllTeams=!1,this.refreshCategories()}checkCategory(){this.selectAllCategories=!1,this.refreshProjects()}checkProject(){this.selectAllProjects=!1,this.onFilterChange()}refreshCategories(){var n=this;return(0,C.Z)(function*(){yield n.getCategories(n.getSelectedTeamIds()),n.refreshProjects()})()}refreshProjects(){var n=this;return(0,C.Z)(function*(){yield n.getProjects(n.getSelectedTeamIds(),n.getSelectedCategories()),n.get()})()}getProjects(n,o){var a=this;return(0,C.Z)(function*(){try{a.loadingProjects=!0;const s=yield a.api.getAllocationProjects(n,o,a.selectNoCategory);s.done&&(a.projectsDropdown=s.body),a.loadingProjects=!1,a.cdr.markForCheck()}catch{a.loadingProjects=!1,a.cdr.markForCheck()}a.cdr.markForCheck()})()}detectChanges(){this.cdr.markForCheck()}createExportChart(){this.exportChart?.destroy(),this.exportChart=new Z.kL(this.exportChartCanvas.nativeElement,{type:"bar",data:this.barChartData,options:this.barChartOptions}),this.exportChart?.update(),this.cdr.markForCheck()}export(){var n=this;return(0,C.Z)(function*(){const a=n.exportChartCanvas.nativeElement.toDataURL("image/png").replace("image/png","image/octet-stream"),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","Estimated vs Actual.png"),s.click()})()}onFilterChange(){this.get()}handleIndexChange(n){this.type=n,this.get()}selectAllTeamsChecked(n){if(n){for(const o of this.teamsDropdown)o.selected=!0;this.refreshCategories(),this.cdr.markForCheck()}else{for(const o of this.teamsDropdown)o.selected=!1;this.refreshCategories(),this.cdr.markForCheck()}}selectAllCategoriesChecked(n){if(n){this.selectNoCategory=!0;for(const o of this.categoriesDropdown)o.selected=!0;this.refreshProjects(),this.cdr.markForCheck()}else{this.selectNoCategory=!1;for(const o of this.categoriesDropdown)o.selected=!1;this.refreshProjects(),this.cdr.markForCheck()}}selectAllProjectsChecked(n){if(n){for(const o of this.projectsDropdown)o.selected=!0;this.onFilterChange(),this.cdr.markForCheck()}else{for(const o of this.projectsDropdown)o.selected=!1;this.onFilterChange(),this.cdr.markForCheck()}}toggleBillableStatus(n){this.get()}}return(i=h).\u0275fac=function(n){return new(n||i)(e.Y36(e.sBO),e.Y36(H.m),e.Y36(_.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["worklenz-time-estimation-vs-actual-projects"]],viewQuery:function(n,o){if(1&n&&(e.Gf(M.jh,5),e.Gf(g,5),e.Gf(u,5)),2&n){let a;e.iGM(a=e.CRH())&&(o.barChart=a.first),e.iGM(a=e.CRH())&&(o.chartContainer=a.first),e.iGM(a=e.CRH())&&(o.exportChartCanvas=a.first)}},features:[e.TTD],decls:51,vars:29,consts:[[3,"title","showExport","isPngOnly","isDurationLabelSelected","exportFile"],[3,"nzLoading","nzTitle","nzExtra"],["projectsTitle",""],["class","position-relative",3,"height",4,"ngIf"],[4,"ngIf"],["toggleSection",""],["billableDropdown","nzDropdownMenu"],["nz-menu","",1,"pt-0",2,"max-height","330px","overflow-y","auto"],["nz-checkbox","","nz-menu-item","",1,"m-0","align-items-baseline",3,"nzChecked","nzCheckedChange"],["teamsSelector","nzDropdownMenu"],[1,"px-3","py-2","sticky-top","bg-white"],["type","text","placeholder","Search by team name","nz-input","",3,"ngModel","ngModelChange"],["teamSearchInput",""],["nz-menu-divider",""],["class","m-0 align-items-baseline","nz-checkbox","","nz-menu-item","",3,"nzChecked","nzCheckedChange",4,"ngFor","ngForOf"],["projectsSelector","nzDropdownMenu"],[1,"px-3","py-2"],["type","text","placeholder","Search by project name","nz-input","",3,"ngModel","ngModelChange"],["projectSearchInput",""],["categorySelector","nzDropdownMenu"],["type","text","placeholder","Search by category name","nz-input","",3,"ngModel","ngModelChange"],["categorySearchInput",""],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzClickHide","nzLoading","nzTrigger",4,"nzSpaceItem"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzClickHide","nzTrigger",4,"nzSpaceItem"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzClickHide","nzLoading","nzTrigger"],["nz-icon","","nzType","caret-down"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzClickHide","nzTrigger"],[1,"position-relative"],[1,"chartWrapper"],[1,"chartAreaWrapper"],["chartContainer",""],["baseChart","",3,"data","options","plugins","legend","type"],["exportChartCanvas",""],["nz-tooltip","",3,"nzOptions","nzTooltipTitle","nzValueChange"],[1,"d-flex","align-items-center","justify-content-center","user-select-none"],["nz-typography","",1,"d-block"],[1,"d-block"],[3,"nzColor","nzText"]],template:function(n,o){if(1&n&&(e.TgZ(0,"worklenz-rpt-header",0),e.NdJ("isDurationLabelSelected",function(s){return o.isDurationLabelSelected=s})("exportFile",function(){return o.export()}),e.qZA(),e.TgZ(1,"nz-content")(2,"nz-card",1),e.YNc(3,q,5,0,"ng-template",null,2,e.W1O),e.YNc(5,ee,6,11,"div",3),e.YNc(6,te,1,0,"nz-empty",4),e.YNc(7,ne,1,2,"ng-template",null,5,e.W1O),e.qZA()(),e.TgZ(9,"nz-dropdown-menu",null,6)(11,"ul",7)(12,"li",8),e.NdJ("nzCheckedChange",function(s){return o.billableDropdownOptions.billable=s})("nzCheckedChange",function(){return o.toggleBillableStatus("billable")}),e._uU(13,"Billable "),e.qZA(),e.TgZ(14,"li",8),e.NdJ("nzCheckedChange",function(s){return o.billableDropdownOptions.nonBillable=s})("nzCheckedChange",function(){return o.toggleBillableStatus("nonBillable")}),e._uU(15,"Non Billable "),e.qZA()()(),e.TgZ(16,"nz-dropdown-menu",null,9)(18,"ul",7)(19,"li",10)(20,"input",11,12),e.NdJ("ngModelChange",function(s){return o.teamSearchText=s})("ngModelChange",function(){return o.detectChanges()}),e.qZA()(),e.TgZ(22,"li",8),e.NdJ("nzCheckedChange",function(s){return o.selectAllTeams=s})("nzCheckedChange",function(s){return o.selectAllTeamsChecked(s)}),e._uU(23,"Select all "),e.qZA(),e._UZ(24,"li",13),e.YNc(25,oe,2,2,"li",14),e.ALo(26,"searchByName"),e.qZA()(),e.TgZ(27,"nz-dropdown-menu",null,15)(29,"ul",7)(30,"li",16)(31,"input",17,18),e.NdJ("ngModelChange",function(s){return o.projectSearchText=s})("ngModelChange",function(){return o.detectChanges()}),e.qZA()(),e.TgZ(33,"li",8),e.NdJ("nzCheckedChange",function(s){return o.selectAllProjects=s})("nzCheckedChange",function(s){return o.selectAllProjectsChecked(s)}),e._uU(34,"Select all "),e.qZA(),e._UZ(35,"li",13),e.YNc(36,ae,5,2,"li",14),e.ALo(37,"searchByName"),e.qZA()(),e.TgZ(38,"nz-dropdown-menu",null,19)(40,"ul",7)(41,"li",10)(42,"input",20,21),e.NdJ("ngModelChange",function(s){return o.categorySearchText=s})("ngModelChange",function(){return o.detectChanges()}),e.qZA()(),e.TgZ(44,"li",8),e.NdJ("nzCheckedChange",function(s){return o.selectAllCategories=s})("nzCheckedChange",function(s){return o.selectAllCategoriesChecked(s)}),e._uU(45,"Select all "),e.qZA(),e._UZ(46,"li",13),e.TgZ(47,"li",8),e.NdJ("nzCheckedChange",function(s){return o.selectNoCategory=s})("nzCheckedChange",function(){return o.checkCategory()}),e._uU(48," No Category "),e.qZA(),e.YNc(49,ie,5,3,"li",14),e.ALo(50,"searchByName"),e.qZA()()),2&n){const a=e.MAs(4),s=e.MAs(8),z=e.MAs(21),E=e.MAs(32),B=e.MAs(43);e.Q6J("title","Estimated vs Actual")("showExport",!0)("isPngOnly",!0),e.xp6(2),e.Q6J("nzLoading",o.loading)("nzTitle",a)("nzExtra",s),e.xp6(3),e.Q6J("ngIf",o.projects.length),e.xp6(1),e.Q6J("ngIf",!o.projects.length),e.xp6(6),e.Q6J("nzChecked",o.billableDropdownOptions.billable),e.xp6(2),e.Q6J("nzChecked",o.billableDropdownOptions.nonBillable),e.xp6(6),e.Q6J("ngModel",o.teamSearchText),e.xp6(2),e.Q6J("nzChecked",o.selectAllTeams),e.xp6(3),e.Q6J("ngForOf",e.xi3(26,20,o.teamsDropdown,z.value)),e.xp6(6),e.Q6J("ngModel",o.projectSearchText),e.xp6(2),e.Q6J("nzChecked",o.selectAllProjects),e.xp6(3),e.Q6J("ngForOf",e.xi3(37,23,o.projectsDropdown,E.value)),e.xp6(6),e.Q6J("ngModel",o.categorySearchText),e.xp6(2),e.Q6J("nzChecked",o.selectAllCategories),e.xp6(3),e.Q6J("nzChecked",o.selectNoCategory),e.xp6(2),e.Q6J("ngForOf",e.xi3(50,26,o.categoriesDropdown,B.value))}},dependencies:[t.sg,t.O5,M.jh,O.I,R.OK,Y.bd,v.NU,v.$1,J.Zp,b.Fj,b.JJ,b.On,P.wO,P.r9,P.YV,y.cm,y.RR,y.wA,I.ix,Q.w,W.dQ,U.Ie,V.Ls,N.ZU,F.p9,L.wY,c.SY,p.x7,d.g],styles:[".chartWrapper[_ngcontent-%COMP%]{max-width:calc(100vw - 250px);min-width:calc(100vw - 250px);height:calc(100vh - 300px);overflow:auto}canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}"]}),h})()}];let se=(()=>{var i;class h{}return(i=h).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[A.Bz.forChild(re),A.Bz]}),h})(),le=(()=>{var i;class h{}return(i=h).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[t.ez,se,M.vQ,O.I,R.wm,Y.vh,v.zf,J.o7,b.u5,y.b1,I.sL,U.Wr,V.PV,N.ZJ,F.Xo,L.KW,c.cg,p.mS]}),h})()}}]);